<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>log from home</title>
    <link>https://blog.lofibean.cc/</link>
    <description>Recent content on log from home</description>
    <image>
      
      <url>https://blog.lofibean.cc/android-chrome-512x512.png?v=20201231</url>
      
      <title>Favicon of log from home</title>
      <link>https://blog.lofibean.cc/</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; bemnlam</copyright>
    <lastBuildDate>Thu, 25 Feb 2021 17:10:25 +0800</lastBuildDate>
    
	<atom:link href="https://blog.lofibean.cc/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ã€æ›¸æ‘˜ã€‘çœŸç¢ºï¼šæ‰­è½‰åå¤§ç›´è¦ºåèª¤ï¼Œç™¼ç¾äº‹æƒ…æ¯”ä½ æƒ³çš„ç¾å¥½</title>
      <link>https://blog.lofibean.cc/posts/reading-factfulness/</link>
      <pubDate>Thu, 25 Feb 2021 17:10:25 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/reading-factfulness/</guid>
      
        <description>&lt;img src=&#34;https://im2.book.com.tw/image/getImage?i=https://www.books.com.tw/img/001/079/04/0010790443_bc_01.jpg&amp;v=5b2243fb&amp;w=1200&amp;h=630&#34; /&gt;&lt;blockquote&gt;
&lt;p&gt;å¯ä¸å¯èƒ½æœ‰ä¸€å¤©æ‰€æœ‰äººéƒ½æœ‰åŸºæ–¼äº‹å¯¦çš„ä¸–ç•Œè§€å‘¢ï¼Ÿå·¨å¤§çš„æ”¹è®Šç¸½æ˜¯é›£ä»¥æƒ³åƒï¼Œä½†çµ•å°æœ‰å¯èƒ½ï¼Œæˆ‘ä¹Ÿç›¸ä¿¡æœ‰ä¸€å¤©æœƒå¯¦ç¾ï¼ŒåŸå› æœ‰å…©å€‹ï¼šç¬¬ä¸€ï¼Œ&lt;strong&gt;åŸºæ–¼ç¾å¯¦çš„ä¸–ç•Œè§€æ›´æœ‰åŠ©æŠŠäººç”Ÿèµ°å¥½&lt;/strong&gt;ï¼Œå°±åƒæº–ç¢ºçš„å°èˆªç³»çµ±æ›´æœ‰åŠ©ä½ åœ¨åŸè£¡æ‰¾è·¯ï¼›ç¬¬äºŒï¼Œå¤§æ¦‚æ›´é‡è¦çš„æ˜¯ï¼Œ&lt;strong&gt;åŸºæ–¼ç¾å¯¦çš„ä¸–ç•Œè§€è®“äººæ›´å®‰å¿ƒ&lt;/strong&gt;ï¼Œæ¯”èª‡å¤§çš„ä¸–ç•Œè§€ä¾†å¾—ä¸æœƒé€ æˆå£“åŠ›èˆ‡çµ•æœ›ï¼Œç•¢ç«Ÿèª‡å¤§çš„ä¸–ç•Œè§€å¤ªè² é¢ä¹Ÿå¤ªåš‡äººäº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘å€‘æœ‰äº†åŸºæ–¼ç¾å¯¦çš„ä¸–ç•Œè§€ä¹‹å¾Œï¼Œå¯ä»¥çœ‹åˆ°ä¸–ç•Œä¸å¦‚è¡¨é¢ä¸Šé‚£éº¼ç³Ÿâ”€â”€è€Œä¸”å¯ä»¥çŸ¥é“æˆ‘å€‘è©²æ€éº¼&lt;strong&gt;è®“ä¸–ç•Œè®Šå¾—æ„ˆä¾†æ„ˆå¥½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#1-äºŒåˆ†åŒ–ç›´è¦ºåèª¤&#34;&gt;1: äºŒåˆ†åŒ–ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#2-è² é¢å‹ç›´è¦ºåèª¤&#34;&gt;2: è² é¢å‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#3-æ‰­è½‰ç›´ç·šå‹ç›´è¦ºåèª¤&#34;&gt;3: æ‰­è½‰ç›´ç·šå‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#4-ææ‡¼å‹ç›´è¦ºåèª¤&#34;&gt;4: ææ‡¼å‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#5-å¤±çœŸå‹ç›´è¦ºåèª¤&#34;&gt;5: å¤±çœŸå‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#6-æ¦‚æ‹¬å‹ç›´è¦ºåèª¤&#34;&gt;6: æ¦‚æ‹¬å‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#7-å®¿å‘½å‹ç›´è¦ºåèª¤&#34;&gt;7: å®¿å‘½å‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#8-å–®ä¸€è§€é»ç›´è¦ºåèª¤&#34;&gt;8: å–®ä¸€è§€é»ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#9-æ€ªç½ªå‹ç›´è¦ºåèª¤&#34;&gt;9: æ€ªç½ªå‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#10-æ€¥è¿«å‹ç›´è¦ºåèª¤&#34;&gt;10: æ€¥è¿«å‹ç›´è¦ºåèª¤&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;1-äºŒåˆ†åŒ–ç›´è¦ºåèª¤&#34;&gt;1: äºŒåˆ†åŒ–ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰äºŒåˆ†åŒ–ç›´è¦ºåèª¤ï¼Œä½ è¦å°‹æ‰¾å¤šæ•¸æ˜¯è½åœ¨å“ªè£¡ã€‚æ‡‚å¾—å¯Ÿè¦ºæˆ‘å€‘é‡åˆ°äº†ä¸€å€‹å°‡äº‹æƒ…å€åˆ†æˆå…©é¡çš„èªªæ³•ï¼Œä¸­é–“éš”è‘—ä¸€æ¢é´»æºã€‚ä½†çœŸå¯¦ä¸–ç•Œå¾€å¾€ä¸æ˜¯æ–·ç„¶äºŒåˆ†ï¼Œå¤šæ•¸äººé€šå¸¸æ˜¯è½åœ¨ä¸­é–“ï¼Œé´»æºä¸¦ä¸å­˜åœ¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç•™æ„å°&lt;strong&gt;å¹³å‡å€¼&lt;/strong&gt;çš„æ¯”è¼ƒï¼šå¦‚æœä½ èƒ½æª¢è¦–åˆ†å¸ƒç‹€æ³ï¼Œå¤§æ¦‚æœƒç™¼ç¾å€‹é«”é–“æœ‰æ‰€é‡ç–Šï¼Œé´»æºä¸¦ä¸å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;ç•™æ„å°&lt;strong&gt;æ¥µå€¼&lt;/strong&gt;çš„æ¯”è¼ƒï¼šç„¡è«–ä»»ä½•åœ‹å®¶æˆ–ç¾¤é«”ï¼Œç¸½æœ‰ä¸Šå±¤èˆ‡ä¸‹å±¤ï¼Œæœ‰æ™‚æ¶‰åŠé«˜åº¦ä¸å…¬ï¼Œä½†å³ä½¿å¦‚æ­¤ï¼Œå¤šæ•¸é€šå¸¸ä»æ˜¯è½åœ¨ä¸­é–“ï¼ŒåŸæœ¬ä½ ä»¥ç‚ºé´»æºæ‰€åœ¨çš„åœ°æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;ç•™æ„è‡ªå·±çš„&lt;strong&gt;ä¸Šå±¤ç›®å…‰&lt;/strong&gt;ï¼šåˆ‡è¨˜ï¼Œå¾ä¸Šå±¤ä¿¯ç°çš„ç›®å…‰ä¸æº–ï¼Œåº•ä¸‹å…¶ä»–æ±è¥¿çœ‹èµ·ä¾†éƒ½ä¸€æ¨£çŸ®ï¼Œä½†å…¶å¯¦ä¸ç„¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-è² é¢å‹ç›´è¦ºåèª¤&#34;&gt;2: è² é¢å‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰è² é¢å‹ç›´è¦ºåèª¤ï¼Œä½ è©²é æœŸå£æ¶ˆæ¯æœƒè¢«å¤§è‚†å ±å°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ—¢æ˜¯ç³Ÿç³•ä¹Ÿ&lt;strong&gt;åœ¨è®Šå¥½&lt;/strong&gt;ï¼šç·´ç¿’å€åˆ†ç‹€æ…‹ï¼ˆæ¯”å¦‚ã€Œç³Ÿç³•ã€ï¼‰èˆ‡æ”¹è®Šçš„è¶¨å‹¢ï¼ˆæ¯”å¦‚ã€Œè®Šå¥½ã€ï¼‰ï¼Œæ˜ç™½äº‹æƒ…å¯ä»¥æ—¢æ˜¯ç³Ÿç³•ä¹Ÿåœ¨è®Šå¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¥½æ¶ˆæ¯&lt;/strong&gt;ä¸æˆæ–°èï¼šå¥½æ¶ˆæ¯çµ•å°‘æœƒå ±å°ï¼Œæ‰€ä»¥æ–°èå¤§å¤šæ˜¯å£æ¶ˆæ¯ã€‚ç•¶ä½ çœ‹åˆ°å£æ¶ˆæ¯ï¼Œå•ä¸€å•è‡ªå·±ï¼Œå¥½æ¶ˆæ¯æ˜¯å¦ä¹Ÿæœƒç²å¾—å ±å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ¼¸é€²æ­¥&lt;/strong&gt;ä¸æˆæ–°èï¼šç•¶äº‹æƒ…é€æ¼¸é€²æ­¥ï¼Œåªæ˜¯æœ‰æ™‚é€€æ­¥ä¸€ä¸‹ï¼Œä½ å¾€å¾€æœƒæ³¨æ„åˆ°ä¸€æ™‚çš„é€€æ­¥ï¼Œè€Œéæ•´é«”çš„é€²æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;æ–°èå¤šä¸ä»£è¡¨å£äº‹å¤šï¼šå£æ–°èå¤šï¼Œæœ‰æ™‚åªä»£è¡¨å„ç•Œå°å£äº‹çš„ç›£æ§åº¦æœ‰æ‰€æå‡ï¼Œä¸ä»£è¡¨ä¸–ç•Œæ­£åœ¨è®Šç³Ÿã€‚&lt;/li&gt;
&lt;li&gt;å°å¿ƒå°éå¾€çš„ç¾åŒ–ï¼šäººæ™‚å¸¸æœƒ&lt;strong&gt;ç¾åŒ–éå»&lt;/strong&gt;ï¼Œåœ‹å®¶æ™‚å¸¸æœƒæ­Œé Œæ­·å²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-æ‰­è½‰ç›´ç·šå‹ç›´è¦ºåèª¤&#34;&gt;3: æ‰­è½‰ç›´ç·šå‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰ç›´ç·šå‹ç›´è¦ºåèª¤ï¼Œåˆ‡è¨˜ã€Œç·šæœ‰å„ç¨®å½¢ç‹€ã€ï¼Œäº‹æƒ…ä¸æœƒåªæœ‰ä¸€ç¨®ç™¼å±•æ–¹å‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åˆ¥å‡å®šæœƒæ˜¯ç›´ç·šï¼šè¨±å¤šè¶¨å‹¢ä¸æ˜¯å‘ˆç›´ç·šï¼Œè€Œæ˜¯å‘ˆ&lt;strong&gt;ï¼³å‹&lt;/strong&gt;ã€&lt;strong&gt;æ»‘æ¢¯å‹&lt;/strong&gt;ã€&lt;strong&gt;é§å³°å‹&lt;/strong&gt;æˆ–&lt;strong&gt;å€å¢å‹&lt;/strong&gt;ç™¼å±•ã€‚å¤©åº•ä¸‹æ²’æœ‰å“ªå€‹å¹¼å…’æœƒä»¥å‡ºç”Ÿå‰6å€‹æœˆçš„ç”Ÿé•·é€Ÿåº¦ç¹¼çºŒé•·å¤§ï¼Œä¹Ÿæ²’æœ‰çˆ¶æ¯æ¨‚è¦‹å¦‚æ­¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-ææ‡¼å‹ç›´è¦ºåèª¤&#34;&gt;4: ææ‡¼å‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰ææ‡¼å‹ç›´è¦ºåèª¤ï¼Œä½ æ‡‰è©²è©•ä¼°é¢¨éšªã€‚æ‡‚å¾—å¯Ÿè¦ºå¯æ€•äº‹ç‰©æ­£åœ¨å¸å¼•æˆ‘å€‘çš„æ³¨æ„åŠ›ï¼Œç„¶å¾Œæ„è­˜åˆ°é€™äº›ä¸è¦‹å¾—æ˜¯æœ€å±éšªçš„äº‹ç‰©ã€‚æˆ‘å€‘ç”Ÿä¾†å®³æ€•è¡çªã€å—å›°èˆ‡æ±™æŸ“ï¼Œé«˜ä¼°äº†ç›¸é—œå±å®³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ææ‡¼&lt;/strong&gt;vs.ç¾å¯¦ï¼šä¸–ç•Œé¡¯å¾—æ¯”å¯¦éš›ä¸Šæ›´å¯æ€•ï¼ŒåŸå› æ˜¯æ–°èåª’é«”èˆ‡ä½ è‡ªå·±çš„æ³¨æ„åŠ›éæ¿¾å™¨æŠŠè³‡è¨Šç¯©é¸éäº†ï¼Œç•™ä¸‹ææ€–çš„æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢¨éšªï¼å±éšªxæš´éœ²ï¼šé¢¨éšªç¨‹åº¦ä¸æ˜¯å–æ±ºæ–¼ä½ &lt;strong&gt;æ„Ÿè¦º&lt;/strong&gt;å¤šå®³æ€•ï¼Œè€Œæ˜¯é—œä¹å…©ä»¶äº‹ï¼šæœ‰å¤šå±éšªï¼Ÿä½ æš´éœ²åœ¨å¤šå°‘å±éšªä¸­ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…ˆå†·éœå†èªªï¼šä½ å®³æ€•æ™‚çœ‹è¦‹çš„ä¸–ç•Œæœƒä¸ä¸€æ¨£ã€‚&lt;strong&gt;åœ¨é©šææ¶ˆé€€ä¹‹å‰ï¼Œç›¡é‡å°‘åšæ±ºå®š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;5-å¤±çœŸå‹ç›´è¦ºåèª¤&#34;&gt;5: å¤±çœŸå‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†å…‹åˆ¶å¤±çœŸå‹ç›´è¦ºåèª¤ï¼Œä½ å¾—æŒ‰æ¯”ä¾‹èªçŸ¥äº‹ç‰©ã€‚å¦‚æœçœ‹åˆ°æŸå€‹å–®ç¨çš„æ•¸å­—é¡¯å¾—å¾ˆé©šäººï¼ˆæ•¸å­—å¾ˆå¤§æˆ–å¾ˆå°ï¼‰ï¼Œä¸å¦¨è©¦è‘—æ‹¿ä¾†è·Ÿç›¸é—œæ•¸å­—æ¯”å°æˆ–ç›¸é™¤ï¼Œä¹Ÿè¨±æœƒæœ‰æˆªç„¶ä¸åŒçš„æ„Ÿå—ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ¯”å°ï¼šå·¨å¤§çš„æ•¸å­—ç¸½æ˜¯é©šäººã€‚&lt;strong&gt;å–®ç¨å‡ºç¾çš„æ•¸å­—æœƒé€ æˆèª¤å°&lt;/strong&gt;ï¼Œä½ è©²è¬¹æ…çœ‹å¾…ï¼Œæ°¸é è¦æ‰¾ç›¸é—œæ•¸å­—äº’ç›¸æ¯”å°ï¼Œæœ€å¥½é‚„è¦æ‰¾æŸå€‹æ•¸å­—ç›¸é™¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;80/20æ³•å‰‡&lt;/strong&gt;ï¼šä½ æ˜¯å¦æ›¾ç¶“éœ€è¦æª¢è¦–ä¸€å¤§å †é …ç›®ï¼Ÿä¸å¦¨æ‰¾å°‘æ•¸æœ€å¤§çš„é …ç›®ï¼Œå„ªå…ˆè™•ç†ï¼Œé‚£äº›å¾€å¾€æ¯”å…¶ä»–å…¨éƒ¨åŠ èµ·ä¾†æ›´é‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é™¤æ³•ï¼šæ•¸å­—èˆ‡æ¯”ä¾‹å¯èƒ½é€éœ²å¤©å·®åœ°åˆ¥çš„è³‡è¨Šã€‚&lt;strong&gt;æ¯”ä¾‹è¼ƒæœ‰æ„ç¾©&lt;/strong&gt;ï¼Œåœ¨æ¯”è¼ƒä¸åŒå¤§å°çš„ç¾¤é«”æ™‚å°¤å…¶æ˜¯é€™æ¨£ã€‚åœ¨æ¯”è¼ƒåœ‹å®¶æˆ–åœ°å€æ™‚ï¼Œç‰¹åˆ¥å¾—çœ‹äººå‡æ¯”ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;6-æ¦‚æ‹¬å‹ç›´è¦ºåèª¤&#34;&gt;6: æ¦‚æ‹¬å‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰æ¦‚æ‹¬å‹ç›´è¦ºåèª¤ï¼Œä½ è¦è³ªç–‘åˆ†é¡ã€‚æ‡‚å¾—å¯Ÿè¦ºæŸå€‹è§£é‡‹ç•¶ä¸­ç”¨äº†æ¦‚æ‹¬åˆ†é¡ï¼Œç„¶å¾Œæ„è­˜åˆ°åˆ†é¡å¯èƒ½æœƒèª¤å°ã€‚æˆ‘å€‘ç„¡æ³•ä¸æ¦‚æ‹¬åˆ†é¡ï¼Œä¹Ÿä¸è©²è¨­æ³•ä¸å†åˆ†é¡ï¼Œä½†è©²é¿å…éŒ¯ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°‹æ‰¾ä¸€å€‹ç¾¤é«”ã€Œè£¡é¢ã€çš„ä¸åŒä¹‹è™•&lt;/strong&gt;ï¼šåœ¨ç¾¤é«”å¾ˆå¤§æ™‚å°¤éœ€å¦‚æ­¤ï¼Œä½ å¾—è¨­æ³•åˆ‡åˆ†æˆæ›´æº–ç¢ºçš„å°åˆ†é¡ï¼Œç„¶å¾Œâ€¦â€¦&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°‹æ‰¾ä¸åŒç¾¤é«”ã€Œä¹‹é–“ã€çš„ç›¸ä¼¼ä¹‹è™•&lt;/strong&gt;ï¼šå¦‚æœä½ åœ¨ä¸åŒç¾¤é«”ä¹‹é–“æ‰¾åˆ°éå¸¸ç›¸ä¼¼ä¹‹è™•ï¼Œä½ è¦æ€è€ƒç¾¤é«”ä¹‹é–“æ˜¯å¦æœ‰é—œï¼Œä½†ä¹Ÿâ€¦â€¦&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°‹æ‰¾å„å€‹ç¾¤é«”ä¹‹é–“çš„ã€Œå·®ç•°ã€ï¼šåˆ¥å‡å®šé€™å€‹ç¾¤é«”ï¼ˆä¾‹å¦‚ä½ å’Œå…¶ä»–ç¬¬å››ç´šçš„äººæˆ–æ˜è¿·çš„å£«å…µï¼‰è£¡é©ç”¨çš„æ±è¥¿ï¼Œä¹Ÿèƒ½å¥—ç”¨åˆ°å¦ä¸€å€‹ç¾¤é«”ï¼ˆä¾‹å¦‚éç¬¬å››ç´šçš„äººæˆ–ç¡è¦ºçš„å¬°å…’ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç•¶å¿ƒã€Œå¤šæ•¸ã€ï¼šå¤šæ•¸åªä»£è¡¨è¶…éåŠæ•¸ã€‚ä½ è©²å•é€™å€‹æ‰€è¬‚å¤šæ•¸æ˜¯51ï¼…ã€99ï¼…æˆ–åœ¨ä¸­é–“å“ªè£¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç•¶å¿ƒ&lt;strong&gt;é®®æ˜ä¾‹å­&lt;/strong&gt;ï¼šé®®æ˜çš„ä¾‹å­å®¹æ˜“å›æƒ³ï¼Œå»å¯èƒ½æ˜¯ç‰¹ä¾‹è€Œéé€šå‰‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡å®šåˆ¥äººä¸æ˜¯ç¬¨è›‹&lt;/strong&gt;ï¼šç•¶æŸå€‹äº‹ç‰©çœ‹èµ·ä¾†æ€ªæ€ªçš„ï¼Œä½ è¦æŠ±æŒå¥½å¥‡èˆ‡è¬™è™›ï¼Œæ€è€ƒé€™å¾å“ªæ–¹é¢çœ‹æ˜¯ä¸€å€‹å¥½è¾¦æ³•ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;7-å®¿å‘½å‹ç›´è¦ºåèª¤&#34;&gt;7: å®¿å‘½å‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰å®¿å‘½å‹ç›´è¦ºåèª¤ï¼Œä½ è¦åˆ‡è¨˜ç·©æ…¢æ”¹è®Šä¹Ÿæ˜¯æ”¹è®Šã€‚æ‡‚å¾—å¯Ÿè¦ºè¨±å¤šäº‹ç‰©ï¼ˆåŒ…æ‹¬å€‹äººã€åœ‹å®¶ã€å®—æ•™å’Œæ–‡åŒ–ï¼‰é›–ç„¶çœ‹ä¼¼æ²’æœ‰æ”¹è®Šï¼Œå…¶å¯¦åªæ˜¯æ”¹è®Šå¾—å¾ˆæ…¢ï¼Œç„¶å¾Œæƒ³åˆ°æ»´æ°´å¯ä»¥ç©¿çŸ³ï¼Œç·©æ…¢çš„å°æ”¹è®Šå¯ä»¥æ—¥ç©æœˆç´¯æˆå¤§è®ŠåŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç•™æ„&lt;strong&gt;é€æ¼¸çš„é€²æ­¥&lt;/strong&gt;ï¼šæ¯å¹´é€²æ­¥ä¸€é»é»ï¼Œå¹¾åå¹´å¾Œå°±æ˜¯å·¨å¤§çš„æ”¹è®Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ–°ä½ çš„çŸ¥è­˜ï¼šæœ‰äº›çŸ¥è­˜è½‰çœ¼éæ™‚ï¼Œç§‘æŠ€ã€åœ‹å®¶ã€ç¤¾æœƒã€æ–‡åŒ–å’Œå®—æ•™æ™‚æ™‚åœ¨è®Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·ŸçˆºçˆºèŠä¸€èŠï¼šå¦‚æœä½ æƒ³è¤‡ç¿’åƒ¹å€¼è§€ç¢ºå·²æ”¹è®Šé€™ä»¶äº‹ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ä½ ç¥–çˆ¶æ¯çš„&lt;strong&gt;åƒ¹å€¼è§€&lt;/strong&gt;å’Œä½ æ˜¯å¤šéº¼è¿¥ç•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è’é›†æ–‡åŒ–æ”¹è®Šçš„ä¾‹å­ï¼šè³ªç–‘ä»Šå¤©çš„æ–‡åŒ–ä¸æœƒè·Ÿæ˜¨å¤©ç›¸åŒï¼Œä¹Ÿä¸æœƒè·Ÿæ˜å¤©ä¸€æ¨£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;8-å–®ä¸€è§€é»ç›´è¦ºåèª¤&#34;&gt;8: å–®ä¸€è§€é»ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰å–®ä¸€è§€é»ç›´è¦ºåèª¤ï¼Œä½ è¦æœ‰æ•´å€‹å·¥å…·ç®±è€Œéä¸€æŠŠæ§Œå­ã€‚æ‡‚å¾—å¯Ÿè¦ºå–®ä¸€è§€é»å¯èƒ½å±€é™è‡ªå·²çš„æƒ³åƒï¼Œç„¶å¾Œæƒ³åˆ°ä¸å¦¨è©¦è‘—å¾è¨±å¤šè§’åº¦ä¾†çœ‹å•é¡Œï¼Œæ–¹èƒ½ç²å¾—æ›´æº–ç¢ºçš„äº†è§£ï¼Œæå‡ºæ›´å¯¦éš›çš„è§£æ–¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æª¢é©—ä½ çš„æƒ³æ³•ï¼š&lt;strong&gt;åˆ¥åªçœ‹æ”¯æŒè‡ªèº«è§€é»çš„æ­£é¢ä½è­‰&lt;/strong&gt;ï¼Œè€Œæ˜¯è«‹ä¸åŒæ„ä½ çš„äººæª¢é©—ä½ çš„æƒ³æ³•ï¼Œä¸¦æ‰¾å‡ºä»–å€‘çš„æ¼æ´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°ˆæ¥­æœ‰å±€é™ï¼šåˆ¥å°å°ˆæ¥­ä»¥å¤–çš„é ˜åŸŸæ’ˆéç•Œï¼š&lt;strong&gt;å°ä¸æ‡‚çš„äº‹ç‰©è¦è™›å¿ƒ&lt;/strong&gt;ã€‚æ­¤å¤–ï¼Œåˆ¥äººçš„å°ˆæ¥­ä¹Ÿæœ‰å±€é™ï¼Œä½ åŒæ¨£å¾—å°å¿ƒç•™æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ§Œå­èˆ‡é‡˜å­ï¼šå¦‚æœä½ æ“…é•·ä½¿ç”¨æŸå€‹å·¥å…·ï¼Œä½ æœƒå¤ªå¸¸æƒ³å»ç”¨å®ƒã€‚å¦‚æœä½ æ·±å…¥äº†è§£äº†æŸå€‹å•é¡Œï¼Œä½ å®¹æ˜“èª‡å¤§é‚£å€‹å•é¡Œæˆ–è§£æ–¹çš„é‡è¦æ€§ã€‚åˆ‡è¨˜ï¼Œæ²’æœ‰å“ªå€‹å·¥å…·è™•è™•é©ç”¨ã€‚å¦‚æœä½ æœ€æ„›çš„é»å­æ˜¯æ§Œå­ï¼Œè¨˜å¾—æ‰¾å…¶ä»–æœ‰èºçµ²èµ·å­ã€æ‰³æ‰‹å’Œæ²å°ºçš„åŒäº‹ï¼Œå°å…¶ä»–é ˜åŸŸçš„æƒ³æ³•&lt;strong&gt;æŠ±æŒé–‹æ”¾æ…‹åº¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çœ‹æ•¸æ“šï¼Œä½†åˆ¥ã€Œåªã€çœ‹æ•¸æ“šï¼šä¸é æ•¸å­—ä¸èƒ½äº†è§£ä¸–ç•Œï¼Œå–®é æ•¸å­—åŒæ¨£ä¸èƒ½ã€‚è¦çœ‹åˆ°&lt;strong&gt;æ•¸å­—èƒŒå¾Œçš„ç¾å¯¦ä¸–ç•Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç•¶å¿ƒç°¡å–®çš„æƒ³æ³•èˆ‡è§£æ³•ï¼šæ­·å²ä¸Šä¸ä¹è¨±å¤šç©ºæƒ³å®¶ï¼Œæ†‘ä¸€å€‹çƒæ‰˜é‚¦é¡˜æ™¯æ›¿ææ€–æƒ¡è¡Œè¾¯è­·ã€‚ä½ è¦æ­¡è¿è¤‡é›œçš„æ€è€ƒï¼Œå°ç…§ä¸åŒçš„æƒ³æ³•ï¼Œå°‹æ±‚æŠ˜è¡·ï¼Œè¦–æƒ…æ³æ±ºå®šæ€æ¨£è§£æ±ºå•é¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;9-æ€ªç½ªå‹ç›´è¦ºåèª¤&#34;&gt;9: æ€ªç½ªå‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰æ€ªç½ªå‹ç›´è¦ºåèª¤ï¼Œä½ è¦å¿ä½å°‹æ‰¾ä»£ç½ªç¾”ç¾Šã€‚æ‡‚å¾—å¯Ÿè¦ºåˆ°è‡ªå·±åœ¨æ€ªç½ªæ–¼ä»–äººï¼Œç„¶å¾Œæƒ³åˆ°å°å€‹äººçš„æŒ‡è²¬ï¼Œå¾€å¾€å°è‡´çœ‹ä¸åˆ°å…¶ä»–å¯èƒ½çš„è§£é‡‹æ–¹å¼ï¼Œä¸”å°é˜²æ­¢å£äº‹é‡æ¼”ä¸¦ç„¡åŠ©ç›Šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°‹æ‰¾åŸå› è€Œéæˆ°çŠ¯&lt;/strong&gt;ï¼šç•¶å£äº‹ç™¼ç”Ÿï¼Œåˆ¥æ‰¾ç‰¹å®šçš„å€‹äººæˆ–ç¾¤é«”ä¾†æ€ªç½ªï¼Œè€Œæ˜¯æƒ³åˆ°é€™èƒŒå¾Œå¯èƒ½ä¸æ˜¯æœ‰èª°æ•…æ„ç‚ºä¹‹ï¼Œè½‰ç‚ºæŠŠç²¾åŠ›æ”¾åœ¨é‡æ¸…ç’°ç’°ç›¸æ‰£çš„å„å€‹åŸå› æˆ–æ•´å€‹ç³»çµ±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°‹æ‰¾é«”åˆ¶è€Œéè‹±é›„&lt;/strong&gt;ï¼šç•¶æœ‰äººè‡ªç¨±ä¿ƒæˆæŸä»¶å¥½äº‹ï¼Œä½ è¦æƒ³ä¸€æƒ³æ˜¯å¦å³ä½¿æ²’æœ‰ç‰¹å®šçš„èª°åšäº›ä»€éº¼ï¼Œé€™ä»¶äº‹ä»æœƒç™¼ç”Ÿã€‚ä½ è¦çµ¦æ•´å€‹é«”åˆ¶ä¸€é»æŒè²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;10-æ€¥è¿«å‹ç›´è¦ºåèª¤&#34;&gt;10: æ€¥è¿«å‹ç›´è¦ºåèª¤&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‚ºäº†æ‰­è½‰æ€¥è¿«å‹ç›´è¦ºåèª¤ï¼Œä½ è¦å°æ­¥å‰è¡Œã€‚æ‡‚å¾—å¯Ÿè¦ºæŸå€‹æ±ºå®šçœ‹ä¼¼æ€¥è¿«ï¼Œç„¶å¾Œæ„è­˜åˆ°å…¶å¯¦çµ•å°‘çœŸæ˜¯é€™éº¼ç·Šæ€¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ·±å‘¼å¸ï¼šç•¶æ€¥è¿«å‹ç›´è¦ºåæ‡‰å‡ºç¾ï¼Œå…¶ä»–ç›´è¦ºä¹Ÿæœƒè·Ÿé€²ï¼Œåˆ†æèƒ½åŠ›å½¢åŒé—œæ©Ÿã€‚é€™æ™‚ä½ å¾—å°‹æ±‚æ›´å¤šæ™‚é–“å’Œè³‡è¨Šã€‚&lt;strong&gt;äº‹æƒ…å¾ˆå°‘æ˜¯ç¾åœ¨å†ä¸åšå°±æ²’æ©Ÿæœƒäº†ï¼Œä¹Ÿå¾ˆå°‘æ˜¯éå¾—äºŒæ“‡ä¸€ä¸å¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å …å®ˆæ•¸æ“š&lt;/strong&gt;ï¼šå¦‚æœæŸä»¶äº‹é¡¯å¾—æ€¥è¿«èˆ‡é‡è¦ï¼Œå‰‡è©²ç¶“éè¡¡é‡ã€‚æœ‰äº›æ•¸æ“šç›¸é—œä½†éŒ¯èª¤ï¼Œæœ‰äº›æ•¸æ“šæ­£ç¢ºä½†ç„¡é—œï¼Œä½ å¾—ç•™å¿ƒåˆ†è¾¨ã€‚åªæœ‰ç›¸é—œä¸”æ­£ç¢ºçš„æ•¸æ“šæ‰æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç•¶å¿ƒç®—å‘½ä»™ï¼šä»»ä½•å°æœªä¾†çš„é æ¸¬éƒ½ä¸æ˜¯éµå£ç›´æ–·ï¼Œè€Œæ˜¯æœ‰ä¸ç¢ºå®šæ€§ã€‚å¦‚æœèª°ä¸æ‰¿èªé€™ä¸€é»ï¼Œä½ å¾—æé˜²ç•¶å¿ƒã€‚æ­¤å¤–ï¼Œä½ å¾—è¦æ±‚å°æ–¹æä¾›æ‰€æœ‰é æ¸¬æƒ…æ³ï¼Œä¸åªæ˜¯æœ€å£æˆ–æœ€å¥½çš„æƒ…æ³ï¼Œä¸¦è©¢å•é€™é¡é æ¸¬åœ¨å…ˆå‰çš„æº–ç¢ºåº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç•¶å¿ƒæ¿€é€²è¡Œå‹•ï¼šä½ è¦å•æœ‰ä»€éº¼å‰¯ä½œç”¨ï¼Œ&lt;strong&gt;å•é€™æƒ³æ³•ç¶“éå“ªäº›æª¢é©—&lt;/strong&gt;ã€‚é›–ç„¶é€æ­¥çš„å¯¦éš›æå‡åŠ æˆæ•ˆè©•ä¼°çœ‹ä¼¼ä¸å¤ å¤§åˆ€é—Šæ–§ï¼Œå»é€šå¸¸æ›´ç‚ºæœ‰æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;figure&gt;&lt;img src=&#34;./img/image-20210225211425321.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;æ±‚çœŸç¿’æ…£çš„å®ˆå‰‡&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;https://www.dollarstreet.org&#34;&gt;Dollar Street: See how people really live&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ğŸ Missing Cookie in iframe</title>
      <link>https://blog.lofibean.cc/posts/missing-cookie-in-iframe/</link>
      <pubDate>Tue, 16 Feb 2021 19:08:15 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/missing-cookie-in-iframe/</guid>
      
        <description>&lt;img src=&#34;https://images.unsplash.com/photo-1596872907520-07fa00b9aa68?ixid=MXwxMjA3fDB8MHxzZWFyY2h8NTZ8fGNvb2tpZXxlbnwwfHwwfA%3D%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=720&amp;q=80&#34; /&gt;&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#-problem&#34;&gt;ğŸ˜¨ Problem&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#its-emptydocumentcookie&#34;&gt;It&amp;rsquo;s empty:Â &lt;code&gt;Document.cookie&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#the-cookie-policy&#34;&gt;The cookie policy&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#samesite&#34;&gt;&lt;code&gt;SameSite&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#secure-and-httponly&#34;&gt;&lt;code&gt;Secure&lt;/code&gt; and Â &lt;code&gt;HttpOnly&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-solution-enforcing-cookie-responses-on-iis&#34;&gt;ğŸ˜€ Solution: Enforcing cookie responses on IIS&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#advanced-change-the-config-file-directly&#34;&gt;Advanced: change the config file directly&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#easy-add-an-outbound-rule-in-iis-manager&#34;&gt;Easy: Add an outbound rule in IIS Manager&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-conslusion&#34;&gt;ğŸ¯ Conslusion&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;-problem&#34;&gt;ğŸ˜¨ Problem&lt;/h2&gt;
&lt;p&gt;There is a internal web application which showing an article from another website in an &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;. In order to read the full article the user has to login to the website (i.e. a special Form cookie is required.)&lt;/p&gt;
&lt;p&gt;A user reported:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I login to the website in a separated browser tab. I can read the full article. However, when I browing the same item in the internal web app, it requires me to login and I am failed to login (in that &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I cannot reproduce this using my browser (Firefox v85). This issue happens on Chrome v88.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;img/image-20210216190506550.png&#34; alt=&#34;image-20210216190506550&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;its-emptydocumentcookie&#34;&gt;It&amp;rsquo;s empty:Â &lt;code&gt;Document.cookie&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;I suspect this is something related to my cookie. I check the cookie using &lt;code&gt;document.cookie&lt;/code&gt; in Dev tool&amp;rsquo;s console. It&amp;rsquo;s empty when I load the website inside the &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;However, &lt;code&gt;document.cookie&lt;/code&gt; should contain something after I login to the website, right?&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bugs.chromium.org/p/chromium/issues/detail?id=1062162&#34;&gt;Here&lt;/a&gt; and &lt;a href=&#34;https://support.google.com/chrome/thread/33543699?hl=en&#34;&gt;here&lt;/a&gt; show the exact same issue reported by other chromium user. Turns out it&amp;rsquo;s about the &lt;strong&gt;updated cookie policy in Chrome&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;the-cookie-policy&#34;&gt;The cookie policy&lt;/h2&gt;
&lt;p&gt;I inspected the cookie of the website: it&amp;rsquo;s just a cookie with &lt;code&gt;HttpOnly&lt;/code&gt; attribute and othing else. So, something else is missing in the cookie response, right?&lt;/p&gt;
&lt;h3 id=&#34;samesite&#34;&gt;&lt;code&gt;SameSite&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;The modern browsers (e.g. latest Chrome and coming versions of Firefox)  require the developer to define an explicit &lt;code&gt;SameSite&lt;/code&gt; policy.  You can see &lt;a href=&#34;https://web.dev/samesite-cookies-explained/&#34;&gt;SameSite cookies explained&lt;/a&gt; for details and choose the suiteable value.&lt;/p&gt;
&lt;h3 id=&#34;secure-and-httponly&#34;&gt;&lt;code&gt;Secure&lt;/code&gt; and Â &lt;code&gt;HttpOnly&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;The cookie has to be served via &lt;code&gt;HTTPS&lt;/code&gt;. Hence, those attributes are also required.&lt;/p&gt;
&lt;p&gt;I found that &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie&#34;&gt;Set-Cookie - HTTP | MDN&lt;/a&gt; is a good documentation for you to check all the available attributes related to the &lt;code&gt;Set-Cookie&lt;/code&gt;HTTP response header.&lt;/p&gt;
&lt;p&gt;I know what might be missing now but how can I fix it? The websites are running on &lt;strong&gt;IIS&lt;/strong&gt; and there are &lt;strong&gt;multiple sites&lt;/strong&gt; has the same cookie problem. A quick fix is required and &lt;strong&gt;better don&amp;rsquo;t alter the code&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;-solution-enforcing-cookie-responses-on-iis&#34;&gt;ğŸ˜€ Solution: Enforcing cookie responses on IIS&lt;/h2&gt;
&lt;h3 id=&#34;advanced-change-the-config-file-directly&#34;&gt;Advanced: change the config file directly&lt;/h3&gt;
&lt;p&gt;If you feel confident to modify the server config directly, open this file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-batch&#34; data-lang=&#34;batch&#34;&gt;%windir%\System32\inetsrv\config\applicationHost.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s a XML file containing the server-level configs.&lt;/p&gt;
&lt;p&gt;Find the &lt;outboundRules&gt; section under &lt;code&gt;system.webServer &amp;gt; rewrite&lt;/code&gt; If no, create one:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;system.webServer&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;rewrite&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;outboundRules&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;rule&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;name=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;AddCookiePolicy&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;match&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;serverVariable=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RESPONSE_Set-Cookie&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^(.*)(AUTH)(=.*)$&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;action&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;type=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Rewrite&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;value=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{R:0};SameSite=None;Secure;HttpOnly&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/rule&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/outboundRules&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/rewrite&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/system.webServer&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;You need to change the regex of the &lt;code&gt;pattern&lt;/code&gt; attribute. I use &lt;code&gt;^(.*)(AUTH)(=.*)$&lt;/code&gt; because there are multiple websites and all the auth cookie names are ended with &lt;code&gt;AUTH&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Make sure that your regex should have a matching group so that you can make use of it in the &lt;code&gt;action&lt;/code&gt; section (i.e. the &lt;code&gt;{R:0}&lt;/code&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Save the file and it&amp;rsquo;s done.&lt;/p&gt;
&lt;h4 id=&#34;verify-the-config&#34;&gt;Verify the config&lt;/h4&gt;
&lt;p&gt;Launch the &lt;strong&gt;IIS manager&lt;/strong&gt; and choose the &lt;strong&gt;Configuration Editor&lt;/strong&gt; on the Server level (not website level). Check the configuration collection under &lt;code&gt;system.webServer/rewrite/outboundRules&lt;/code&gt; . You should see the config named &lt;code&gt;AddCookiePolicy&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;easy-add-an-outbound-rule-in-iis-manager&#34;&gt;Easy: Add an outbound rule in IIS Manager&lt;/h3&gt;
&lt;p&gt;If you want to be safe, launch the &lt;strong&gt;IIS Manager&lt;/strong&gt; and set the rule.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Select the &lt;strong&gt;URL Rewrite&lt;/strong&gt; option at the &lt;strong&gt;Server&lt;/strong&gt; level:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/2039ae6d172ddeba53124f671a3b73eb5ffe8c3c.jpg&#34; alt=&#34;URL Rewrite&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Choose &lt;strong&gt;Blank rule&lt;/strong&gt; under &lt;strong&gt;Outbound rules&lt;/strong&gt; section. Click &lt;strong&gt;OK&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/93bc4349fa2deb106e44399add0e3f87232f690e.jpg&#34; alt=&#34;Blank rule&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Set the matching criteria:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Matching scope: &lt;strong&gt;Server Variable&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Variable name: &lt;code&gt;RESPONSE_Set-Cookie&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Variable value: &lt;strong&gt;Matches the Pattern&lt;/strong&gt; using &lt;strong&gt;Regular Expressions&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pattern: &lt;code&gt;^(.*)(AUTH)(=.*)$&amp;quot; /&amp;gt;&lt;/code&gt;. You should change this regex in order to match your use case.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ignore case&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/fd001a4e74cd55507e2faf063f26f34f770daf61.jpg&#34; alt=&#34;Matching Criteria&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Set the &lt;strong&gt;Action&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Value: &lt;code&gt;{R:0};Secure;SameSite=None;HttpOnly&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Replace existing server variable value&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/97bd46b9980b6de3927f8a2b0f2b528b900a00ce.jpg&#34; alt=&#34;Action&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Click &lt;strong&gt;Apply&lt;/strong&gt; to enable the rule.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Done.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;After I set this outbound rewrite rule for the cookies, I can see the full article loaded inside the &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;. Problem solved.&lt;/p&gt;
&lt;h2 id=&#34;-conslusion&#34;&gt;ğŸ¯ Conslusion&lt;/h2&gt;
&lt;p&gt;When you dealing with cookies in modern browsers, set the &lt;strong&gt;correct cookie response attributes&lt;/strong&gt; including an explicit &lt;code&gt;SameSite&lt;/code&gt; policy, a &lt;code&gt;HttpOnly&lt;/code&gt; and &lt;code&gt;Secure&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Set-Cookie: {name}={value}; SameSite=None;HttpOnly;Secure
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;In order to add those attributes in a &lt;strong&gt;.NET Framework web app running on IIS&lt;/strong&gt;, you can simply define an &lt;strong&gt;outbound rule&lt;/strong&gt; rewrite rule on the server level of the &lt;strong&gt;IIS Manager&lt;/strong&gt;.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ğŸ Fixing AjaxControlTookit Unexpected Page Reload in ASP.NET Web Form Application</title>
      <link>https://blog.lofibean.cc/posts/fixing-ajaxcontroltoolkit-unexpected-page-reload-in-aspnet-webform-application/</link>
      <pubDate>Fri, 12 Feb 2021 12:44:24 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/fixing-ajaxcontroltoolkit-unexpected-page-reload-in-aspnet-webform-application/</guid>
      
        <description>&lt;img src=&#34;https://blog.lofibean.cc/posts/fixing-ajaxcontroltoolkit-unexpected-page-reload-in-aspnet-webform-application/thumbnail.jpg&#34; /&gt;&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#-problem&#34;&gt;ğŸ˜¨ Problem&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#expected-vs-actual-behavior&#34;&gt;Expected vs Actual Behavior&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#expected&#34;&gt;Expected&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#actual&#34;&gt;Actual&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-solution-part-1-updating-ajaxcontroltoolkit&#34;&gt;ğŸ˜€ Solution (Part 1): Updating &lt;code&gt;AjaxControlToolkit&lt;/code&gt;&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#nuget-package-update&#34;&gt;Nuget Package Update&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#some-breaking-changes&#34;&gt;Some Breaking Changes&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#different-__dopostback-in-firefox&#34;&gt;Different &lt;code&gt;__doPostBack()&lt;/code&gt; in Firefox?&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-solution-part-2-adding--aspasyncpostbacktrigger&#34;&gt;ğŸ˜€ Solution (Part 2): Adding  &lt;code&gt;&amp;lt;asp:AsyncPostBackTrigger&amp;gt;&lt;/code&gt;&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#the-working-code-snippet&#34;&gt;The Working Code Snippet&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#summary&#34;&gt;Summary&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;-problem&#34;&gt;ğŸ˜¨ Problem&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;TL;DR: see &lt;a href=&#34;#summary&#34;&gt;Summary&lt;/a&gt; and &lt;a href=&#34;#the-working-code-snippet&#34;&gt;the working code snippet&lt;/a&gt; if you want to try it right away.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In my company there is an old Web Form Website running .NET Framework 3.5. I migrated it to an ASP.NET Web Form Application running .NET Framework 4.7.2 few months ago. The website is running just like the old one but recently a user reported that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;a &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt; list which should triggers an AJAX call and refresh part of the page does not work. Instead, the page is reloaded everytime when the item in the &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt; list is changed.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I used almost a day to figure out what&amp;rsquo;s (probably) happened and I hope that this article will be helpful to someone in the future who (still) encounter this problem.&lt;/p&gt;
&lt;h2 id=&#34;expected-vs-actual-behavior&#34;&gt;Expected vs Actual Behavior&lt;/h2&gt;
&lt;p&gt;There is a &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt; containing a &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt; list (generated by &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.dropdownlist?view=netframework-4.8&#34;&gt; &lt;code&gt;&amp;lt;asp:DropDownList&amp;gt;&lt;/code&gt;&lt;/a&gt;). When the selected option is changed, an AJAX call will be fired and new items will be fetched. Besides, there is a text area for user to input remarks. A submit button will submit the form.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;img/image-20210212150215986.png&#34; alt=&#34;image-20210212150215986&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;expected&#34;&gt;Expected&lt;/h3&gt;
&lt;p&gt;The page will not be reloaded when the selected option is changed. The content in the text area retains.&lt;/p&gt;
&lt;h3 id=&#34;actual&#34;&gt;Actual&lt;/h3&gt;
&lt;p&gt;Once the selected option is changed, a form POST is fired (instead of an AJAX call). The content in the text area is therefore being cleaned.&lt;/p&gt;
&lt;p&gt;This is related to AJAX calls so the first thing I checked was how the AJAX call was initiated.&lt;/p&gt;
&lt;h2 id=&#34;-solution-part-1-updating-ajaxcontroltoolkit&#34;&gt;ğŸ˜€ Solution (Part 1): Updating &lt;code&gt;AjaxControlToolkit&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;In the &lt;code&gt;.aspx&lt;/code&gt; file I saw a &lt;code&gt;&amp;lt;asp:UpdatePanel&amp;gt;&lt;/code&gt; and a &lt;code&gt;&amp;lt;asp:DropDownList&amp;gt;&lt;/code&gt;. This is the simplified structure of that part:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:UpdatePanel&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runat=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UpdatePanel2&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UpdateMode=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Conditional&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ChildrenAsTriggers=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;ContentTemplate&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:DropDownList&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runat=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AutoPostBack=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OnSelectedIndexChanged=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes_OnSelectedIndexChanged&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/ContentTemplate&amp;gt;&lt;/span&gt;            
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/asp:UpdatePanel&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;AutoPostBack&lt;/code&gt; is there so the app should use &lt;code&gt;AjaxControlToolkit&lt;/code&gt; to make AJAX calls (I guess that&amp;rsquo;s the standard right?).&lt;/p&gt;
&lt;h3 id=&#34;nuget-package-update&#34;&gt;Nuget Package Update&lt;/h3&gt;
&lt;p&gt;I checked the &lt;code&gt;package.config&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;AjaxControlToolkit&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4.1.50508&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;targetFramework=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net35&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Looks like the &lt;code&gt;targetFramework&lt;/code&gt; is not right. Maybe it&amp;rsquo;s time to update the package too.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;AjaxControlToolkit&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;20.1.0&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;targetFramework=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net472&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;some-breaking-changes&#34;&gt;Some Breaking Changes&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/DevExpress/AjaxControlToolkit&#34;&gt;AjaxControlToolkit&lt;/a&gt; has some breaking changes since version 15+. In short, you need to:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Uninstall the old version and install the new version of &lt;a href=&#34;https://www.nuget.org/packages/AjaxControlToolkit&#34;&gt;&lt;code&gt;AjaxControlToolkit&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Change &lt;code&gt;&amp;lt;asp:ToolkitScriptManager&amp;gt;&lt;/code&gt; to &lt;code&gt;&amp;lt;asp:ScriptManager&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Remove some unused configs in &lt;code&gt;web.config&lt;/code&gt; (see &lt;a href=&#34;https://github.com/DevExpress/AjaxControlToolkit/wiki/Upgrading-from-v7.x-and-below#3---clean-up-webconfig&#34;&gt;this&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;[Optional] Install &lt;a href=&#34;https://www.nuget.org/packages/AjaxControlToolkit.HtmlEditor.Sanitizer/&#34;&gt;&lt;code&gt;AjaxControlToolkit.HtmlEditor.Sanitizer&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Change the namespace &lt;code&gt;AjaxControlToolkit.HTMLEditor&lt;/code&gt; to &lt;code&gt;AjaxControlToolkit.HtmlEditor&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Change the namespace &lt;code&gt;AjaxControlToolkit.HTMLEditor.ToolbarButton&lt;/code&gt; to &lt;code&gt;AjaxControlToolkit.HtmlEditor.ToolbarButtons&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You may also read&lt;a href=&#34;https://github.com/DevExpress/AjaxControlToolkit/wiki/Upgrading-from-v7.x-and-below#3---clean-up-webconfig&#34;&gt; the official complete migration guide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After I upgrade the Nuget package, the AJAX calls was working partially: It only works on Chromium-base browsers like Chrome and Edge. However, &lt;strong&gt;it does not work on Firefox (85.0) and Safari (14.0.1)&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;ğŸ˜ ğŸ˜ ğŸ˜&lt;/p&gt;
&lt;h3 id=&#34;different-__dopostback-in-firefox&#34;&gt;Different &lt;code&gt;__doPostBack()&lt;/code&gt; in Firefox?&lt;/h3&gt;
&lt;p&gt;This is what I got from Firefox&amp;rsquo;s dev tool:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;img/image-20210212140706748.png&#34; alt=&#34;call stack form Firefox image-20210212140706748&#34;&gt;&lt;/p&gt;
&lt;p&gt;The initiator is from &lt;code&gt;__doPostBack()&lt;/code&gt; in the &lt;code&gt;.aspx&lt;/code&gt; page. In Chrome, it&amp;rsquo;s from &lt;code&gt;ScriptResource.axd&lt;/code&gt;. Below is the expected call stack: the call is an XHR request fired from &lt;code&gt;ScriptResource.axd&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;img/image-20210212141300293.png&#34; alt=&#34;Expected call stack image-20210212141300293&#34;&gt;&lt;/p&gt;
&lt;p&gt;Looks like the stack items from bottom to &lt;code&gt;_doPostBack()&lt;/code&gt; are the same.  I therefore dug into &lt;code&gt;_doPostBack()&lt;/code&gt; and eventually found this piece of code in &lt;code&gt;ScriptResource.axd&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;_postBackSettings&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt;) {            
    &lt;span style=&#34;color:#a6e22e&#34;&gt;form&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;onsubmit&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;_onsubmit&lt;/span&gt;;            
    &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;_originalDoPostBack&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;eventTarget&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;eventArgument&lt;/span&gt;);            
    &lt;span style=&#34;color:#a6e22e&#34;&gt;form&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;onsubmit&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;            
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;;        
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;if &lt;code&gt;this._postBackSettings.async&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;, &lt;code&gt;_originaldoPostBack()&lt;/code&gt; will be called and that is the &lt;code&gt;__doPostBack()&lt;/code&gt; function defined in the &lt;code&gt;.aspx&lt;/code&gt; page. &lt;strong&gt;This will trigger a page reload instead of an AJAX call&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Furthermore, I found that the &lt;code&gt;asyncTarget&lt;/code&gt; in &lt;code&gt;_postBackSettings &lt;/code&gt; is &lt;code&gt;null&lt;/code&gt; but in Chrome that target is the &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt; list.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In Firefox (v85.0) the javascript event initiated is somehow keep propagating to a higher level than the &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt; list (probably to the form&amp;rsquo;s level) and therefore being treated as a form POST instead of an AJAX call.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;-solution-part-2-adding--aspasyncpostbacktrigger&#34;&gt;ğŸ˜€ Solution (Part 2): Adding  &lt;code&gt;&amp;lt;asp:AsyncPostBackTrigger&amp;gt;&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;I did some research related to the Firefox-specific page reload and seems none of them were talking about the issue I met. I tried to study the fundamentals of this &lt;strong&gt;PostBack&lt;/strong&gt; behaviour.&lt;/p&gt;
&lt;p&gt;Finally I got this article &lt;a href=&#34;https://www.aspsnippets.com/Articles/Avoid-Prevent-Page-refresh-PostBack-after-SelectedIndexChanged-is-fired-in-ASPNet-DropDownList.aspx&#34;&gt;&lt;strong&gt;Avoid (Prevent) Page refresh (PostBack) after SelectedIndexChanged is fired in ASP.Net DropDownList&lt;/strong&gt;&lt;/a&gt;. It suggested what I might missing is an &lt;code&gt;asp:AsyncPostBackTrigger&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Also, &lt;a href=&#34;https://stackoverflow.com/questions/728043/how-to-stop-updatepanel-from-causing-whole-page-postback/728061#728061&#34;&gt;this StackOverflow answer&lt;/a&gt; menitoned the &lt;code&gt;asp:AsyncPostBackTrigger&lt;/code&gt; thing.&lt;/p&gt;
&lt;p&gt;So my understanding is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When using the &lt;code&gt;ScriptManager&lt;/code&gt; (i.e. the one we introduced when updating the &lt;code&gt;AjaxControlToolkit&lt;/code&gt;), we need to define an &lt;code&gt;asp:AsyncPostBackTrigger&lt;/code&gt; &lt;code&gt;Trigger&lt;/code&gt; in order to make the call AJAX.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore, I added a &lt;code&gt;Trigger&lt;/code&gt; section to the &lt;code&gt;.aspx&lt;/code&gt; file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Triggers&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:AsyncPostBackTrigger&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControlID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EventName=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SelectedIndexChanged&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/Triggers&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This &lt;code&gt;Trigger&lt;/code&gt; section should be placed under the same &lt;code&gt;&amp;lt;asp:UpdatePanel&amp;gt;&lt;/code&gt; with the &lt;code&gt;&amp;lt;asp:DropDownList&amp;gt;&lt;/code&gt;. Here is the complete snippet:&lt;/p&gt;
&lt;h3 id=&#34;the-working-code-snippet&#34;&gt;The Working Code Snippet&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:UpdatePanel&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runat=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UpdatePanel2&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UpdateMode=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Conditional&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ChildrenAsTriggers=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;ContentTemplate&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:DropDownList&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runat=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AutoPostBack=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OnSelectedIndexChanged=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes_OnSelectedIndexChanged&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/ContentTemplate&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Triggers&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;asp:AsyncPostBackTrigger&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControlID=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ddItemTypes&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;EventName=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SelectedIndexChanged&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/Triggers&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/asp:UpdatePanel&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;EventName&lt;/code&gt; is optional here but since I just want this trigger to listen the &lt;code&gt;SelectedIndexChanged&lt;/code&gt; event, I add them all.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;ControlID&lt;/code&gt; has to be an exact match with the &lt;code&gt;ID&lt;/code&gt; of &lt;code&gt;&amp;lt;asp:DropDownList&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;After I added the &lt;code&gt;&amp;lt;asp:AsyncPostBackTrigger&amp;gt;&lt;/code&gt;, all the browsers including Chrome, Edge, Firefox (85.0) and Safari (14.0.1) are working.&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;When your .NET 4.5+ ASP.NET Web Form Application using &lt;code&gt;AjaxControlToolkit&lt;/code&gt; does not work as expected and cause the controls like &lt;code&gt;&amp;lt;asp:DropDownList&amp;gt;&lt;/code&gt; cannot fire an AJAX call (but triggers a form POST), make sure that:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;AjaxControlToolkit&lt;/code&gt; Nuget package is up to date (and did the proper migration steps &lt;a href=&#34;https://github.com/DevExpress/AjaxControlToolkit/wiki/Upgrading-from-v7.x-and-below#3---clean-up-webconfig&#34;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;&amp;lt;asp:UpdatePanel&amp;gt;&lt;/code&gt; section should contain a &lt;code&gt;&amp;lt;Triggers&amp;gt;&lt;/code&gt; section. In that section there is an &lt;code&gt;&amp;lt;asp:AsyncPostBackTrigger&amp;gt;&lt;/code&gt; with &lt;code&gt;ControlID&lt;/code&gt; same as the &lt;code&gt;ID&lt;/code&gt; of your control (which is also placed under the same UpdatePanel section).&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
      
    </item>
    
    <item>
      <title>Improving My Blogging Workflow</title>
      <link>https://blog.lofibean.cc/posts/improving-my-blogging-workflow/</link>
      <pubDate>Fri, 05 Feb 2021 21:33:03 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/improving-my-blogging-workflow/</guid>
      
        <description>&lt;img src=&#34;https://images.unsplash.com/photo-1578861377460-c4536383d637?ixlib=rb-1.2.1&amp;ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;auto=format&amp;fit=crop&amp;w=1280&amp;h=630&amp;q=80&#34; /&gt;&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#overview&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#using-page-bundle-to-group-resouces&#34;&gt;Using Page Bundle to Group resouces&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#insert-an-image&#34;&gt;Insert an Image&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#cover-image&#34;&gt;Cover Image&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#bonus-git-repository&#34;&gt;Bonus: Git Repository&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#script-to-start-a-new-post&#34;&gt;Script to start a new post&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#insert-images-to-typora&#34;&gt;Insert Images to Typora&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#shell-script-to-launch-everything&#34;&gt;Shell Script to launch everything&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;p&gt;I set up this hugo blog and hosted it on GitHub page. At first, I just want to make it work: &lt;strong&gt;showing some text and images&lt;/strong&gt;. However, I realized that:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;placing the &lt;strong&gt;images and posts place under different directories&lt;/strong&gt; will make this blog become unmanagable.&lt;/li&gt;
&lt;li&gt;I cannot see the images while writing a post because of (1). I have to switch to my browser when I want to see if the image has been inserted correctly.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;launching the markdown editor and start hugo&lt;/strong&gt; after creating a new file will be a very good idea.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Therefore I use some time to re-organize the image and posts and created a script to help me to start writing a new post.&lt;/p&gt;
&lt;h2 id=&#34;using-page-bundle-to-group-resouces&#34;&gt;Using Page Bundle to Group resouces&lt;/h2&gt;
&lt;p&gt;After reading the Hugo&amp;rsquo;s documentation I think the &lt;a href=&#34;https://gohugo.io/content-management/organization/#page-bundles&#34;&gt;page-bundles&lt;/a&gt; feature is what I need. For each post with images, I will create a &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/&#34;&gt;Leaf Bundle&lt;/a&gt; like the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;my-blog-post
â”œâ”€â”€ img
â”‚   â”œâ”€â”€ image-1.png
â”‚   â”œâ”€â”€ image-2.png
â”‚   â””â”€â”€ image-n.png
â”œâ”€â”€ index.md
â””â”€â”€ thumbnail.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;insert-an-image&#34;&gt;Insert an Image&lt;/h3&gt;
&lt;p&gt;For example, the blog post will have a relative url &lt;code&gt;/posts/my-blog-post/&lt;/code&gt;. When I using a markdown editor to write the post, I can place all the images under &lt;code&gt;/img&lt;/code&gt; and use the relative url:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;I can insert an image like this: ![&lt;span style=&#34;color:#f92672&#34;&gt;image-alt&lt;/span&gt;](&lt;span style=&#34;color:#a6e22e&#34;&gt;./img/image-2.png&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;By doing so, I can see the image right away and I don&amp;rsquo;t need to do special handling when generating the blog post using Hugo.&lt;/p&gt;
&lt;h3 id=&#34;cover-image&#34;&gt;Cover Image&lt;/h3&gt;
&lt;p&gt;Since the cover image will be placed in the front matter and can be seen in browser only, I place it under the same directory with the blog post (i.e. &lt;code&gt;index.md&lt;/code&gt;). In the blog post:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;---
&lt;span style=&#34;color:#f92672&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;My Blog Post&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;cover_image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/posts/my-blog-post/thumbnail.jpg&lt;/span&gt;
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I will make use of the value in thumbnail and combine with the site root to generate an absolute url. The absolute url can then be used in meta data like &lt;code&gt;og:image&lt;/code&gt;. Good for SEO.&lt;/p&gt;
&lt;h3 id=&#34;bonus-git-repository&#34;&gt;Bonus: Git Repository&lt;/h3&gt;
&lt;p&gt;I know this is weird but I split my GitHub page into 2 repositories: the main repo, and a submodule contains all my raw markdown files of my blog posts. I think that will be more organized and I can get all the text files only. Placing the image out of the &lt;code&gt;posts/&lt;/code&gt; folder is kinda breaking this purpose.&lt;/p&gt;
&lt;p&gt;Once I grouped the image with the markdown files, I can finally keep my content organized again! In short, I created a problem and then solved it ğŸ˜…&lt;/p&gt;
&lt;h2 id=&#34;script-to-start-a-new-post&#34;&gt;Script to start a new post&lt;/h2&gt;
&lt;p&gt;I love to use &lt;a href=&#34;https://typora.io/&#34;&gt;Typora&lt;/a&gt; to write my posts. However, it&amp;rsquo;s vary painful to manage the images. If I pasting an image to Typora it will store my image into somewhere out of the git repository. Moving the images back to the repository and changing the image pathes is purly a waste of time.&lt;/p&gt;
&lt;h3 id=&#34;insert-images-to-typora&#34;&gt;Insert Images to Typora&lt;/h3&gt;
&lt;p&gt;Luckily, the image issue is solved once I group the post and image under the same folder. What I have to do is change the image setting in Typora:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20210205221146175.png&#34; alt=&#34;image-20210205221146175&#34;&gt;&lt;/p&gt;
&lt;p&gt;Choose &lt;strong&gt;Copy image to custom folder&lt;/strong&gt; and set the value as &lt;code&gt;./img&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;shell-script-to-launch-everything&#34;&gt;Shell Script to launch everything&lt;/h3&gt;
&lt;p&gt;My current workflow to start a new post:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;launch Terminal and go to the blog post&amp;rsquo;s repo.&lt;/li&gt;
&lt;li&gt;create a new markdown file.&lt;/li&gt;
&lt;li&gt;launch Typora.&lt;/li&gt;
&lt;li&gt;launch Hugo to see the result.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I automated the above steps using the following script:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-zsh&#34; data-lang=&#34;zsh&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/zsh
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;read -p &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Create a new buldled post (e.g. hello-world): &amp;#34;&lt;/span&gt;  filename

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; -z &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$filename&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
   echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Filename cannot be empty. Try again.&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;
    cd ./blog
    echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;   1. Creating new post...    &amp;#34;&lt;/span&gt;
    hugo new posts/&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;filename&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;/index.md

    echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;   2. Launching Typora...     &amp;#34;&lt;/span&gt;
    open -a Typora ./content/posts/&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;filename&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;/index.md &amp;amp;

    echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;   3. Launching browser...    &amp;#34;&lt;/span&gt;
    open http://localhost:1313/posts/&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;filename&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;

    echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;   4. Starting dev server...  &amp;#34;&lt;/span&gt;
    hugo serve -D
&lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To launch an app from Terminal, you can do this:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;open -a Typora &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Remember to have a &lt;code&gt;&amp;amp;&lt;/code&gt; at the end. Otherwise the application will be closed once you close the Terminal!&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>â˜•ï¸ Notes on City &amp; Guilds International Barista Exam</title>
      <link>https://blog.lofibean.cc/posts/notes-on-city-n-guilds-barista-exam/</link>
      <pubDate>Thu, 31 Dec 2020 20:58:21 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/notes-on-city-n-guilds-barista-exam/</guid>
      
        <description>&lt;img src=&#34;https://images.unsplash.com/photo-1562771335-b1fe8b4ea78f?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1000&amp;q=80&#34; /&gt;&lt;h2 id=&#34;the-exam&#34;&gt;The Exam&lt;/h2&gt;
&lt;p&gt;I passed the &lt;a href=&#34;https://www.cityandguilds.com/qualifications-and-apprenticeships/hospitality-and-catering/hospitality-and-catering/7102-barista-skills&#34;&gt;&lt;strong&gt;City &amp;amp; Guilds International Barista Skills&lt;/strong&gt;&lt;/a&gt; exam this December and I think that will be a good idea to write down what I&amp;rsquo;ve learnt.&lt;/p&gt;
&lt;h2 id=&#34;the-notebook&#34;&gt;The Notebook&lt;/h2&gt;
&lt;p&gt;As a result, this notebook is created ğŸ‘‰ &lt;a href=&#34;https://coffeelab.lofibean.cc/&#34;&gt;https://coffeelab.lofibean.cc/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;(The notebook is powered by &lt;a href=&#34;https://www.mkdocs.org/&#34;&gt;MkDocs&lt;/a&gt; and you can find out how to create a site like that &lt;a href=&#34;https://blog.lofibean.cc/posts/documentation-makes-easy-with-mkdocs-and-gitlab-pages/&#34;&gt;here&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;Enjoy â˜•ï¸&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Set Up Cloudflare for AWS Route 53 Domains</title>
      <link>https://blog.lofibean.cc/posts/set-up-cloudflare-for-route53-domains/</link>
      <pubDate>Thu, 31 Dec 2020 17:46:38 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/set-up-cloudflare-for-route53-domains/</guid>
      
        <description>&lt;img src=&#34;https://blog.lofibean.cc/posts/set-up-cloudflare-for-route53-domains/thumbnail.jpg&#34; /&gt;&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;This article shows how to configure Cloudflare for an existing website using AWS Route53.&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#overview&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#domain-registrar&#34;&gt;Domain Registrar&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#what-about-aws-route53&#34;&gt;What about AWS Route53?&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#cloudflare-account&#34;&gt;Cloudflare Account&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#add-a-domain&#34;&gt;Add a domain&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#change-your-nameservers&#34;&gt;Change your nameservers&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#verify-nameservers&#34;&gt;Verify nameservers&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#updating-dns-records&#34;&gt;Updating DNS Records&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#application-load-balancers&#34;&gt;(Application) Load Balancers&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#amazon-ses&#34;&gt;Amazon SES&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#summary&#34;&gt;Summary&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;domain-registrar&#34;&gt;Domain Registrar&lt;/h2&gt;
&lt;p&gt;In my opinion, &lt;strong&gt;domain registrar is the most confusing part when you configure Cloudflare&lt;/strong&gt;. To check the details of your domain, use the &lt;a href=&#34;https://lookup.icann.org/lookup&#34;&gt;&lt;strong&gt;Domain Name Registration Data Lookup&lt;/strong&gt;&lt;/a&gt;. Here is the lookup result of &lt;code&gt;gitlab.com&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231180715529.png&#34; alt=&#34;image-20201231180715529&#34;&gt;&lt;/p&gt;
&lt;p&gt;The Registrar Information section contains the information where you should change the nameservers in the next step.&lt;/p&gt;
&lt;h3 id=&#34;what-about-aws-route53&#34;&gt;What about AWS Route53?&lt;/h3&gt;
&lt;p&gt;Route53 can be a domain registrar OR just managing the hosted zone. If you see AWS is the Registrar in this lookup, then you should update the config in AWS Route53.&lt;/p&gt;
&lt;h5 id=&#34;example-1-domain-purchased-from-godaddy&#34;&gt;Example 1: Domain purchased from GoDaddy&lt;/h5&gt;
&lt;p&gt;For example, if you purchased your domain in &lt;strong&gt;GoDaddy&lt;/strong&gt; and having a &lt;strong&gt;hosted zone&lt;/strong&gt; in &lt;strong&gt;AWS Route 53&lt;/strong&gt; (That&amp;rsquo;s my case), &lt;strong&gt;GoDaddy is therefore your domain registrar and you should login GoDaddy&amp;rsquo;s account to change the nameserver, NOT AWS Route 53&lt;/strong&gt;&lt;/p&gt;
&lt;h5 id=&#34;example-2-domain-purchased-from-aws-route-53&#34;&gt;Example 2: Domain purchased from AWS Route 53&lt;/h5&gt;
&lt;p&gt;Unfortunately, You can purchased a domain in AWS Route 53 too. In this case, &lt;strong&gt;AWS Route 53 is your domain registrar&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;You should change the nameservers in &lt;a href=&#34;https://console.aws.amazon.com/route53/&#34;&gt;the Route 53 console&lt;/a&gt; &amp;gt; &lt;strong&gt;Registered Domains&lt;/strong&gt;.&lt;/p&gt;
&lt;h4 id=&#34;what-about-ns-record&#34;&gt;What about NS Record?&lt;/h4&gt;
&lt;p&gt;Changing a &lt;code&gt;NS Record&lt;/code&gt; is not the same as changing a &lt;code&gt;nameserver&lt;/code&gt;. From the article &lt;a href=&#34;https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/&#34;&gt;DNS NS record&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The NS record indicates which DNS server is authoritative.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, a &lt;code&gt;NS Record&lt;/code&gt; is similar to &lt;code&gt;MX Record&lt;/code&gt;, &lt;code&gt;CNAME Record&lt;/code&gt;, &lt;code&gt;A Record&lt;/code&gt;, etc. They are all the items under the domain.&lt;/p&gt;
&lt;p&gt;Nameserver of the domain is at a higher level and it&amp;rsquo;s controled by the domain registrar.&lt;/p&gt;
&lt;h2 id=&#34;cloudflare-account&#34;&gt;Cloudflare Account&lt;/h2&gt;
&lt;h3 id=&#34;add-a-domain&#34;&gt;Add a domain&lt;/h3&gt;
&lt;p&gt;It&amp;rsquo;s free to create a Cloudflare account: &lt;a href=&#34;https://dash.cloudflare.com/sign-up&#34;&gt;https://dash.cloudflare.com/sign-up&lt;/a&gt;. Cloudflare also offer paid plans and I won&amp;rsquo;t discuss them in this article.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231175523687.png&#34; alt=&#34;image-20201231175523687&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231175540349.png&#34; alt=&#34;image-20201231175540349&#34;&gt;&lt;/p&gt;
&lt;p&gt;Choose the free plan and then click &lt;strong&gt;Continue&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;After that, Cloudflare will do a DNS scan for the domain you&amp;rsquo;ve entered. Click &lt;strong&gt;Continue&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Not all the recoreds captured are correct. You will need to add/delete/update some of them later.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;change-your-nameservers&#34;&gt;Change your nameservers&lt;/h3&gt;
&lt;p&gt;The last step of setup is changing the nameservers. You will see the following instruction:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231182416379.png&#34; alt=&#34;image-20201231182416379&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;1-log-in-to-your-registrar-account&#34;&gt;1. Log in to your registrar account&lt;/h4&gt;
&lt;p&gt;In the previous section, you should know which service provider is your domain registrar. Login to your domain registrar and find out the nameserver config. Then, remove the existing nameservers (the entries shown in step 1). For example:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ns1.mydomain.com
ns2.mydomain.com
ns3.mydomain.com
ns4.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;2-replace-with-cloudflares-nameservers&#34;&gt;2. Replace with Cloudflare&amp;rsquo;s nameservers:&lt;/h4&gt;
&lt;p&gt;When all the existing nameservers are removed, you have to add the Cloudflare nameservers in the domain registrar. For example:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;autumn.ns.cloudflare.com
hans.ns.cloudflare.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note: you have to enter the 2 nameservers shown in step 2. Other (Cloudflare) nameservers won&amp;rsquo;t work.&lt;/p&gt;
&lt;h3 id=&#34;verify-nameservers&#34;&gt;Verify nameservers&lt;/h3&gt;
&lt;p&gt;Again, lookup the domain details using  &lt;a href=&#34;https://lookup.icann.org/lookup&#34;&gt;&lt;strong&gt;Domain Name Registration Data Lookup&lt;/strong&gt;&lt;/a&gt;. This time you should check the details in the &lt;strong&gt;Domain Information&lt;/strong&gt; section.&lt;/p&gt;
&lt;p&gt;You should see the nameservers are replaced with the Cloudflare&amp;rsquo;s nameservers.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;strong&gt;Changing nameservers is quick&lt;/strong&gt; and you should be able to see the updated records within 5 minutes.&lt;/p&gt;
&lt;p&gt;On the other hand, changing the &lt;strong&gt;records&lt;/strong&gt; under this domain may take a longer time (e.g. 24-48 hours).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do not mix them up&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You may click the &lt;strong&gt;Done, check nameservers&lt;/strong&gt; button once you finished changing the nameservers in your domain registrar.&lt;/p&gt;
&lt;h2 id=&#34;updating-dns-records&#34;&gt;Updating DNS Records&lt;/h2&gt;
&lt;p&gt;As mentioned in the above, we have to change some of the records in Cloudflare.&lt;/p&gt;
&lt;h3 id=&#34;application-load-balancers&#34;&gt;(Application) Load Balancers&lt;/h3&gt;
&lt;p&gt;You need to replace those A Records into CNAME Records.&lt;/p&gt;
&lt;p&gt;In AWS Route 53 the load balancer records are in the forms of alias. Cloudflare will fetch the A Records of the load balancers.&lt;/p&gt;
&lt;p&gt;Get the CNAME of your load balancer under &lt;strong&gt;AWS EC2 Console&lt;/strong&gt; &amp;gt; &lt;strong&gt;Load balancers&lt;/strong&gt; &amp;gt; Select your load balancer and see the details. After that, delete the A Record in Cloudflare and add a new CNAME record for your load balancer.&lt;/p&gt;
&lt;p&gt;I used to keep the A Record in Cloudflare and it does work for few days. After that, the IP of that load balancer changed and the website cannot be connected.&lt;/p&gt;
&lt;h3 id=&#34;amazon-ses&#34;&gt;Amazon SES&lt;/h3&gt;
&lt;p&gt;I also found that the SPF and DKIM records for Amazon SES does not created in Cloudflare too. In this case you need to create those records manually in Cloudflare. Just follow the instruction provided by Amazon then you will know how to do:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-spf.html&#34;&gt;Authenticating Email with SPF in Amazon SES&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-dkim.html&#34;&gt;Authenticating Email with DKIM in Amazon SES&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;To use &lt;strong&gt;Cloudflare&lt;/strong&gt;, you need to understand what a &lt;strong&gt;domain registrar&lt;/strong&gt; is. By changing &lt;strong&gt;nameservers&lt;/strong&gt; in a domain registrar and updating some records related to AWS&amp;rsquo;s infrastructure, we can set up the Cloudflare domain for an existing website using &lt;strong&gt;AWS Route 53&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This is the end of this article (as well as the year 2020).&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Set Up an AWS EC2 with Ubuntu GUI, RDP and more</title>
      <link>https://blog.lofibean.cc/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/</link>
      <pubDate>Sat, 03 Oct 2020 13:40:48 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/</guid>
      
        <description>&lt;img src=&#34;https://blog.lofibean.cc/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/thumbnail.jpg&#34; /&gt;&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;This is an guide on how to set up a AWS EC2 free tier with GUI. The EC2 instance will be able to connect via Remote Desktop Protocol (RDP) or SSH.&lt;/p&gt;
&lt;p&gt;You need to create a AWS account: &lt;a href=&#34;https://portal.aws.amazon.com/billing/signup&#34;&gt;https://portal.aws.amazon.com/billing/signup&lt;/a&gt;. You may need to provide your credit card information during the signup process.&lt;/p&gt;
&lt;p&gt;Sign in to your AWS Account and go to the AWS EC2 Console: &lt;a href=&#34;https://aws.amazon.com/console/&#34;&gt;https://aws.amazon.com/console/&lt;/a&gt;&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#overview&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#create-an-aws-ec2&#34;&gt;Create an AWS EC2&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#set-up-the-security-groups&#34;&gt;Set up the security groups&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#choose-the-os-instance-type-and-storage&#34;&gt;Choose the OS, instance type and storage&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#create-and-download-a-pem-key-file&#34;&gt;Create and download a &lt;code&gt;.pem&lt;/code&gt; key file&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#connect-to-ec2-via-ssh&#34;&gt;Connect to EC2 via SSH&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#install-a-gui-and-rdp&#34;&gt;Install a GUI and RDP&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#gui-lxde&#34;&gt;GUI: &lt;code&gt;LXDE&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#rdp-xrdp&#34;&gt;RDP: &lt;code&gt;XRDP&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#connect-to-ec2-via-remote-desktop&#34;&gt;Connect to EC2 via remote desktop&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#bonus-materials&#34;&gt;Bonus Materials&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#1-install-additional-ibus-input-method&#34;&gt;1. Install additional IBus input method&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#2-install-midori-browser-from-deb-package&#34;&gt;2. Install Midori browser from &lt;code&gt;.deb&lt;/code&gt; package&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#3-set-up-a-swapfile-for-better-performance&#34;&gt;3. Set up a &lt;code&gt;swapfile&lt;/code&gt; for better performance&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#4-use-ec2-as-a-vpn-server&#34;&gt;4. Use EC2 as a VPN server&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;create-an-aws-ec2&#34;&gt;Create an AWS EC2&lt;/h2&gt;
&lt;h3 id=&#34;set-up-the-security-groups&#34;&gt;Set up the security groups&lt;/h3&gt;
&lt;p&gt;I suggest you define the security groups before setting up the instance. Setting up the security groups will give you a better understanding on what inbound/outbound traffic is allowed in the instances you are going to create.&lt;/p&gt;
&lt;p&gt;Choose &lt;strong&gt;Security Groups&lt;/strong&gt; at the left menu of your &lt;strong&gt;EC2 Dashboard&lt;/strong&gt;. Create 2 security groups:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;rdp&lt;/code&gt;: Allow inbound traffic via port &lt;code&gt;3389&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssh&lt;/code&gt;: Allow inbound traffic via port &lt;code&gt;22&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Allow all outbound traffic&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;choose-the-os-instance-type-and-storage&#34;&gt;Choose the OS, instance type and storage&lt;/h3&gt;
&lt;p&gt;Choose &lt;strong&gt;Services&lt;/strong&gt; &amp;gt; &lt;strong&gt;EC2&lt;/strong&gt; from the menu. At the &lt;strong&gt;EC2 Dashboard&lt;/strong&gt;, choose &lt;strong&gt;Instances&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Click the &lt;strong&gt;Launch Instance&lt;/strong&gt; and choose the suitable AMI (Amazon Machine Image). Here I choose a &lt;code&gt;t2.micro&lt;/code&gt; instance with &lt;code&gt;Ubuntu Server 18.04 LTS&lt;/code&gt; image. &lt;strong&gt;Remember also choose the suitable Storage&lt;/strong&gt; as not all kinds of storage are free. In this example I set up a &lt;code&gt;30GB General Purpose&lt;/code&gt; storage.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183719536.png&#34; alt=&#34;Image: Ubuntu Server 18.04 LTS&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183754512.png&#34; alt=&#34;Instance Type: t2.micro&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183909326.png&#34; alt=&#34;Click Review and Launch&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183922739.png&#34; alt=&#34;Storage: 30GB General Purpose&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;allow-ssh-and-rdp-connections&#34;&gt;Allow SSH and RDP connections&lt;/h4&gt;
&lt;p&gt;Choose the security groups created in the previous step:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184007198.png&#34; alt=&#34;Security Group: allow SSH and RDP&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184046233.png&#34; alt=&#34;image-20200702184046233&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;create-and-download-a-pem-key-file&#34;&gt;Create and download a &lt;code&gt;.pem&lt;/code&gt; key file&lt;/h3&gt;
&lt;p&gt;You should create this key file. If you don&amp;rsquo;t create this and link it to the instance, you will not be able to connect to the instance via SSH or RDP. Here we create a new key file named &lt;code&gt;ssh_private_key&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;After that, click &lt;strong&gt;Download Key Pair&lt;/strong&gt; and keep the key file save.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184135610.png&#34; alt=&#34;image-20200702184135610&#34;&gt;&lt;/p&gt;
&lt;h5 id=&#34;do-a-chmod-on-the-key-file&#34;&gt;Do a &lt;code&gt;chmod&lt;/code&gt; on the key file&lt;/h5&gt;
&lt;p&gt;You need to make sure that the &lt;code&gt;ssh_private_key.pem&lt;/code&gt; downloaded is able to execute. Run &lt;code&gt;chmod&lt;/code&gt; to change the permission:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â¯ ll ~/Downloads/ | grep &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ssh_private_key.pem&amp;#34;&lt;/span&gt;
-rw-r--r--@ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; BEN  staff   1.7K Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 18:41 ssh_private_key.pem

â¯ chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt; ~/Downloads/ssh_private_key.pem

â¯ ll ~/Downloads/ | grep &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ssh_private_key.pem&amp;#34;&lt;/span&gt;
-r--------@ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; BEN  staff   1.7K Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 18:41 ssh_private_key.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;connect-to-ec2-via-ssh&#34;&gt;Connect to EC2 via SSH&lt;/h2&gt;
&lt;p&gt;Once you click the &lt;strong&gt;Launch instance&lt;/strong&gt; , you should be able to see your instance in &lt;strong&gt;running&lt;/strong&gt; state in the web console. Then, you can connect to the EC2 via ssh using the &lt;code&gt;pem&lt;/code&gt; key file. Assuming that your DNS name of your EC2 is &lt;code&gt;ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com&lt;/code&gt; and it is running at &lt;code&gt;ap-northeast-1&lt;/code&gt; region, you can connect to it using user &lt;code&gt;ubuntu&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â¯ ssh -i ~/Downloads/ssh_private_key.pem ubuntu@ec2-0-1-2-3.region-name.compute.amazonaws.com
The authenticity of host &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ec2-0-1-2-3.region-name.compute.amazonaws.com (0.1.2.3)&amp;#39;&lt;/span&gt; can&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;t be established.
ECDSA key fingerprint is SHA256:8t8ey5IqoiGOKGc9WuDc5SXaYqFHPnKph1mRtzbQNTc.
Are you sure you want to &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt; connecting &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;yes/no/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;fingerprint&lt;span style=&#34;color:#f92672&#34;&gt;])&lt;/span&gt;?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You need to confirm your fingerprint at the first connection attempt.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Welcome to Ubuntu 18.04.4 LTS &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;GNU/Linux 5.3.0-1023-aws x86_64&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;


 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Thu Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 10:54:37 UTC &lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;

  System load:  0.0               Processes:           &lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;
  Usage of /:   3.7% of 29.02GB   Users logged in:     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  Memory usage: 16%               IP address &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; eth0: 172.31.4.8
  Swap usage:   0%

&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; packages can be updated.
&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; updates are security updates.

The programs included with the Ubuntu system are free software;
the exact distribution terms &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;user &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;root&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;, use &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sudo &amp;lt;command&amp;gt;&amp;#34;&lt;/span&gt;.
See &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;man sudo_root&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; details.

ubuntu@ip-172-31-4-8:~$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;install-a-gui-and-rdp&#34;&gt;Install a GUI and RDP&lt;/h2&gt;
&lt;h3 id=&#34;gui-lxde&#34;&gt;GUI: &lt;code&gt;LXDE&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I choose &lt;strong&gt;LXDE&lt;/strong&gt; as the GUI of the ubuntu server: &lt;a href=&#34;https://lxde.sourceforge.net/about.html&#34;&gt;https://lxde.sourceforge.net/about.html&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LXDE is a new project aimed to provide a new desktop environment which is lightweight and fast&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;rdp-xrdp&#34;&gt;RDP: &lt;code&gt;XRDP&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;xrdp is an open-source Remote Desktop Protocol server: &lt;a href=&#34;http://xrdp.org&#34;&gt;http://xrdp.org&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;xrdp provides a graphical login to remote machines using RDP (Microsoft Remote Desktop Protocol)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Install the packages:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt-get update -y
sudo apt-get install lxde -y
sudo apt-get install xrdp -y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;set-a-password-for-your-accout&#34;&gt;Set a password for your accout&lt;/h4&gt;
&lt;p&gt;You need to also set up a password for the &lt;em&gt;ubuntu&lt;/em&gt;. This is for your later use in RDP as RDP only allows you to login an password-protected account.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo passwd ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;connect-to-ec2-via-remote-desktop&#34;&gt;Connect to EC2 via remote desktop&lt;/h3&gt;
&lt;p&gt;For mac user, you need to download the &lt;a href=&#34;https://apps.apple.com/us/app/microsoft-remote-desktop/id1295203466?mt=12&#34;&gt;Microsoft Remote Desktop&lt;/a&gt;. If you are using Windows, you should already have the Remote Desktop application preinstalled.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://apps.apple.com/us/app/microsoft-remote-desktop/id1295203466?mt=12&#34;&gt;&lt;img src=&#34;./img/image-20201003143752732.png&#34; alt=&#34;Download Microsoft Remote Desktop&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Launch the app and click &lt;strong&gt;Add PC&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702192027044.png&#34; alt=&#34;Add PC in Microsoft Remote Desktop&#34;&gt;&lt;/p&gt;
&lt;p&gt;Set the PC name (i.e. the DNS name of your machine):&lt;img src=&#34;./img/image-20200702192128973.png&#34; alt=&#34;Set PC name&#34;&gt;&lt;/p&gt;
&lt;p&gt;Login with user &lt;code&gt;ubuntu&lt;/code&gt; and the password you set in the previous step.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702192239827.png&#34; alt=&#34;Connect&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;bonus-materials&#34;&gt;Bonus Materials&lt;/h2&gt;
&lt;h3 id=&#34;1-install-additional-ibus-input-method&#34;&gt;1. Install additional IBus input method&lt;/h3&gt;
&lt;p&gt;If you want to type Japanese, Chinese, etc. you may need to install an input method. For cangjie, you can install &lt;a href=&#34;http://cangjians.github.io/projects/ibus-cangjie/install.html&#34;&gt;&lt;strong&gt;Cangjians&lt;/strong&gt;&lt;/a&gt; via the terminal:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt-get install ibus-cangjie
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-install-midori-browser-from-deb-package&#34;&gt;2. Install Midori browser from &lt;code&gt;.deb&lt;/code&gt; package&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Midori Browser&lt;/strong&gt; is a browser web light, fast, secure, free software &amp;amp; open source&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Download .deb file: &lt;a href=&#34;https://astian.org/en/midori-browser/download/&#34;&gt;https://astian.org/en/midori-browser/download/&lt;/a&gt; or using &lt;code&gt;wget&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;cd ~/Downloads
sudo wget -qnc https://packages.astian.org/pool/main/m/midori/midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/Downloads$ ll
total &lt;span style=&#34;color:#ae81ff&#34;&gt;1492&lt;/span&gt;
drwxr-xr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; ubuntu ubuntu    &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 11:29 ./
drwxr-xr-x &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt; ubuntu ubuntu    &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 11:22 ../
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root   root   &lt;span style=&#34;color:#ae81ff&#34;&gt;1517328&lt;/span&gt; Jan &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt; 23:26 midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, install the &lt;code&gt;deb&lt;/code&gt; package using &lt;code&gt;dpkg&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo dpkg -i midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You may see the &lt;code&gt;dependency problems&lt;/code&gt; like the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/Downloads$ sudo dpkg --configure -a
dpkg: dependency problems prevent configuration of midori:
 midori depends on libpeas-1.0-0 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 1.15&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;; however:
  Package libpeas-1.0-0 is not installed.
 midori depends on libxml2-utils; however:
  Package libxml2-utils is not installed.
 midori depends on gstreamer1.0-plugins-bad; however:
  Package gstreamer1.0-plugins-bad is not installed.
 midori depends on gstreamer1.0-libav; however:
  Package gstreamer1.0-libav is not installed.

dpkg: error processing package midori &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;--configure&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;:
 dependency problems - leaving unconfigured
Errors were encountered &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; processing:
 midori
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this case, update the packages and reinstall midori:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo dpkg --configure -a
sudo apt-get -f install
sudo apt-get update
sudo apt-get install midori
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-set-up-a-swapfile-for-better-performance&#34;&gt;3. Set up a &lt;code&gt;swapfile&lt;/code&gt; for better performance&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~$ sudo fallocate -l 1G /swapfile
ubuntu@ip-172-31-4-8:~$ sudo chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;600&lt;/span&gt; /swapfile
ubuntu@ip-172-31-4-8:~$ sudo mkswap /swapfile
Setting up swapspace version 1, size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt; MiB &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1073737728&lt;/span&gt; bytes&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
no label, UUID&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;9a121c2c-cd6f-48bf-b928-e550095a3efd
ubuntu@ip-172-31-4-8:~$ sudo swapon /swapfile
ubuntu@ip-172-31-4-8:~$ sudo swapon --show
NAME      TYPE  SIZE USED PRIO
/swapfile file 1024M   0B   -2
ubuntu@ip-172-31-4-8:~$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo nano /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;/swapfile swap swap defaults &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, reboot the machine.&lt;/p&gt;
&lt;h3 id=&#34;4-use-ec2-as-a-vpn-server&#34;&gt;4. Use EC2 as a VPN server&lt;/h3&gt;
&lt;p&gt;Create a new security group allows all TCP and UDP inbound connections and add this security group to the EC2 instance:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702200459525.png&#34; alt=&#34;EC2 instance inbound rules&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702200555846.png&#34; alt=&#34;Assign a security group&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;install-openvpn-scripts&#34;&gt;Install openvpn scripts&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Nyr/openvpn-install&#34;&gt;This repo&lt;/a&gt; contains scripts for VPN server set up and profile management. Install it into your EC2:&lt;/p&gt;
&lt;p&gt;Download the script:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt update
sudo apt upgrade -y
mkdir ~/vpn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd ~/vpn
wget https://git.io/vpn -O openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/vpn$ ll
total &lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;
drwxrwxr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; ubuntu ubuntu  &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 ./
drwxr-xr-x &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt; ubuntu ubuntu  &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 ../
-rw-rw-r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ubuntu ubuntu &lt;span style=&#34;color:#ae81ff&#34;&gt;23085&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Make the &lt;code&gt;openvpn-install.sh&lt;/code&gt; exectable in your EC2:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;chmod +x openvpn-install.sh
sudo ./openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Add a new profile by running &lt;code&gt;openvpn-install.sh&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Welcome to this OpenVPN road warrior installer!

This server is behind NAT. What is the public IPv4 address or hostname?
Public IPv4 address / hostname &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;18.183.12.213&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:

Which protocol should OpenVPN use?
   1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; UDP &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
   2&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; TCP
Protocol &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

What port should OpenVPN listen to?
Port &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1194&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:

Select a DNS server &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; the clients:
   1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Current system resolvers
   2&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Google
   3&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; 1.1.1.1
   4&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; OpenDNS
   5&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Quad9
   6&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; AdGuard
DNS server &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

Enter a name &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; the first client:
Name &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;client&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: demo-ec2-client

OpenVPN installation is ready to begin.
Press any key to &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Finished!

The client configuration is available in: /home/ubuntu/demo-ec2-client.ovpn
New clients can be added by running this script again.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Use another Terminal to download the &lt;code&gt;.ovpn&lt;/code&gt; file. Assuming that the machine name is &lt;code&gt;ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com&lt;/code&gt; and the generated &lt;code&gt;.ovpn&lt;/code&gt; file is place under &lt;code&gt;~/&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;scp -i sparkle.pem ubuntu@ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com:~/demo-ec2-client.ovpn ~/Downloads/demo-ec2-client.ovpn
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;connect-to-the-vpn&#34;&gt;Connect to the VPN&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://client.pritunl.com/&#34;&gt;Pritunl Client&lt;/a&gt; is a easy-to-use OpenVPN client. Downlaod and install it.&lt;/p&gt;
&lt;p&gt;Launch the client and click &lt;strong&gt;Import Profile&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/screenshot.png&#34; alt=&#34;Import ovpn profile&#34;&gt;&lt;/p&gt;
&lt;p&gt;After that, click the burger menu of the profile and &lt;strong&gt;Connect&lt;/strong&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Reference:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://comtechies.com/how-to-set-up-gui-on-amazon-ec2-ubuntu-server.html&#34;&gt;https://comtechies.com/how-to-set-up-gui-on-amazon-ec2-ubuntu-server.html&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Atlassian Bamboo: an Opinionated Approach</title>
      <link>https://blog.lofibean.cc/posts/notes-on-atlassian-bamboo/</link>
      <pubDate>Sun, 20 Sep 2020 14:45:18 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/notes-on-atlassian-bamboo/</guid>
      
        <description>&lt;img src=&#34;https://images.unsplash.com/photo-1510707421852-103d8d97c090?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1280&amp;h=630&amp;q=80&#34; /&gt;&lt;blockquote&gt;
&lt;p&gt;This is the introduction related to my experience on using Atlassian Bamboo / MSBuild / MSDeploy / IIS, I will cover the build process / setup in the coming articles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;preface&#34;&gt;Preface&lt;/h1&gt;
&lt;p&gt;This is an article talking about &lt;strong&gt;my experience (â‰  100% solution. â‰  golden rule on CI/CD)&lt;/strong&gt; on using &lt;a href=&#34;https://www.atlassian.com/software/bamboo&#34;&gt;Atlassian Bamboo&lt;/a&gt;. It is &lt;strong&gt;a tool for &lt;a href=&#34;https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment&#34;&gt;continuous integration, deployment, and delivery&lt;/a&gt;&lt;/strong&gt;. I use this tool for all the &lt;strong&gt;.NET-based web applications running on the Windows ecosystem&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note on 2020: &lt;a href=&#34;https://bitbucket.org/product/features/pipelines&#34;&gt;Bitbucket Pipelines&lt;/a&gt; is a newer service created by Atlassian. If you are building applications other then &lt;a href=&#34;https://bitbucket.org/site/master/issues/13452/support-for-native-windows-net-builds-on&#34;&gt;Windows&lt;/a&gt;, &lt;a href=&#34;https://bitbucket.org/site/master/issues/13719/support-for-macos-ios-in-pipelines&#34;&gt;macOS, or iOS&lt;/a&gt; applications then I strongly recommend you to use this instead of Bamboo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#deployment-cd&#34;&gt;Deployment (CD)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#glossary&#34;&gt;Glossary&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#build-ci&#34;&gt;Build (CI)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#glossary-1&#34;&gt;Glossary&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#git&#34;&gt;Git&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#deployment-cd-1&#34;&gt;Deployment (CD)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#nuget-packages&#34;&gt;Nuget Packages&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#websites&#34;&gt;Websites&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#build-ci-1&#34;&gt;Build (CI)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#nuget-packages-1&#34;&gt;Nuget Packages&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#websites-1&#34;&gt;Websites&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h1 id=&#34;cicd-principles&#34;&gt;CI/CD principles&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;In my opinion&lt;/strong&gt;, when you start designing your CI/CD workflows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make things &lt;strong&gt;predictable&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Think of the &lt;strong&gt;deployment (CD) first&lt;/strong&gt;, then work backward to the &lt;strong&gt;integration (CI)&lt;/strong&gt; part.&lt;/li&gt;
&lt;li&gt;Use &lt;em&gt;&lt;strong&gt;Gitflow&lt;/strong&gt;&lt;/em&gt; in your source code.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;fundamentals-of-bamboo&#34;&gt;Fundamentals of Bamboo&lt;/h1&gt;
&lt;p&gt;The menu in Bamboo (version 6.5.0) contains 3 parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Projects&lt;/em&gt;,&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Build&lt;/em&gt; and&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Deploy&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913141147305.png&#34; alt=&#34;Build dropdown menu&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913141246490.png&#34; alt=&#34;Deploy dropdown menu&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;deployment-cd&#34;&gt;Deployment (CD)&lt;/h2&gt;
&lt;p&gt;Here is a typical &lt;strong&gt;deployment project summary&lt;/strong&gt; looks like:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913132645203.png&#34; alt=&#34;A typical deployment project&#34;&gt;&lt;/p&gt;
&lt;p&gt;You can check this out by clicking &lt;strong&gt;Deploy&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Deployment Projects&lt;/strong&gt;. After that, choose one of the item on the list.&lt;/p&gt;
&lt;h3 id=&#34;glossary&#34;&gt;Glossary&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Artifact&lt;/em&gt;: The content built in the CI part.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Deployment Environment&lt;/em&gt;: The place the &lt;em&gt;artifacts&lt;/em&gt; should go to.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Release&lt;/em&gt;: A unique (and usually auto-increment) identifier of this deployment.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Deployment Project&lt;/em&gt;: A collection of build plans.&lt;/p&gt;
&lt;h2 id=&#34;build-ci&#34;&gt;Build (CI)&lt;/h2&gt;
&lt;p&gt;Here is a typical build dashboard:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913130048805.png&#34; alt=&#34;A typical build dashboard&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is the default front page of Bamboo. You can also check this out by clicking &lt;strong&gt;Build&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Build Plans&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;glossary-1&#34;&gt;Glossary&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Build&lt;/em&gt;: The build result of the default plan.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Build Plan&lt;/em&gt;: Usually it refers to the definitions of all build-related configuratoins. However, sometimes it &lt;em&gt;also&lt;/em&gt; refers to the &lt;strong&gt;default build barnch&lt;/strong&gt; or the &lt;strong&gt;default branch configurations&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I will try to avoid using the term &lt;em&gt;build plan&lt;/em&gt; in this article as it is a bit confusing. I will use :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;default branch configuratoins&lt;/em&gt; to indicate the default settings of a &lt;em&gt;build plan&lt;/em&gt;;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;default build branch&lt;/em&gt; to indicate the branch associated to the &lt;em&gt;default branch configuratoins&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;When I use the word &lt;em&gt;build plan&lt;/em&gt;, it refers to the item listed under &lt;strong&gt;Plan&lt;/strong&gt; column in the build dashboard.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Build Project&lt;/em&gt;: Similar to &lt;em&gt;Deployment Project&lt;/em&gt;, it&amp;rsquo;s a collection of &lt;em&gt;build plans&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;git&#34;&gt;Git&lt;/h2&gt;
&lt;p&gt;From the basic assumption in the &lt;a href=&#34;#cicd-principles&#34;&gt;CI/CD principles, pt. 3&lt;/a&gt; all the repositories are using &lt;a href=&#34;https://nvie.com/posts/a-successful-git-branching-model/&#34;&gt;Gitflow&lt;/a&gt;. I will use the following conventions when talking about the CI settings.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Default build branch&lt;/em&gt;: git&amp;rsquo;s &lt;code&gt;develop&lt;/code&gt; branch.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Build branch&lt;/em&gt;: All the other git&amp;rsquo;s branches, including &lt;code&gt;feature/*&lt;/code&gt;, &lt;code&gt;release/*&lt;/code&gt;, &lt;code&gt;hotfix/*&lt;/code&gt;, &lt;code&gt;master&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Master branch&lt;/em&gt;: git&amp;rsquo;s &lt;code&gt;master&lt;/code&gt; branch&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Linked Repository&lt;/em&gt;: Store all the git repository connection setups for later user in CI/CD steps. It&amp;rsquo;s under &lt;strong&gt;âš™ï¸ (Bamboo Administration)&lt;/strong&gt; &amp;gt; &lt;strong&gt;Linked repositories&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919094705047.png&#34; alt=&#34;Bamboo Administration &gt; Linked repositories&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is an example for a class library:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919093103200.png&#34; alt=&#34;Plan branches in a class library build plan&#34;&gt;&lt;/p&gt;
&lt;p&gt;And this is an example for website:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919093317277.png&#34; alt=&#34;Plan branches in a website build plan&#34;&gt;&lt;/p&gt;
&lt;p&gt;Next, I will talk about how to &lt;strong&gt;design&lt;/strong&gt; a CD flow, then a CI flow.&lt;/p&gt;
&lt;h1 id=&#34;designing-a-cicd-workflow&#34;&gt;Designing a CI/CD workflow&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Assumption: you are using &lt;a href=&#34;https://datasift.github.io/gitflow/IntroducingGitFlow.html&#34;&gt;&lt;em&gt;gitflow&lt;/em&gt;&lt;/a&gt; to manage your git repository.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In short:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Deployment&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 &lt;em&gt;deoloyment project&lt;/em&gt;, many &lt;em&gt;deployment plans&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;1 destination, 1 &lt;em&gt;deployment plan&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Integration&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 Bitbucket git repository, (usually) 1 Bamboo &lt;em&gt;build plan&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;build the &lt;code&gt;develop&lt;/code&gt; branch using &lt;strong&gt;default plan configuration&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;git branch &amp;lt;&amp;ndash;&amp;gt; &lt;em&gt;Branch config&lt;/em&gt; of a build plan&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1 Bitbucket project,  1Bamboo &lt;em&gt;build project&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;deployment-cd-1&#34;&gt;Deployment (CD)&lt;/h2&gt;
&lt;p&gt;All the deployments in my team can be categorized in to 2 types: either a &lt;strong&gt;library&lt;/strong&gt; (i.e. a nuget package) or a &lt;strong&gt;website&lt;/strong&gt; (i.e. an IIS website).&lt;/p&gt;
&lt;h3 id=&#34;nuget-packages&#34;&gt;Nuget Packages&lt;/h3&gt;
&lt;p&gt;My team is using &lt;a href=&#34;https://myget.org/&#34;&gt;MyGet&lt;/a&gt; to host private packages. So, there is only 1 destination for my &lt;em&gt;artifact&lt;/em&gt; goes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913153116958.png&#34; alt=&#34;Bamboo class library CD flow&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is how I organize the &lt;em&gt;deployment project&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913154357682.png&#34; alt=&#34;Class library deployment project setup&#34;&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Deployment Project
â”œâ”€â”€ Production environment: for builds from master
â””â”€â”€ Pre-release environment: all other branches
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;websites&#34;&gt;Websites&lt;/h3&gt;
&lt;p&gt;We have 2 web servers for production and other environments has a corresponding web server. All running IIS. On the other hand, some of the websites are hosting under a sub-directory (as a sub-site).&lt;/p&gt;
&lt;p&gt;Therefore, an &lt;em&gt;artifact&lt;/em&gt; may goes to multiple destinations.&lt;/p&gt;
&lt;p&gt;In my design, 1 &lt;em&gt;deployment environment&lt;/em&gt; responsibles for 1 destination (i.e. 1 IIS web server).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913190536806.png&#34; alt=&#34;Bamboo website CD flow&#34;&gt;&lt;/p&gt;
&lt;p&gt;So you may ask: why not 1 deployment environment for 1 environment? Here&amp;rsquo;s why:&lt;/p&gt;
&lt;h4 id=&#34;1-to-1-mapping-of-deployment-environment-and-iis-website&#34;&gt;1-to-1 mapping of &lt;em&gt;deployment environment&lt;/em&gt; and &lt;em&gt;IIS website&lt;/em&gt;&lt;/h4&gt;
&lt;h5 id=&#34;the-bad&#34;&gt;The bad&lt;/h5&gt;
&lt;p&gt;One of the downside is: It takes longer time to deploy all websites. Consider the case of deploying 2 &lt;em&gt;deployment projects&lt;/em&gt; at the same time, and each project has multiple &lt;em&gt;deployment environments&lt;/em&gt;. The sequence of deployment activities can be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;deploy site A to environment A&lt;/li&gt;
&lt;li&gt;deploy site B to environment A&lt;/li&gt;
&lt;li&gt;deploy site A to environment B (triggered by activity 1.)&lt;/li&gt;
&lt;li&gt;deploy site B to environment B (triggered by activity 2.)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Which means I have to wait for the deployment of another website.&lt;/p&gt;
&lt;h5 id=&#34;the-good&#34;&gt;The good&lt;/h5&gt;
&lt;p&gt;The biggest advantage of doing so is that modefying one &lt;em&gt;deployment environment&lt;/em&gt; does not affect any settings of the other &lt;em&gt;deployment environments&lt;/em&gt;. Then, I can do the following things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A/B testing&lt;/li&gt;
&lt;li&gt;Rollback the version of a specific web server&lt;/li&gt;
&lt;li&gt;Check out the audit log / deployment history for a particular web server&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Moreover, you can see the status of all environments in the &lt;strong&gt;All Deployment Projects&lt;/strong&gt; page (&lt;strong&gt;Deploy&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Deployment Projects&lt;/strong&gt;).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If deployment of a particular web server is failed, I am able to find out which server is it easily&lt;/li&gt;
&lt;li&gt;Plus, I can just re-deploy to that particuler web server&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can create a new &lt;em&gt;deployment environment&lt;/em&gt; by cloning an existing one (from the same &lt;em&gt;deployment project&lt;/em&gt; or from another one). Thus, this is not a tedious task.&lt;/p&gt;
&lt;p&gt;(I am not sure about the above observation and please do let me know if I got something wrong or there are any better solutions.)&lt;/p&gt;
&lt;h5 id=&#34;my-decision&#34;&gt;My decision&lt;/h5&gt;
&lt;p&gt;This is how I organize the &lt;em&gt;deployment project&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913154337848.png&#34; alt=&#34;Website deployment project setup&#34;&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Deployment Project
â”œâ”€â”€ Production (A) environment: for builds from master / release
â”œâ”€â”€ Production (B) environment: for builds from master / release
â”œâ”€â”€ Staging environment: all other branches
â””â”€â”€ UAT environment: all other branches
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;build-ci-1&#34;&gt;Build (CI)&lt;/h2&gt;
&lt;p&gt;Similarly, my team has to build nuget packages, .NET Framework and .NET Core web applications.&lt;/p&gt;
&lt;p&gt;In my case, the CI part has a close relationship with the &lt;strong&gt;gitflow&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;nuget-packages-1&#34;&gt;Nuget Packages&lt;/h3&gt;
&lt;p&gt;I need to build 2 kinds of &lt;em&gt;artifacts&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Testing package: &lt;strong&gt;Prerelease&lt;/strong&gt;;&lt;/li&gt;
&lt;li&gt;Production package; &lt;strong&gt;Release&lt;/strong&gt; (used by other solutions/projects in production) deployment.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;planbranch-configurations&#34;&gt;Plan/Branch configurations&lt;/h4&gt;
&lt;p&gt;(See the &lt;a href=&#34;#default-configurations-develop&#34;&gt;Websites&lt;/a&gt; section.)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/ci-cd-CI-Nuget.png&#34; alt=&#34;Bamboo class library CI flow&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;websites-1&#34;&gt;Websites&lt;/h3&gt;
&lt;p&gt;I need to build 2-3 kinds of &lt;em&gt;artifacts&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For &lt;strong&gt;UAT&lt;/strong&gt; environment;&lt;/li&gt;
&lt;li&gt;For &lt;strong&gt;Staging&lt;/strong&gt; environment (this environment is not 24/7 and will be set up when necessary);&lt;/li&gt;
&lt;li&gt;For &lt;strong&gt;Production&lt;/strong&gt; environment.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/ci-cd-CI-IIS.png&#34; alt=&#34;Bamboo website CI flow&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;default-configurations-develop&#34;&gt;Default configurations: &lt;code&gt;develop&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;For the default settings in a &lt;em&gt;build plan&lt;/em&gt;, always choose the &lt;code&gt;develop&lt;/code&gt; as the main branch and allow Bamboo to create/remove all the &lt;code&gt;feature/*&lt;/code&gt;, &lt;code&gt;hotfix/*&lt;/code&gt; branches.&lt;/p&gt;
&lt;h4 id=&#34;production-configurations-master&#34;&gt;Production configurations: &lt;code&gt;master&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Define a build plan for &lt;code&gt;master&lt;/code&gt; branch. Uncheck &lt;strong&gt;Clean up plan branch automatically&lt;/strong&gt; under &lt;strong&gt;Branch details&lt;/strong&gt; tab to  prevent this branch being deleted by Bamboo.&lt;/p&gt;
&lt;h5 id=&#34;note-on-release-branches&#34;&gt;Note on &lt;code&gt;release&lt;/code&gt; branches&lt;/h5&gt;
&lt;p&gt;I ususlly not using &lt;code&gt;release&lt;/code&gt; branch. When I use that, I will set up a build branch &lt;strong&gt;manually&lt;/strong&gt;, just like the &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;staging-configurations-staging&#34;&gt;Staging configurations: &lt;code&gt;staging&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Just like the set up of &lt;strong&gt;production configurations&lt;/strong&gt;. However, change the variables for the staging environment.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200920110535916.png&#34; alt=&#34;Build branch configuration - Branch details&#34;&gt;&lt;/p&gt;
&lt;p&gt;You may also need to override the &lt;em&gt;default branch configurations&lt;/em&gt; under the &lt;strong&gt;Variables&lt;/strong&gt; tab.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200920110548520.png&#34; alt=&#34;Build branch configuration - Variables&#34;&gt;&lt;/p&gt;
&lt;p&gt;You can find these tabs under form the top menu: &lt;strong&gt;Build&lt;/strong&gt; &amp;gt; &lt;strong&gt;All build plans&lt;/strong&gt; &amp;gt; &lt;strong&gt;ğŸ–‹&lt;/strong&gt; (right end of the plan) &amp;gt; (Choose the plan branch name).&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Ruby Cheatsheet</title>
      <link>https://blog.lofibean.cc/posts/ruby-cheatsheet/</link>
      <pubDate>Tue, 15 Sep 2020 08:40:48 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/ruby-cheatsheet/</guid>
      
        <description>&lt;img src=&#34;https://static.dribbble.com/users/79571/screenshots/2232375/ruby.png&#34; /&gt;&lt;p&gt;This post contains many useful snippets for me when writing &lt;strong&gt;Ruby&lt;/strong&gt; scripts. I will keep updating this note in the future.&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-file&#34;&gt;ğŸ· About File&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#absolute-path&#34;&gt;Absolute Path&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#read--write-a-file&#34;&gt;Read / Write a file&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-string&#34;&gt;ğŸ· About String&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#string-template&#34;&gt;String template&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#string-interpolation&#34;&gt;String Interpolation&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#trim-a-string&#34;&gt;Trim a String&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#null-or-empty&#34;&gt;Null Or Empty&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#titlecase--uppercase--lowercase--capitalize&#34;&gt;Titlecase / UPPERCASE / lowercase / Capitalize&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-input&#34;&gt;ğŸ· About Input&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#console-input&#34;&gt;Console Input&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-regex&#34;&gt;ğŸ· About Regex&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#named-regex-capturing-group&#34;&gt;Named regex capturing group&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-bundler-and-gemfile&#34;&gt;ğŸ· About Bundler and Gemfile&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#install-bundler&#34;&gt;Install bundler&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#setup-and-restore-dependencies&#34;&gt;Setup and restore dependencies&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#check-the-info-of-a-installed-gem&#34;&gt;Check the info of a installed gem&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;-about-file&#34;&gt;ğŸ· About File&lt;/h2&gt;
&lt;h3 id=&#34;absolute-path&#34;&gt;Absolute Path&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;__dir__&lt;/code&gt; returns the current path.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(__dir__, file_name_no_path )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;read--write-a-file&#34;&gt;Read / Write a file&lt;/h3&gt;
&lt;p&gt;Read the content of &lt;code&gt;file_name&lt;/code&gt; to &lt;code&gt;buffer&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;buffer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read( file_name )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Write &lt;code&gt;content&lt;/code&gt; to &lt;code&gt;file_name&lt;/code&gt;. File will be created when it does not exist.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;open( file_name , &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;w&amp;#34;&lt;/span&gt;) { &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;f&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; f&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write( content ) }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-about-string&#34;&gt;ğŸ· About String&lt;/h2&gt;
&lt;h3 id=&#34;string-template&#34;&gt;String template&lt;/h3&gt;
&lt;p&gt;To create a multiline string template:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;template &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;-EOCONTENT
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Your
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Multiline
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Text
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Content
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOCONTENT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;string-interpolation&#34;&gt;String Interpolation&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;str &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is a string with &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#{&lt;/span&gt;variable_name&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;.&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;trim-a-string&#34;&gt;Trim a String&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;    Hello James &amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strip  &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello James&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;null-or-empty&#34;&gt;Null Or Empty&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nil? ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;not_null&amp;#34;&lt;/span&gt;
str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;empty? ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;empty&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;not_empty&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;titlecase--uppercase--lowercase--capitalize&#34;&gt;Titlecase / UPPERCASE / lowercase / Capitalize&lt;/h3&gt;
&lt;p&gt;All returns a new copy. Examples from &lt;a href=&#34;https://stackoverflow.com/a/1020571/13742790&#34;&gt;this answer in StackOverflow&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;titleize    &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello James&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;upcase      &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;HELLO JAMES&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;downcase    &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;hello james&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;capitalize  &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello james&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note: &lt;strong&gt;Alter the original string&lt;/strong&gt; by adding &lt;code&gt;!&lt;/code&gt; right after the method.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;downcase!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-about-input&#34;&gt;ğŸ· About Input&lt;/h2&gt;
&lt;h3 id=&#34;console-input&#34;&gt;Console Input&lt;/h3&gt;
&lt;p&gt;Ask a question and wait for user input:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Your question: &amp;#34;&lt;/span&gt;
user_input &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; gets
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(you may need to &lt;code&gt;strip&lt;/code&gt; the &lt;code&gt;user_input&lt;/code&gt; to ger rid of a tailing newline.)&lt;/p&gt;
&lt;h2 id=&#34;-about-regex&#34;&gt;ğŸ· About Regex&lt;/h2&gt;
&lt;p&gt;Test a ruby regex: &lt;a href=&#34;https://rubular.com/&#34;&gt;https://rubular.com/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;named-regex-capturing-group&#34;&gt;Named regex capturing group&lt;/h3&gt;
&lt;p&gt;Steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Prepare the regex: &lt;code&gt;^(\w+)(Query|Command)$&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;?&amp;lt;named_group&amp;gt;&lt;/code&gt; at the beginning &lt;strong&gt;inside&lt;/strong&gt; that capturing group.&lt;/li&gt;
&lt;li&gt;Do the regex &lt;code&gt;match()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Retrieve the named group: &lt;code&gt;[:named_group]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## name: SomeStuffQuery ; result: SomeStuff&lt;/span&gt;
result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;/^(?&amp;lt;named_group&amp;gt;\w+)(Query|Command)$/&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;match(name)&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:named_group&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If your regex is valid, you should be able to see the captured group and related content:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.lofibean.cc/img/image-20200915091031591.png&#34; alt=&#34;image-20200915091031591&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;-about-bundler-and-gemfile&#34;&gt;ğŸ· About Bundler and Gemfile&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://bundler.io/&#34;&gt;Bundler&lt;/a&gt; helps you to manage gem denendencies in your project.&lt;/p&gt;
&lt;h3 id=&#34;install-bundler&#34;&gt;Install bundler&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-zsh&#34; data-lang=&#34;zsh&#34;&gt;gem install bundler
bundler -v
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;setup-and-restore-dependencies&#34;&gt;Setup and restore dependencies&lt;/h3&gt;
&lt;p&gt;Create a &lt;code&gt;Gemfile&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-gemfile&#34; data-lang=&#34;gemfile&#34;&gt;source &#39;https://rubygems.org&#39;
gem &#39;dotenv&#39;, &#39;~&amp;gt; 2.7&#39;, &#39;&amp;gt;= 2.7.5&#39;
gem &amp;quot;mustache&amp;quot;, &amp;quot;~&amp;gt; 1.0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;globally&#34;&gt;Globally&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;bundle &lt;span style=&#34;color:#75715e&#34;&gt;# may requires sudo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;locally&#34;&gt;Locally&lt;/h4&gt;
&lt;p&gt;To install gems at a relative path e.g. at the &lt;code&gt;lib&lt;/code&gt; folder:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;bundle install --path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;./lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;a &lt;code&gt;.bundle&lt;/code&gt; folder will be generated, together with your &lt;code&gt;Gemfile.lock&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;check-the-info-of-a-installed-gem&#34;&gt;Check the info of a installed gem&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â¯ bundle info ruby_http_client
  * ruby_http_client &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;3.5.1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
        Summary: A simple REST client
        Homepage: http://github.com/sendgrid/ruby-http-client
        Path: ~/git/my-folder/lib/ruby/2.6.0/gems/ruby_http_client-3.5.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;&lt;em&gt;(cover image from &lt;a href=&#34;https://dribbble.com/shots/2232375-Ruby&#34;&gt;this dribble&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Use Gravatar Everywhere</title>
      <link>https://blog.lofibean.cc/posts/use-gravatar-everywhere/</link>
      <pubDate>Sat, 18 Jul 2020 12:01:56 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/use-gravatar-everywhere/</guid>
      
        <description>&lt;h3 id=&#34;what-is-gravatar&#34;&gt;What is Gravatar&lt;/h3&gt;
&lt;p&gt;Your public profile on the internet, provided by Wordpress. See &lt;a href=&#34;https://en.gravatar.com/&#34;&gt;https://en.gravatar.com/&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;1-upload-an-image-to-your-gravatar-account&#34;&gt;1. Upload an image to your gravatar account&lt;/h3&gt;
&lt;p&gt;If you don&amp;rsquo;t have the gravatar account, create one. Make sure that the email you used to create the account will be the email account you want to link your profile picture.&lt;/p&gt;
&lt;p&gt;After that, upload your profile picture to gravatar.&lt;/p&gt;
&lt;h3 id=&#34;2-use-the-image-everywhere&#34;&gt;2. Use the image everywhere&lt;/h3&gt;
&lt;h4 id=&#34;get-your-md5-hash-of-email-address&#34;&gt;Get your md5 hash of email address&lt;/h4&gt;
&lt;p&gt;For MacOS user, you should have the md5 utility installed, go to the terminal and check:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â¯ which md5
/sbin/md5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, generate the md5 has of your email address:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â¯ md5 -s &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;myemall@address.com&amp;#34;&lt;/span&gt;
MD5 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;myemall@address.com&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ca49930cff2f87bd37bfe71ce21467f
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The gravatar image url is in this format:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://gravatar.com/avatar/{your md5 hash}?s={size}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If you want to have a 200px avatar, use &lt;code&gt;https://gravatar.com/avatar/ca49930cff2f87bd37bfe71ce21467f?s=200&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;use this image url in &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://gravatar.com/avatar/ca49930cff2f87bd37bfe71ce21467f?s=200&amp;#34;&lt;/span&gt; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And you are good to go!&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Displaying the Full Content in Hugo&#39;s RSS feed</title>
      <link>https://blog.lofibean.cc/posts/displaying-the-full-content-in-hugo-rss-feed/</link>
      <pubDate>Fri, 03 Jul 2020 09:53:38 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/displaying-the-full-content-in-hugo-rss-feed/</guid>
      
        <description>&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;
&lt;p&gt;Recently I created a hugo blog and started writing articles (yes, that&amp;rsquo;s the blog you are reading). Later, I found that dev.to can &lt;a href=&#34;https://dev.to/settings/publishing-from-rss&#34;&gt;publish articles (as draft) from a RSS feed&lt;/a&gt;. In that way I don&amp;rsquo;t have to copy-and-paste my articles manually in order to publish the same item on dev.to!&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#background&#34;&gt;Background&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#problem&#34;&gt;ğŸ˜¨ Problem&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#solution&#34;&gt;ğŸ˜€ Solution&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#locating-rssxml&#34;&gt;Locating &lt;code&gt;rss.xml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#rendering-the-full-content&#34;&gt;Rendering the full content&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#regenerating-the-site&#34;&gt;Regenerating the site&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#bonus-the-difference-between--and---in-hugo&#34;&gt;Bonus: The difference between &lt;code&gt;{{&lt;/code&gt; and &lt;code&gt;{{-&lt;/code&gt; in Hugo&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#conclusion&#34;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;problem&#34;&gt;ğŸ˜¨ Problem&lt;/h2&gt;
&lt;p&gt;Although dev.to&amp;rsquo;s puslishing from RSS feed service is great, my Hugo site is not that great (with the basic settings). &lt;strong&gt;When I was trying to sync my RSS feed items to dev.to, all items can be imported but only the beginning part of the content was fetched.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I know that should be something wrong with the RSS feeds generated by Hugo. The &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/master/tpl/tplimpl/embedded/templates/_default/rss.xml&#34;&gt;default Hugo RSS template&lt;/a&gt; only renders &lt;code&gt;Summary&lt;/code&gt; of an article and my Hugo theme is using that:&lt;/p&gt;
&lt;script type=&#34;application/javascript&#34; src=&#34;https://gist.github.com/bemnlam/83b253aef5526c30ca5535c72bd861cc.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;As you can see in &lt;strong&gt;line 73&lt;/strong&gt;, the &lt;a href=&#34;https://validator.w3.org/feed/docs/rss2.html&#34;&gt;&lt;code&gt;&amp;lt;description&amp;gt;&lt;/code&gt;&lt;/a&gt;  in my RSS feeds contain article summary only but not the full content. Is there any ways to change the &lt;code&gt;Summary&lt;/code&gt; here into something else? Something else that represents the &lt;strong&gt;full content&lt;/strong&gt;?&lt;/p&gt;
&lt;h2 id=&#34;solution&#34;&gt;ğŸ˜€ Solution&lt;/h2&gt;
&lt;h3 id=&#34;locating-rssxml&#34;&gt;Locating &lt;code&gt;rss.xml&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Usually, Hugo templates are placed under &lt;code&gt;{your hugo theme}/layouts/_defualt/&lt;/code&gt;. If such file does not exist, it&amp;rsquo;s time to create one. You can copy-and-paste the code from &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/master/tpl/tplimpl/embedded/templates/_default/rss.xml&#34;&gt;Hugo&amp;rsquo;s github&lt;/a&gt; or run the following &lt;code&gt;curl&lt;/code&gt; command under &lt;code&gt;/layouts/_default&lt;/code&gt; to download it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;curl &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://raw.githubusercontent.com/gohugoio/hugo/master/tpl/tplimpl/embedded/templates/_default/rss.xml&amp;#34;&lt;/span&gt; &amp;gt; rss.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;rendering-the-full-content&#34;&gt;Rendering the full content&lt;/h3&gt;
&lt;p&gt;Rendering the full content of is really simple and straight-forward. What you need to do is just replacing this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#75715e&#34;&gt;{{&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Summary&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;}}&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#75715e&#34;&gt;{{-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Content&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;-}}&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Caution: use &lt;code&gt;{{-&lt;/code&gt; instead of &lt;code&gt;{{&lt;/code&gt;. Read &lt;a href=&#34;#bonus-the-difference-between--and---in-hugo&#34;&gt;the bonus part&lt;/a&gt; if you want to know what is the difference.&lt;/p&gt;
&lt;h3 id=&#34;regenerating-the-site&#34;&gt;Regenerating the site&lt;/h3&gt;
&lt;p&gt;Updating the RSS template &lt;strong&gt;will not&lt;/strong&gt; update your &lt;strong&gt;generated content&lt;/strong&gt; automatically. Therefore, you need to re-generate your Hugo site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You should see the changes in all RSS xml files (from git). After that, push all the code changes, remove all the fetched posts in dev.to and re-fetch them. That&amp;rsquo;s it.&lt;/p&gt;
&lt;h2 id=&#34;bonus-the-difference-between--and---in-hugo&#34;&gt;Bonus: The difference between &lt;code&gt;{{&lt;/code&gt; and &lt;code&gt;{{-&lt;/code&gt; in Hugo&lt;/h2&gt;
&lt;p&gt;You may notice that the template code is changed into &lt;code&gt;{{-&lt;/code&gt; from &lt;code&gt;{{&lt;/code&gt;. As a newbie in Hugo I checked &lt;a href=&#34;https://gohugo.io/templates/introduction/#whitespace&#34;&gt;the Hugo&amp;rsquo;s official documentation about &lt;em&gt;whitespace&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;hellip; the ability to trim the whitespace from either side of a Go tag &amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This &lt;code&gt;-&lt;/code&gt; notation is introduced in Go 1.6.&lt;/p&gt;
&lt;p&gt;The following example (from the documentation):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;{{&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Title&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;}}&lt;/span&gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;{{-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Title&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;-}}&lt;/span&gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Which will output:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  Hello, World!
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;Hello, World!&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In other words, that&amp;rsquo;s the &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim&#34;&gt;&lt;code&gt;trim()&lt;/code&gt;&lt;/a&gt; in JavaScript. That&amp;rsquo;s the &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/system.string.trim&#34;&gt;&lt;code&gt;String.Trim()&lt;/code&gt;&lt;/a&gt; in C#.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The default RSS feed in Hugo site shows &lt;em&gt;article abstract&lt;/em&gt; only. By defining a custom &lt;code&gt;rss.xml&lt;/code&gt; template and replacing &lt;code&gt;{{ .Summary | html }}&lt;/code&gt; with &lt;code&gt;{{- .Content | html -}}&lt;/code&gt; in the &lt;code&gt;&amp;lt;description&amp;gt;&lt;/code&gt; tag you will get the article&amp;rsquo;s full content in the re-generated RSS xml files.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>The Perks of Being a Mac (or FreeBSD) user</title>
      <link>https://blog.lofibean.cc/posts/the-perks-of-being-a-mac-or-freebsd-user/</link>
      <pubDate>Sun, 28 Jun 2020 12:28:38 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/the-perks-of-being-a-mac-or-freebsd-user/</guid>
      
        <description>&lt;blockquote&gt;
&lt;p&gt;ğŸš¨ Note: This is not a technical reading. If you want to have some fun and practice your &lt;code&gt;ls&lt;/code&gt; and &lt;code&gt;cat&lt;/code&gt; skills, this article may suit you.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#misc-file&#34;&gt;Misc. files of the OS&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#meaning-of-flowers&#34;&gt;The meaning of flowers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#the-bday-guide&#34;&gt;The birthday present guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#mac-is-a-secret-fan-of&#34;&gt;Mac is a secret fan of&amp;hellip;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#bonus-recipe&#34;&gt;Bonus: the missing recipe&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;misc-file&#34;&gt;Misc. Files of the OS&lt;/h2&gt;
&lt;p&gt;I found some interesting files under &lt;code&gt;/usr/share/misc&lt;/code&gt; of my MacBook:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   3.1K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; ascii
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   374B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; birthtoken
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   2.9K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; eqnchar
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   1.4K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; flowers
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   508B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; getopt
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   941B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; mail.help
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   1.3K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; mail.tildehelp
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   310B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; man.template
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   948B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; mdoc.template
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   425B Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; operator
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel    78K May &lt;span style=&#34;color:#ae81ff&#34;&gt;27&lt;/span&gt; 11:38 trace.codes
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel    13K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; units.lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;meaning-of-flowers&#34;&gt;The Meaning of Flowers&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;/usr/share/misc/flowers&lt;/code&gt; lists out the meaning of flowers&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. Check this out if you are going to buy some flowers but you don&amp;rsquo;t know what you should buy.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Flower : Meaning
#	@(#)flowers	8.1 (Berkeley) 6/8/93
#
# Upside down reverses the meaning.
African violet:Such worth is rare.
Apple blossom:Preference.
Bachelor&#39;s button:Celibacy.
Bay leaf:I change but in death.
Camelia:Reflected loveliness.
Chrysanthemum, other color:Slighted love.
Chrysanthemum, red:I love.
Chrysanthemum, white:Truth.
Clover:Be mine.
Crocus:Abuse not.
Daffodil:Innocence.
Forget-me-not:True love.
Fuchsia:Fast.
Gardenia:Secret, untold love.
Honeysuckle:Bonds of love.
Ivy:Friendship, fidelity, marriage.
Jasmine:Amiability, transports of joy, sensuality.
Leaves (dead):Melancholy.
Lilac:Youthful innocence.
Lilly of the valley:Return of happiness.
Lilly:Purity, sweetness.
Magnolia:Dignity, perseverance.
Marigold:Jealousy.
Mint:Virtue.
Orange blossom:Your purity equals your loveliness.
Orchid:Beauty, magnificence.
Pansy:Thoughts.
Peach blossom:I am your captive.
Petunia:Your presence soothes me.
Poppy:Sleep.
Rose, any color:Love.
Rose, deep red:Bashful shame.
Rose, single, pink:Simplicity.
Rose, thornless, any color:Early attachment.
Rose, white:I am worthy of you.
Rose, yellow:Decrease of love, rise of jealousy.
Rosebud, white:Girlhood, and a heart ignorant of love.
Rosemary:Remembrance.
Sunflower:Haughtiness.
Tulip, red:Declaration of love.
Tulip, yellow:Hopeless love.
Violet, blue:Faithfulness.
Violet, white:Modesty.
Zinnia:Thoughts of absent friends.
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;the-bday-guide&#34;&gt;The Birthday Present Guide&lt;/h2&gt;
&lt;p&gt;Check out the &lt;code&gt;/usr/share/misc/birthtoken&lt;/code&gt;&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt; and see which gem and flower (looks like someone in Berkeley knows about the flowers really well) you should buy for your friends!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;ldquo;Oh why you choose this gem and that flower as the present?&amp;quot;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&amp;ldquo;Um&amp;hellip; that&amp;rsquo;s my computer&amp;rsquo;s idea&amp;hellip;&amp;quot;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;more-about-perl-and-ruby&#34;&gt;More About Perl and Ruby&lt;/h3&gt;
&lt;p&gt;The creator of &lt;a href=&#34;https://www.ruby-lang.org&#34;&gt;Ruby&lt;/a&gt; chose the name &lt;em&gt;Ruby&lt;/em&gt; because it was &lt;a href=&#34;https://ruby-doc.org/docs/ruby-doc-bundle/FAQ/FAQ.html&#34;&gt;the birthstone of one of his colleagues&lt;/a&gt; and that is the gem right after Pearl (&lt;a href=&#34;https://www.perl.org/&#34;&gt;Perl&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lesson learnt:&lt;/strong&gt; when you try to name a new language you invented, you should check this file out!&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Birthday : Birth Stone : Birth Flower
#	@(#)birthtoken	8.1 (Berkeley) 6/8/93
January:Garnet:Carnation
February:Amethyst:Violet
March:Aquamarine:Jonquil
April:Diamond:Sweetpea
May:Emerald:Lily Of The Valley
June:Pearl:Rose
July:Ruby:Larkspur
August:Peridot:Gladiolus
September:Sapphire:Aster
October:Opal:Calendula
November:Topaz:Chrysanthemum
December:Turquoise:Narcissus
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;mac-is-a-secret-fan-of&#34;&gt;Mac is a Secret Fan of&amp;hellip;&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;/usr/share/calendar&lt;/code&gt; folder contains some useful calendars but this one really catches my eye:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root  wheel   1.4K Dec &lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt; calendar.lotr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is a timeline of the important events happened in &lt;em&gt;The Lord Of The Rings&lt;/em&gt;&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/*
 * Lord Of The Rings
 *
 * $FreeBSD: src/usr.bin/calendar/calendars/calendar.lotr,v 1.2 2003/10/09 00:31:48 grog Exp $
 */

#ifndef _calendar_lotr_
#define _calendar_lotr_

01/05	Fellowship enters Moria
01/09	Fellowship reaches Lorien
01/17	Passing of Gandalf
02/07	Fellowship leaves Lorien
02/17	Death of Boromir
02/20	Meriadoc &amp;amp; Pippin meet Treebeard
02/22	Passing of King Elessar
02/24	Ents destroy Isengard
02/26	Aragorn takes the Paths of the Dead
03/05	Frodo &amp;amp; Samwise encounter Shelob
03/08	Deaths of Denethor &amp;amp; Theoden
03/18	Destruction of the Ring
03/29	Flowering of the Mallorn
04/04	Gandalf visits Bilbo
04/17	An unexpected party
04/23	Crowning of King Elessar
05/19	Arwen leaves Lorien to wed King Elessar
06/11	Sauron attacks Osgiliath
06/13	Bilbo returns to Bag End
06/23	Wedding of Elessar &amp;amp; Arwen
07/04	Gandalf imprisoned by Saruman
07/24	The ring comes to Bilbo
07/26	Bilbo rescued from Wargs by Eagles
08/03	Funeral of King Theoden
08/29	Saruman enters the Shire
09/10	Gandalf escapes from Orthanc
09/14	Frodo &amp;amp; Bilbo&#39;s birthday
09/15	Black riders enter the Shire
09/18	Frodo and company rescued by Bombadil
09/28	Frodo wounded at Weathertop
10/05	Frodo crosses bridge of Mitheithel
10/16	Boromir reaches Rivendell
10/17	Council of Elrond
10/25	End of War of the Ring
11/16	Bilbo reaches the Lonely Mountain
12/05	Death of Smaug
12/16	Fellowship begins Quest

#endif /* !_calendar_lotr_ */
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;bonus-recipe&#34;&gt;Bonus: the missing recipe&lt;/h2&gt;
&lt;p&gt;In the eariler versions of the macOS, &lt;strong&gt;a hidden cookie recipe&lt;/strong&gt; can be found by typing this command in the Terminal:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Open /usr/share/emacs/22.1/etc/COOKIES
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Unforrunately in the latest macOS this file is gone (together with &lt;code&gt;/usr/share/emacs&lt;/code&gt;). We can only check this out &lt;a href=&#34;https://opensource.apple.com/source/emacs/emacs-96/emacs/etc/COOKIES.auto.html&#34;&gt;on the Apple Open Source website&lt;/a&gt;&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/lattera/freebsd/blob/master/share/misc/flowers&#34;&gt;https://github.com/lattera/freebsd/blob/master/share/misc/flowers&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/lattera/freebsd/blob/master/share/misc/birthtoken&#34;&gt;https://github.com/lattera/freebsd/blob/master/share/misc/birthtoken&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://opensource.apple.com/source/misc_cmds/misc_cmds-31/calendar/calendars/calendar.lotr.auto.html&#34;&gt;https://opensource.apple.com/source/misc_cmds/misc_cmds-31/calendar/calendars/calendar.lotr.auto.html&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:4&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://opensource.apple.com/source/emacs/emacs-96/emacs/etc/COOKIES.auto.html&#34;&gt;https://opensource.apple.com/source/emacs/emacs-96/emacs/etc/COOKIES.auto.html&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:4&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
      
    </item>
    
    <item>
      <title>ğŸ Battling With Gulp and Node</title>
      <link>https://blog.lofibean.cc/posts/battling-with-gulp-and-node/</link>
      <pubDate>Sat, 27 Jun 2020 16:03:12 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/battling-with-gulp-and-node/</guid>
      
        <description>&lt;h2 id=&#34;-problem&#34;&gt;ğŸ˜¨ Problem&lt;/h2&gt;
&lt;p&gt;When I was building a website using &lt;code&gt;gulp@^3.9.0&lt;/code&gt; to compile sass on the build server with Node.js v12 installed, it failed.&lt;/p&gt;
&lt;p&gt;Here are (part of) the errors shown in the console:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-systemverilog&#34; data-lang=&#34;systemverilog&#34;&gt;error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;v v12&lt;span style=&#34;color:#ae81ff&#34;&gt;.18.0&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gyp &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;v v3&lt;span style=&#34;color:#ae81ff&#34;&gt;.8.0&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; ok 
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	Build failed &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; error code: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; code ELIFECYCLE
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; errno &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sass@&lt;span style=&#34;color:#ae81ff&#34;&gt;4.9.3&lt;/span&gt; postinstall: &lt;span style=&#34;color:#66d9ef&#34;&gt;`node&lt;/span&gt; scripts&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;build.js&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;`&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; Exit status &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; 
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; Failed at the node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sass@&lt;span style=&#34;color:#ae81ff&#34;&gt;4.9.3&lt;/span&gt; postinstall script.
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; This is probably &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; a problem &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; npm. There is likely additional logging &lt;span style=&#34;color:#66d9ef&#34;&gt;output&lt;/span&gt; above.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(OK I know that&amp;rsquo;s not your fault, &lt;code&gt;npm&lt;/code&gt;.) Here is my &lt;code&gt;package.json&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;devDependencies&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^3.9.0&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-concat&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^2.6.0&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-minify-css&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^1.2.4&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-rename&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^1.2.2&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-sass&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^4.0.2&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-sourcemaps&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;-node-sass&#34;&gt;ğŸ˜ &lt;code&gt;node-sass&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I noticed that should be something wrong with &lt;code&gt;node-sass&lt;/code&gt;, which being used in &lt;code&gt;gulp-sass&lt;/code&gt;. I met this issues before and from my experience, &lt;a href=&#34;https://stackoverflow.com/a/45807410/13742790&#34;&gt;&lt;code&gt;node-sass&lt;/code&gt; will try to download the corresponding prebuilt binary&lt;/a&gt; base on your OS or build it locally using &lt;code&gt;python&lt;/code&gt;, &lt;code&gt;MSBuild&lt;/code&gt;, etc&amp;hellip; (That&amp;rsquo;s why you will met lots of questions in Stack Overflow asking &lt;strong&gt;&lt;code&gt;python2&lt;/code&gt; not found when installing &lt;code&gt;node-sass&lt;/code&gt;&lt;/strong&gt; ,  &lt;strong&gt;what&amp;rsquo;s wrong with my &lt;code&gt;node-sass&lt;/code&gt;&lt;/strong&gt; or &lt;strong&gt;I got a panic attack when dealing with &lt;code&gt;node-sass&lt;/code&gt; should I consult a developer or a doctor first?&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;For this &lt;code&gt;node-sass&lt;/code&gt; issue, &lt;a href=&#34;https://hisk.io/how-to-fix-node-js-gyp-err-cant-find-python-executable-python-on-windows/&#34;&gt;you can try to run this on Windows&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;npm install --global --production windows-build-tools
npm install node-gyp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Or try to delete &lt;code&gt;package-lock.json&lt;/code&gt; and &lt;code&gt;node_modules&lt;/code&gt; first and do a &lt;code&gt;npm install&lt;/code&gt; if you can install all packages successfully on let say Mac OS but failed on Windows.&lt;/p&gt;
&lt;p&gt;ğŸ‘†Those tricks saved me most of the time.&lt;/p&gt;
&lt;h4 id=&#34;i-just-want-to-get-my-css-files-back-and-you-told-me-i-have-to-install-this-and-that-and-download-node-npm-python-ms-build-tools-some-prebuilt-binaries-are-you-serious-node-sass&#34;&gt;&lt;del&gt;I just want to get my css files back and you told me I have to install this and that and download node npm python ms build tools some prebuilt binaries? Are you serious, node-sass?&lt;/del&gt;&lt;/h4&gt;
&lt;h3 id=&#34;-referenceerror-primordials-is-not-defined&#34;&gt;ğŸ˜‘ ReferenceError: primordials is not defined&lt;/h3&gt;
&lt;p&gt;After the &lt;code&gt;node-sass&lt;/code&gt; issue was solved, the build server ran the build jobs again and got these errors:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-systemverilog&#34; data-lang=&#34;systemverilog&#34;&gt;error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	fs.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	} &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; primordials;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    &lt;span style=&#34;color:#f92672&#34;&gt;^&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	ReferenceError: primordials is &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; defined
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at fs.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
## ( blah blah blah ) ##
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module._compile (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1138&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Object.Module._extensions..js (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1158&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module.load (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;986&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Function.Module._load (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;879&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module.require (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1026&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at require (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;helpers.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;72&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/a/55926692/13742790&#34;&gt;This answer from Stack Overflow&lt;/a&gt; states that it is due to Node.js v12 does not compatible with Gulp v3 &lt;strong&gt;and you need to upgrade Gulp to v4&lt;/strong&gt;. I know &lt;strong&gt;I should&lt;/strong&gt; do that but I also know that I will meet the &lt;a href=&#34;https://github.com/sindresorhus/del/issues/45&#34;&gt;Did you forget to signal async completion?&lt;/a&gt; issue which also will cause an epic fail of the build &lt;strong&gt;unless I re-write the gulp tasks&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t want to change my &lt;code&gt;gulpfile.js&lt;/code&gt; and I don&amp;rsquo;t want to upgrade &lt;code&gt;gulp&lt;/code&gt;. Not now.  That&amp;rsquo;s why I started searching for a solution without changing any configurations of the build server as well as the gulp setup in the project.&lt;/p&gt;
&lt;h2 id=&#34;-solution-adding-a-npm-shrinkwrapjson&#34;&gt;ğŸ˜€ Solution: adding a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Eventually I &lt;a href=&#34;https://stackoverflow.com/questions/55921442/how-to-fix-referenceerror-primordials-is-not-defined-in-node/58394828#58394828&#34;&gt;found a solution&lt;/a&gt; on how to handle this &amp;ldquo;Gulp VS Node&amp;rdquo; situation. What we need is create a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; file under the same directory with &lt;code&gt;package.json&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The content of the json file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;dependencies&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;graceful-fs&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4.2.3&amp;#34;&lt;/span&gt;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that I can build the project and finish all the gulp tasks without errors ğŸ‰.&lt;/p&gt;
&lt;h3 id=&#34;-so-whats-going-on&#34;&gt;ğŸ¤” So, what&amp;rsquo;s going on?&lt;/h3&gt;
&lt;p&gt;From the npm&amp;rsquo;s official documentation on the &lt;a href=&#34;https://docs.npmjs.com/cli/shrinkwrap&#34;&gt;&lt;code&gt;npm-shrinkwrap&lt;/code&gt; command&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This command repurposes package-lock.json into a publishable npm-shrinkwrap.json or simply creates a new one. The file created and updated by this command will then take precedence over any other existing or future package-lock.json files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And from the documentation on the &lt;a href=&#34;https://docs.npmjs.com/files/shrinkwrap.json&#34;&gt;&lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;hellip; Additionally, if both &lt;code&gt;package-lock.json&lt;/code&gt; and &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; are present in a package root, &lt;code&gt;package-lock.json&lt;/code&gt; will be ignored in favor of this file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In other words, this file has a &lt;em&gt;higher priority&lt;/em&gt; then &lt;code&gt;package-lock.json&lt;/code&gt;. However, why this file can solve the build error?&lt;/p&gt;
&lt;h4 id=&#34;thefs-module&#34;&gt;The&lt;code&gt;fs&lt;/code&gt; module&lt;/h4&gt;
&lt;p&gt;Node&amp;rsquo;s &lt;code&gt;fs&lt;/code&gt; module got some changes since &lt;strong&gt;v11.15&lt;/strong&gt; which cause the &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt; package does not work anymore. Unfortunately, &lt;code&gt;gulp@3.9.1&lt;/code&gt; depends on  &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt;. As a result, running the gulp tasks on Node.js v12 will cause the &lt;code&gt;primordials is not defined&lt;/code&gt; error.&lt;/p&gt;
&lt;h4 id=&#34;the-fix&#34;&gt;The fix&lt;/h4&gt;
&lt;p&gt;After we added the &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;, from my understanding it locked down the version of package(s) used by the execution environment to the version stated in that file (and ignore the setup in &lt;code&gt;package-lock.json&lt;/code&gt;.In the above case, the &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; tells Node.js 12 use &lt;code&gt;graceful-fs@4.2.3&lt;/code&gt; instead of &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt;. This combination works. Meanwhile, the &lt;code&gt;gulp&lt;/code&gt; package will still reference to the &lt;code&gt;package.json&lt;/code&gt; and &lt;code&gt;package-lock.json&lt;/code&gt; file and use the &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt; package. This combination also works.&lt;/p&gt;
&lt;h2 id=&#34;-conclusion&#34;&gt;ğŸ¯ Conclusion&lt;/h2&gt;
&lt;p&gt;I got some build errors when using &lt;code&gt;gulp@^3.9.0&lt;/code&gt; and &lt;code&gt;gulp-sass&lt;/code&gt; under Node.js 12. After I delete the &lt;code&gt;package-lock.json&lt;/code&gt; and  re-run &lt;code&gt;npm install&lt;/code&gt;, the sass problem solved. Next, I added a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; to (temporarily) solve the incompatable issue with old gulp running on new Node.js.&lt;/p&gt;
&lt;h4 id=&#34;can-i-call-this-the-node-version-of-dependency-hell1&#34;&gt;&lt;del&gt;Can I call this the Node version of &lt;strong&gt;dependency hell&lt;/strong&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;?&lt;/del&gt;&lt;/h4&gt;
&lt;h6 id=&#34;-references&#34;&gt;ğŸ”— references:&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://mejiblog.com/gulp-error/&#34;&gt;ReferenceError: primordials is not defined ã®è§£æ±ºæ–¹æ³•ã€å‚™å¿˜éŒ²ã€‘&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mejiblog.com/gulpfile-change/&#34;&gt;Task function must be specified è§£æ±ºæ–¹æ³•ã€å‚™å¿˜éŒ²ã€‘&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mafintosh/prebuildify-ci/issues/5#issuecomment-550867124&#34;&gt;Node 12: Errors with &amp;lsquo;primordials is not defined&amp;rsquo; #5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.icetutor.com/how-to-fix-referenceerror-primordials-is-not-defined-error/&#34;&gt;How to fix â€œReferenceError: primordials is not definedâ€ error&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://en.m.wikipedia.org/wiki/Dependency_hell&#34;&gt;https://en.m.wikipedia.org/wiki/Dependency_hell&lt;/a&gt;&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
      
    </item>
    
    <item>
      <title>ğŸ GitVersioning: &#39;ThisAssembly&#39; Is Inaccessible Due to Its Protection Level</title>
      <link>https://blog.lofibean.cc/posts/git-versioning-this-assembly-is-inaccessible-due-to-its-protection-level/</link>
      <pubDate>Thu, 25 Jun 2020 17:10:24 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/git-versioning-this-assembly-is-inaccessible-due-to-its-protection-level/</guid>
      
        <description>&lt;h2 id=&#34;-problem&#34;&gt;ğŸ˜¨ Problem&lt;/h2&gt;
&lt;p&gt;After I installed the &lt;strong&gt;&lt;a href=&#34;https://www.nuget.org/packages/Nerdbank.GitVersioning&#34;&gt;Nerdbank.GitVersioning&lt;/a&gt;&lt;/strong&gt; Nuget package in my .NET MVC app, the following error came out when I want to get the version using &lt;code&gt;ThisAssembly.AssemblyInformationalVersion&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;error CS0122: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ThisAssembly&amp;#39;&lt;/span&gt; is inaccessible due to its protection level
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I tried to install the package across all the projects in the same solution. It didn&amp;rsquo;t work.&lt;/p&gt;
&lt;p&gt;I tried to uninstall and re-ininstall the package. It didn&amp;rsquo;t work.&lt;/p&gt;
&lt;h2 id=&#34;-solution&#34;&gt;ğŸ˜€ Solution&lt;/h2&gt;
&lt;h3 id=&#34;csproj&#34;&gt;.csproj&lt;/h3&gt;
&lt;p&gt;Turns out there is something missing in my &lt;code&gt;.csproj&lt;/code&gt; file. I missed an &lt;code&gt;&amp;lt;Import&amp;gt;&lt;/code&gt; tag at the end of the file, just before the &lt;code&gt;&amp;lt;/Target&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Project=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Condition=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Exists(&amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And in the &lt;code&gt;EnsureNuGetPackageBuildImports&lt;/code&gt; target, add the following line:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Error&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Condition=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;!Exists(&amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Text=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$([System.String]::Format(&amp;#39;$(ErrorText)&amp;#39;, &amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;))&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In addition, the 1st &lt;code&gt;&amp;lt;PropertyGroup&amp;gt;&lt;/code&gt; should contain a pair of  &lt;code&gt;NuGetPackageImportStamp&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;NuGetPackageImportStamp&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/NuGetPackageImportStamp&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;assemblyinfocs&#34;&gt;&lt;code&gt;AssemblyInfo.cs&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I also removed the following lines in &lt;code&gt;Properties/AssemblyInfo.cs&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c#&#34; data-lang=&#34;c#&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[assembly: AssemblyVersion(&amp;#34;1.0.0.0&amp;#34;)]&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;[assembly: AssemblyFileVersion(&amp;#34;1.0.0.0&amp;#34;)]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;versionjson&#34;&gt;&lt;code&gt;version.json&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;At the root directory of the &lt;strong&gt;project&lt;/strong&gt;, I added a &lt;code&gt;version.json&lt;/code&gt; file with the following content:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://raw.githubusercontent.com/dotnet/Nerdbank.GitVersioning/master/src/NerdBank.GitVersioning/version.schema.json&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1.0.0&amp;#34;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, &lt;code&gt;ThisAssembly&lt;/code&gt; is back and I can read the git version info successfully.&lt;/p&gt;
&lt;h6 id=&#34;-references&#34;&gt;ğŸ”— references:&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/blob/master/doc/dotnet.md&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/blob/master/doc/dotnet.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/issues/449&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/issues/449&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/issues/404&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/issues/404&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h6 id=&#34;-cover-image-grace-hoppers-operational-logbook-for-the-harvard-mark-ii-computerhttpswwwbusinessinsidercomauharvard-mark-i-grace-hopper-bug-2015-7&#34;&gt;ğŸ–¼ cover image: &lt;a href=&#34;https://www.businessinsider.com.au/harvard-mark-i-grace-hopper-bug-2015-7&#34;&gt;Grace Hopperâ€™s operational logbook for the Harvard Mark II computer&lt;/a&gt;&lt;/h6&gt;
</description>
      
    </item>
    
    <item>
      <title>Documentation Makes Easy With MkDocs and GitLab Pages</title>
      <link>https://blog.lofibean.cc/posts/documentation-makes-easy-with-mkdocs-and-gitlab-pages/</link>
      <pubDate>Fri, 12 Jun 2020 19:37:00 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/documentation-makes-easy-with-mkdocs-and-gitlab-pages/</guid>
      
        <description>&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;I created a static website using &lt;strong&gt;MkDocs&lt;/strong&gt; and deployed to &lt;a href=&#34;https://docs.gitlab.com/ee/user/project/pages/&#34;&gt;&lt;strong&gt;GitLab Pages&lt;/strong&gt;&lt;/a&gt;. This is what I did: &lt;a href=&#34;https://bemn-proof-of-concept.gitlab.io/mkdoc/&#34;&gt;https://bemn-proof-of-concept.gitlab.io/mkdoc/&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#intro&#34;&gt;MkDocs&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#preparation&#34;&gt;Preparation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#up-and-run&#34;&gt;Up and Run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#add-a-new-page&#34;&gt;Add a new page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#theming&#34;&gt;Theming&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#custom-resources&#34;&gt;Custom Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#gitlab-pages&#34;&gt;GitLab Pages&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#gitlab-ci-yml&#34;&gt;.gitlab-ci.yml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#build-and-deploy&#34;&gt;Build and Deploy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#conclusion&#34;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;intro&#34;&gt;MkDocs&lt;/h2&gt;
&lt;p&gt;From &lt;a href=&#34;https://www.mkdocs.org/&#34;&gt;MkDocs&#39; official website&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;MkDocs is a &lt;strong&gt;fast&lt;/strong&gt;, &lt;strong&gt;simple&lt;/strong&gt; and &lt;strong&gt;downright gorgeous&lt;/strong&gt; static site generator that&amp;rsquo;s geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In my opinion, setting up a static site using MkDocs is really straightforward. It&amp;rsquo;s easy to change the theme and insert custom styles/scripts. &lt;a href=&#34;https://en.m.wikipedia.org/wiki/KISS_principle&#34;&gt;Keep it simple, stupid&lt;/a&gt;. That&amp;rsquo;s what I need.&lt;/p&gt;
&lt;h3 id=&#34;preparation&#34;&gt;Preparation&lt;/h3&gt;
&lt;p&gt;Make sure that you have the following tools:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;python 3.x&lt;/strong&gt; and &lt;strong&gt;pip&lt;/strong&gt;. Install it via &lt;a href=&#34;https://www.python.org/downloads/&#34;&gt;executable&lt;/a&gt; from the official website, or using tools like &lt;a href=&#34;https://brew.sh/&#34;&gt;Homebrew&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ python --version
Python 3.8.2
$ pip --version
pip 20.0.2 from /usr/local/lib/python3.8/site-packages/pip &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;python 3.8&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;a &lt;strong&gt;GitLab&lt;/strong&gt; account. You can use other service like &lt;a href=&#34;https://pages.github.com/&#34;&gt;Github Pages&lt;/a&gt;, Amazon S3, etc.&lt;/li&gt;
&lt;li&gt;(optional) &lt;a href=&#34;https://www.markdownguide.org/cheat-sheet/&#34;&gt;a markdown cheatsheet&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(For me, the most difficult part is how to get the python and pip versions right. In Mac the built-in python version is 2.7 but we need python 3 to install &lt;code&gt;pip&lt;/code&gt;.)&lt;/p&gt;
&lt;h3 id=&#34;up-and-run&#34;&gt;Up and Run&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ pip install mkdocs
$ mkdocs --version
mkdocs, version 1.1.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Assuming that your project folder is &lt;code&gt;doc-project&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs new doc-project
$ cd doc-project
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A MkDocs project is then created with the following folder structure:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;doc-project
â”œâ”€â”€ docs
â”‚Â Â  â””â”€â”€ index.md
â”œâ”€â”€ img
â”‚Â Â  â””â”€â”€ favicon.ico
â””â”€â”€ mkdocs.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Let&amp;rsquo;s run the site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs serve
INFO    -  Building documentation...
INFO    -  Cleaning site directory
INFO    -  Documentation built in 1.65 seconds
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;I &lt;span style=&#34;color:#ae81ff&#34;&gt;200612&lt;/span&gt; 23:30:19 server:334&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; Serving on http://127.0.0.1:8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And check it out at &lt;a href=&#34;http://127.0.0.1:8000&#34;&gt;http://127.0.0.1:8000&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/01_welcome.png&#34; alt=&#34;Running MkDocs&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;add-a-new-page&#34;&gt;Add a new page&lt;/h3&gt;
&lt;h4 id=&#34;the-content&#34;&gt;The content&lt;/h4&gt;
&lt;p&gt;Remember, all the documents should place under &lt;code&gt;docs&lt;/code&gt;. Let&amp;rsquo;s create an Overview page:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cd docs
$ touch overview.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, add some content to &lt;code&gt;overview.md&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;the-menu&#34;&gt;The menu&lt;/h4&gt;
&lt;p&gt;If you want the visitors to reach the overview page, you need to add an url in the menu. Let&amp;rsquo;s edit &lt;code&gt;mkdocs.yml&lt;/code&gt;, the site config file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## change your site name here.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Overview&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;overview.md&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## add this line.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You will see a new link called &lt;em&gt;Overview&lt;/em&gt; in the menu. If you want to set your site name now, change the value of &lt;code&gt;site_name&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So that&amp;rsquo;s it. That&amp;rsquo;s how to add a new page.&lt;/p&gt;
&lt;h3 id=&#34;theming&#34;&gt;Theming&lt;/h3&gt;
&lt;p&gt;You can apply a custom theme to MkDocs. &lt;a href=&#34;https://github.com/mkdocs/mkdocs/wiki/MkDocs-Themes&#34;&gt;This page&lt;/a&gt; contains many themes contributed by the community.&lt;/p&gt;
&lt;p&gt;In this section, I will apply the &lt;a href=&#34;https://github.com/squidfunk/mkdocs-material&#34;&gt;Material Design theme&lt;/a&gt; to my MkDocs site.&lt;/p&gt;
&lt;p&gt;Stop running your site and install the theme by:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ pip install mkdocs-material
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Update the &lt;code&gt;mkdocs.yml&lt;/code&gt; again:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Overview&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;overview.md&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Add this section&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;theme&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;material&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;palette&lt;/span&gt;: &lt;span style=&#34;color:#75715e&#34;&gt;## Add this sub-section if you want to change the theme color&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;scheme&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;primary&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;accent&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;orange&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Start the site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You will see MkDocs is dressing the amber Material Design theme.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/02_theming.png&#34; alt=&#34;Material Design theme with amber scheme&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;custom-resources&#34;&gt;Custom Resources&lt;/h3&gt;
&lt;p&gt;Sometimes you may want to add custom CSS or JS. In MkDocs, you can do it by adding &lt;code&gt;extra_css&lt;/code&gt; and &lt;code&gt;extra_javascript&lt;/code&gt; sections in &lt;code&gt;mkdocs.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I created a &lt;code&gt;catalog&lt;/code&gt; page which contains a table written in markdown. Also, I want to apply &lt;a href=&#34;https://www.datatables.net/&#34;&gt;jQuery DataTables&lt;/a&gt; to make the table more interactive. Therefore, I added the related js libraries and related css file to MkDocs. You can see the result &lt;a href=&#34;https://bemn-proof-of-concept.gitlab.io/mkdoc/catalog/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Exercice:&lt;/strong&gt; create a &lt;code&gt;catalog.md&lt;/code&gt; file and add a markdown table in it.&lt;/p&gt;
&lt;p&gt;Next, add the custom resource sections to the config file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Catalog&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;catalog.md&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## The catalog page you created in the exercise.&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;theme&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;material&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;palette&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;scheme&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;primary&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;accent&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;orange&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Custom js files.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;extra_javascript&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://code.jquery.com/jquery-3.5.1.min.js&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;scripts/site.js&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Custom css files.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;extra_css&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Create a custom js file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cd docs
$ mkdir scripts
$ cd scripts
$ touch site.js
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now in your &lt;code&gt;site.js&lt;/code&gt; file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;$&lt;/span&gt;(document).&lt;span style=&#34;color:#a6e22e&#34;&gt;ready&lt;/span&gt;( &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; () {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;$&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;table&amp;#39;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;DataTable&lt;/span&gt;();
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Afer that, you should be able to see an interactive table in the catalog page.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/03_with-custom-resources.png&#34; alt=&#34;With jQuery Datatables&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;gitlab-pages&#34;&gt;GitLab Pages&lt;/h2&gt;
&lt;p&gt;Create a GitLab repository under your personal space or a project group. The url will be something like &lt;code&gt;https://gitlab.com/{username or project group name}/{repo name}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Clone the repo you created and create the following items:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdir src
$ touch .gitlab-ci.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Place your MkDoc items (i.e. the &lt;code&gt;doc-project&lt;/code&gt; folder) under &lt;code&gt;src&lt;/code&gt;. See the following folder structure:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(root of the repo)
â”œâ”€â”€ .gitlab-ci.yml
â””â”€â”€ src
    â””â”€â”€ doc-project
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;gitlab-ci-yml&#34;&gt;.gitlab-ci.yml&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; is a GitLab-specific file. GitLab will read and run the steps in the file. We need to tell GitLab how to generate and deploy our static MkDocs website. In this file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In .gitlab-ci.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;python:3.8-buster&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## MkDocs requies python.&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;pages&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;stage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;deploy&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## tell GitLab to deploy the website in this step.&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;before_script&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;pip install mkdocs&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## install MkDocs.&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;pip install mkdocs-material&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## install the theme.&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;cd ./src/doc-project&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;mkdocs build&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;## built the site.&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;mv site ../../public&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;artifacts&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;paths&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;public&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;## Uncomment the following section if you want to run this step under master branch only.&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# only:&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# - master &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So basically it tells GitLab to install the tools required under python 3.8 environment and deploy the website after the site is generated.&lt;/p&gt;
&lt;p&gt;Try to run the following command if you want to generate the site locally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs build
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The generated site is located under  &lt;code&gt;doc-project/site/&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;In order to display the website properly, you need to place the generated site under the &lt;code&gt;public&lt;/code&gt; folder and let GitLab knows the &lt;strong&gt;artifact&lt;/strong&gt; inside is the website you want to deploy.&lt;/p&gt;
&lt;h3 id=&#34;build-and-deploy&#34;&gt;Build and Deploy&lt;/h3&gt;
&lt;p&gt;Push the code to GitLab and the site should build automatically. Check out the status of the build under &lt;strong&gt;CI/CD&lt;/strong&gt; &amp;ndash;&amp;gt;  &lt;strong&gt;Pipelines&lt;/strong&gt;.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&#34;./img/04_gitlab-ci-cd-panel.png&#34;
         alt=&#34;CI/CD panel in GitLab&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;A green tag showing passed for each successfully build.&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Check out your website now. The url is &lt;code&gt;https://{username or project group name}.gitlab.io/{repo name}/&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;In this tutorial, we created a static site with custom theme, styles and js library by using MkDocs. After that, we set up a CI/CD pipeline on GitLab for building and deploying this static site to GitLab Pages.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>A Tale of Two Caches: Redis and the cache helper</title>
      <link>https://blog.lofibean.cc/posts/a-tale-of-two-caches-redis-and-cache-helper/</link>
      <pubDate>Thu, 11 Jun 2020 21:06:59 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/a-tale-of-two-caches-redis-and-cache-helper/</guid>
      
        <description>&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;
&lt;p&gt;Recently our team started a new project: a showcase page under our main website. The website is read-only and the content won&amp;rsquo;t change frequently so we can have an aggressive caching policy.&lt;/p&gt;
&lt;p&gt;I built this &lt;strong&gt;MVC&lt;/strong&gt; web app using &lt;strong&gt;.NET Core 3.1&lt;/strong&gt; and deploy it as an IIS sub-site under the main website (which is a &lt;strong&gt;.NET Framework&lt;/strong&gt; web app running on the IIS).&lt;/p&gt;
&lt;h3 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#redis&#34;&gt;Redis&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#redis-nuget&#34;&gt;NuGet package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-appsettings&#34;&gt;appsettings.json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-startup&#34;&gt;Startup.cs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-cache-service&#34;&gt;CacheService&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-controller&#34;&gt;Controller&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper&#34;&gt;Cache Tag Helper&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper-example&#34;&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper-exaplain&#34;&gt;Explaination&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#bonus&#34;&gt;Bonus: A note on @helper and other HTML helpers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;redis&#34;&gt;Redis&lt;/h2&gt;
&lt;h3 id=&#34;why&#34;&gt;Why?&lt;/h3&gt;
&lt;p&gt;We are using &lt;a href=&#34;https://redis.io/&#34;&gt;Redis&lt;/a&gt; because it is simple, fast and we are already using it across all the main websites.&lt;/p&gt;
&lt;h3 id=&#34;how&#34;&gt;How?&lt;/h3&gt;
&lt;p&gt;Here are some highlights:&lt;/p&gt;
&lt;h4 id=&#34;redis-nuget&#34;&gt;1. NuGet packages&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2.1.30&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.Core&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.Newtonsoft&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.AspNetCore&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;StackExchange.Redis.Extensions.Newtonsoft&lt;/code&gt; is optional. &lt;a href=&#34;https://devblogs.microsoft.com/dotnet/try-the-new-system-text-json-apis/&#34;&gt;Start from .NET Core 3.0&lt;/a&gt; the default Json serializer will be &lt;code&gt;System.Text.Json&lt;/code&gt;. If you want to use &lt;code&gt;Newtonsoft.Json&lt;/code&gt; then you will need this package in your project.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;StackExchange.Redis.Extensions.Core&lt;/code&gt; and &lt;code&gt;StackExchange.Redis.Extensions.AspNetCore&lt;/code&gt; are the useful package to connect/read/write Redis easier. Read &lt;a href=&#34;https://stackexchange-redis-extensinos.gitbook.io/stackexchange-redis-extensions/&#34;&gt;this documentation&lt;/a&gt; for more details.&lt;/p&gt;
&lt;h4 id=&#34;redis-appsettings&#34;&gt;2. appsettings.json&lt;/h4&gt;
&lt;p&gt;A typical .NET Core project should have an &lt;code&gt;appsettings.json&lt;/code&gt;. Add the following section:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Redis&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;AllowAdmin&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Ssl&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConnectTimeout&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;6000&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConnectRetry&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Database&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Hosts&amp;#34;&lt;/span&gt;: [
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;my-secret-redis-host.com&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Port&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6379&amp;#34;&lt;/span&gt;
      }
    ]
  } 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here, &lt;code&gt;my-secret-redis-host.com&lt;/code&gt; is the Redis host and We are using the database no. &lt;code&gt;0&lt;/code&gt;. You can set multiple hosts. You can see a detailed configuration &lt;a href=&#34;https://stackexchange-redis-extensinos.gitbook.io/stackexchange-redis-extensions/configuration/json-configuration&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&#34;redis-startup&#34;&gt;3. Startup.cs&lt;/h4&gt;
&lt;p&gt;Add the following code in &lt;code&gt;ConfigureServices()&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; redisConfiguration = Configuration.GetSection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Redis&amp;#34;&lt;/span&gt;).Get&amp;lt;RedisConfiguration&amp;gt;();
services.AddStackExchangeRedisExtensions&amp;lt;NewtonsoftSerializer&amp;gt;(redisConfiguration);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;redis-cache-service&#34;&gt;5. CacheService&lt;/h4&gt;
&lt;p&gt;I created a &lt;code&gt;CacheService.cs&lt;/code&gt; to help me reading/writing data in Redis. In this service:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CacheService(RedisConfiguration redisConfiguration, ILogger&amp;lt;RedisCacheConnectionPoolManager&amp;gt; poolLogger)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; connectionPoolManager = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RedisCacheConnectionPoolManager(redisConfiguration, poolLogger);
        &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;redisClient = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RedisCacheClient(connectionPoolManager, serializer, redisConfiguration);
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;(Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when connection to Redis servers. */&lt;/span&gt;
    }
    &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;cacheDuration = &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// cache period in seconds
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We need a method to write data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;&amp;gt; AddAsync(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; key, &lt;span style=&#34;color:#66d9ef&#34;&gt;object&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; added = &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;redisClient.GetDbFromConfiguration().AddAsync(key, &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;, DateTimeOffset.Now.AddSeconds(&lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;cacheDuration));
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; added;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when writing data to Redis */&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And we need a method to get cached data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;T&amp;gt; TryGetAsync&amp;lt;T&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; key)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;redisClient.GetDbFromConfiguration().ExistsAsync(key))
        {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;redisClient.GetDbFromConfiguration().GetAsync&amp;lt;T&amp;gt;(key);
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;
        {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;
        }
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;(Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when writing data to Redis */&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I intentionally name this method &lt;code&gt;TryGetAsync()&lt;/code&gt; because the cache may not exist or already expired when you try to get it from Redis.&lt;/p&gt;
&lt;p&gt;After that, let&amp;rsquo;s go back to &lt;code&gt;Startup.cs&lt;/code&gt; and register this service in &lt;code&gt;ConfigureService()&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;services.AddTransient&amp;lt;CacheService&amp;gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Remember to register this service &lt;strong&gt;after&lt;/strong&gt; &lt;code&gt;services.AddStackExchangeRedisExtensions()&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;redis-controller&#34;&gt;5. Controller&lt;/h4&gt;
&lt;p&gt;Inject the &lt;code&gt;CacheService&lt;/code&gt; to the controller:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; DemoController(CacheService cacheService)
{
    &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;cacheService = cacheService;
}


&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;IActionResult&amp;gt; Demo(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; cacheKey = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;DemoApp:{name}&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#75715e&#34;&gt;// Try to get cached value from Redis.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; cachedResult = &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;cacheService.TryGetAsync&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&amp;gt;(cacheKey);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; != cachedResult)
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; View(cachedResult);
    }

    &lt;span style=&#34;color:#75715e&#34;&gt;// Add a new entry to Redis before returning the message.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; message = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;Hello, {name}&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; != sections &amp;amp;&amp;amp; sections.Any())
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;_&lt;/span&gt;cacheService.AddAsync(cacheKey, message);
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; View(message);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Explain Like I&amp;rsquo;m Five&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;You ask the shopkeeper in &lt;code&gt;Demo&lt;/code&gt; bookstore do they have a specific book &lt;code&gt;name&lt;/code&gt;. First, the shopkeeper looks for the book on the bookshelf named &lt;code&gt;Redis&lt;/code&gt;. If he finds that book, he takes it out and gives it to you.&lt;/p&gt;
&lt;p&gt;If your book does not exist in the &lt;code&gt;Redis&lt;/code&gt; bookstore, he has to go out and buy that book for you(!). However, he buys 2 identical copies. He gives you one and puts the other one on the &lt;code&gt;Redis&lt;/code&gt; bookshelf, just in case another customer want that book later.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cache-tag-helper&#34;&gt;Cache Tag Helper&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/built-in/cache-tag-helper?view=aspnetcore-3.1&#34;&gt;Cache Tag Helper&lt;/a&gt; is a tag that you can use in a &lt;strong&gt;.NET Core MVC&lt;/strong&gt; app. Content encolsed by this &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; tag will be cached in the internal cache provider.&lt;/p&gt;
&lt;h3 id=&#34;cache-tag-helper-example&#34;&gt;Example&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;expires-after&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@TimeSpan.FromSeconds(60)&amp;#34;&lt;/span&gt; 
       &lt;span style=&#34;color:#a6e22e&#34;&gt;vary-by-route&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; 
       &lt;span style=&#34;color:#a6e22e&#34;&gt;vary-by-user&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt;&amp;gt;
	@System.DateTime.Now
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;cache&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;cache-tag-helper-exaplain&#34;&gt;Explaination&lt;/h3&gt;
&lt;p&gt;In the above example, some attributes is set in the &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;expires-after&lt;/code&gt;: how long (in seconds) will this cache last for.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vary-by-route&lt;/code&gt;: different copy will be cached when the route has a different value in the &lt;code&gt;name&lt;/code&gt;param.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vary-by-user&lt;/code&gt;: different user will see different cached copies.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;how-can-i-know-if-it-is-working&#34;&gt;How can I know if it is working?&lt;/h3&gt;
&lt;p&gt;You will see the value rendered in the above example won&amp;rsquo;t change for 60 seconds even &lt;code&gt;System.DateTime.Now&lt;/code&gt; should show the current time.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;bonus&#34;&gt;Bonus: A note on &lt;code&gt;@helper&lt;/code&gt; and other HTML helpers&lt;/h2&gt;
&lt;p&gt;In the old days we can define some &lt;code&gt;@helper&lt;/code&gt; functions in the razor view and (re)use it in the view. It&amp;rsquo;s being removed since .NET Core 3.0 because the design of &lt;code&gt;@helper&lt;/code&gt; function does not compatible with async Razor content anymore.&lt;/p&gt;
&lt;h3 id=&#34;successor-of-the-html-helpers&#34;&gt;Successor of the HTML helpers?&lt;/h3&gt;
&lt;p&gt;You can use the &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1&#34;&gt;&lt;strong&gt;Tag Helpers in ASP.NET Core&lt;/strong&gt;&lt;/a&gt;. Yes, the &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; Tag Helper is one of the &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1#built-in-aspnet-core-tag-helpers&#34;&gt;built-in Tag Helpers in .NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In addition, you can use the &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.rendering.htmlhelperpartialextensions.partialasync?view=aspnetcore-3.1&#34;&gt;&lt;code&gt;PartialAsync()&lt;/code&gt; method&lt;/a&gt;  to render the partial HTML markup &lt;strong&gt;asynchronously&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;@await Html.PartialAsync(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;_PartialName&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;More references on the HTML helpers and Tag Helpers:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/aspnet/Mvc/issues/4127&#34;&gt;What happened to the @helper directive in Razor ?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/aspnet/Razor/issues/281&#34;&gt;Remove the @helper directive from Razor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dannyvanderkraan.wordpress.com/2016/04/19/asp-net-core-1-0-goodbye-html-helpers-and-hello-taghelpers/&#34;&gt;ASP.NET Core 1.0: Goodbye HTML helpers and hello TagHelpers!&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>â˜•ï¸ Fantastic Beans and Where to Find Them</title>
      <link>https://blog.lofibean.cc/posts/fantastic-beans-and-where-to-find-them/</link>
      <pubDate>Thu, 11 Jun 2020 10:39:39 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/fantastic-beans-and-where-to-find-them/</guid>
      
        <description>&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;In short: I found some local shops which selling pretty good beans. In Hong Kong.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;During the 2020 pandamic, it&amp;rsquo;s not easy to buy beans overseas. However, it gave me a great opportunity to search for some good beans in Hong Kong. Plus, I have more time to stay at home and brew coffee as the company started the WFH policy from Feb.&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#background&#34;&gt;Background&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#update-history&#34;&gt;Update history&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#1-my-little-coffee&#34;&gt;1. My Little Coffee&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#beans&#34;&gt;Beans&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#drip-bags&#34;&gt;Drip bags&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#equipments&#34;&gt;Equipments&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#2-brew-note-coffee-roaster&#34;&gt;2. Brew Note Coffee Roaster&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#beans-1&#34;&gt;Beans&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#subscription-plans&#34;&gt;Subscription plans&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h3 id=&#34;update-history&#34;&gt;Update history&lt;/h3&gt;
&lt;p&gt;ğŸ· 2020-09-12:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Added new beans I tried.&lt;/li&gt;
&lt;li&gt;Added new equipments.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;I will keep searching for new beans and new local shops in the coming days.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-my-little-coffee&#34;&gt;1. My Little Coffee&lt;/h2&gt;
&lt;p&gt;ğŸ“:  Shop 102, Ho King Shopping Centre, Mong Kok, Kowloon, Hong Kong &lt;a href=&#34;https://goo.gl/maps/tmvvYoYdbwdXHT1Q8&#34;&gt;(map)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ğŸ•‘: 14:00 - 21:00&lt;/p&gt;
&lt;p&gt;ğŸ”—: &lt;a href=&#34;https://www.instagram.com/mylittlecoffee/&#34; title=&#34;@mylittlecoffee&#34;&gt;IG&lt;/a&gt; | &lt;a href=&#34;https://www.facebook.com/MYLITTLECOFFEE.HK&#34; title=&#34;@MYLITTLECOFFEE.HK&#34;&gt;FB&lt;/a&gt;&lt;/p&gt;
&lt;iframe src=&#34;https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3690.994368201023!2d114.16981291454812!3d22.31605274796321!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x340400c6eba8f7f1%3A0xcda642d8b7eb4c2e!2z5aW95pmv5ZWG5qWt5Lit5b-D!5e0!3m2!1szh-TW!2ses!4v1591843734940!5m2!1szh-TW!2ses&#34; width=&#34;720&#34; height=&#34;300&#34; frameborder=&#34;0&#34; style=&#34;border:0;&#34; allowfullscreen=&#34;true&#34; aria-hidden=&#34;false&#34; tabindex=&#34;0&#34;&gt;&lt;/iframe&gt;
&lt;p&gt;The shop sells whole beans, drip bags and a lot of coffee equipment. You can also request the shopkeeper to gring the beans too.&lt;/p&gt;
&lt;p&gt;I bought their beans twice a week. Here are some beans that I&amp;rsquo;ve tried and the labels of each kind of bean.&lt;/p&gt;
&lt;h3 id=&#34;beans&#34;&gt;Beans&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒ El Salvador, Finca La Primera&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nutty, brown sugar, citrus, sweet aftertaste.&lt;/li&gt;
&lt;li&gt;Variety: Bourbon, 1200m ~ 1600m&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒŠ Ethiopia Guji Shakisso Abiyot Boru Galle Dagaa Grade 1&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Great acidity &amp;amp; full mouth feel with notes like raisin, blackberry, dark choco., plum &amp;amp; honey-like sweetness.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒŠ Colombia Hulla Mariano Leal Bourbon&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Strong &amp;amp; vibrant aroma, good structure with tasting notes like green apple, vanilla, dark choco. &amp;amp; apricot.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒŠ Kenya Nyala AB Top Microlot&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pleasant &amp;amp; complex acidity, brown sugar in aroma, pomegranate, apple citrus &amp;amp; black currant finish.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒŠ Yirgacheffe Dumerso G1&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tangerine, grape, Earl Grey, smooth, long-lasting&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;(?) Bohemian Rhapsody&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nutty, winy, berries, cranberry, balance, sweet, rich &amp;amp; mellow. Smooth&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸ· Yunnan (Brandy Fermentation)&lt;/strong&gt; : This one is super interesting and addictive. Strong brandy / rum taste.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Foral, brandy winey, black berry&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;drip-bags&#34;&gt;Drip bags&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;The shop also grinds their beans and sell it as drop bags (~$75/10 bags). Suitable for people who want to drink their own choice in the office.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;equipments&#34;&gt;Equipments&lt;/h3&gt;
&lt;h4 id=&#34;coffee-filter&#34;&gt;Coffee filter&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;KONO&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;While V60 is dominating the market (I also using plastic V60. Cheap, robust, simple), this shop don&amp;rsquo;t sell V60. Instead, KONO filter is all over the shop.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://shop.r10s.jp/ultramix/cabinet/item17/md-41_1.jpg&#34; alt=&#34;a typical KONO filter&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Clever Cup&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;They sold clever cup recently. In my opinion, it is a french press but looks like a drip coffee filter. You can also use it as a typical coffee filter if you want.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.hiconsumption.com/wp-content/uploads/2015/04/Clever-Coffee-Maker.jpg&#34; alt=&#34;a typical clever cup&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The Vietnamese&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Once apon a time I drank the vietnamese coffee from a local restaurant and it used this coffee filter to brew a dark and strong coffee and mixed with condensed milk. (So strong that I got a headache afterwards X.X)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.webstaurantstore.com/images/products/extra_large/58984/99644.jpg&#34; alt=&#34;a typical vietnamese coffee filter&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;grinders&#34;&gt;Grinders&lt;/h4&gt;
&lt;p&gt;(TBC)&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-brew-note-coffee-roaster&#34;&gt;2. Brew Note Coffee Roaster&lt;/h2&gt;
&lt;p&gt;ğŸ“: G/F, 19 Fort Street, North Point, Hong Kong Island, Hong Kong &lt;a href=&#34;https://goo.gl/maps/FH97kAU441xBLEsv5&#34;&gt;(map)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ğŸ•‘: 08:30 - 19:00&lt;/p&gt;
&lt;p&gt;ğŸ”—: &lt;a href=&#34;https://brewnotecoffee.com/&#34;&gt;Website&lt;/a&gt; | &lt;a href=&#34;https://www.instagram.com/brewnotecoffee/,&#34; title=&#34;@brewnotecoffee&#34;&gt;IG&lt;/a&gt; | &lt;a href=&#34;https://www.facebook.com/brewnotecoffee/&#34; title=&#34;@brewnotecoffee&#34;&gt;FB&lt;/a&gt;&lt;/p&gt;
&lt;iframe src=&#34;https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1935.6125276425794!2d114.19573503377934!3d22.29003915191319!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3404010391cc2fef%3A0xca430d4451503bfe!2sBrew%20Note%20Coffee%20Roaster!5e0!3m2!1szh-TW!2ses!4v1591849727090!5m2!1szh-TW!2ses&#34; width=&#34;720&#34; height=&#34;300&#34; frameborder=&#34;0&#34; style=&#34;border:0;&#34; allowfullscreen=&#34;&#34; aria-hidden=&#34;false&#34; tabindex=&#34;0&#34;&gt;&lt;/iframe&gt;
&lt;p&gt;This is also a restaurant so you can taste their coffee with delicious food. Ocassionally the shop will held cultural talks.&lt;/p&gt;
&lt;p&gt;The shop is selling one of the lightest roasted whole beans in the city. I bought the Ethiopia Guji beans a long time ago and tasted the Americano in the shop. Both stunning.&lt;/p&gt;
&lt;h3 id=&#34;beans-1&#34;&gt;Beans&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒ Ethiopia Guji Oxygen Free&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Floral, berries, tropical, citrus, sweet&lt;/li&gt;
&lt;/ul&gt;
&lt;figure&gt;&lt;img src=&#34;./img/01_flavor-wheel.JPG&#34;
         alt=&#34;01_flavor-wheel&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;Note: they have a simple wheel indicates the taste on their bean bags!&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&#34;subscription-plans&#34;&gt;Subscription plans&lt;/h3&gt;
&lt;p&gt;It also provides different coffee subscription plans. The &lt;a href=&#34;https://brewnotecoffee.com/&#34;&gt;website&lt;/a&gt; shows the details of the beans and the plans.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>A Note on SSL Certificate</title>
      <link>https://blog.lofibean.cc/posts/a-note-on-ssl/</link>
      <pubDate>Sat, 23 May 2020 17:10:25 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/a-note-on-ssl/</guid>
      
        <description>&lt;p&gt;This is a note about the Linkedin learning course &lt;a href=&#34;https://www.linkedin.com/learning/ssl-certificates-for-web-developers&#34;&gt;SSL Certificates for Web Developers&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;certificate-and-protocol&#34;&gt;Certificate and protocol&lt;/h2&gt;
&lt;h3 id=&#34;what-are-ssltls-stands-for&#34;&gt;What are SSL/TLS stands for?&lt;/h3&gt;
&lt;p&gt;They stands for &lt;em&gt;Secure Socket Layer&lt;/em&gt; and &lt;em&gt;Transport Layer Security&lt;/em&gt;. They are the protocol names.&lt;/p&gt;
&lt;h3 id=&#34;what-is-https-and-why-we-are-using-it&#34;&gt;What is HTTPS, and why we are using it?&lt;/h3&gt;
&lt;p&gt;Https[ecure], a protocol on top of HTTP to secure the integrity of the data sending form the user to server.&lt;/p&gt;
&lt;h3 id=&#34;what-is-a-certificate-and-what-is-it-for&#34;&gt;What is a certificate, and what is it for?&lt;/h3&gt;
&lt;p&gt;A certificate &lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; (&lt;code&gt;.crt&lt;/code&gt;, &lt;code&gt;.cer&lt;/code&gt;) certifies &lt;strong&gt;the ownership of a public key&lt;/strong&gt;. A certificate contains:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;organization,&lt;/li&gt;
&lt;li&gt;issuer (e.g. the Certificate Authority / Self-signed),&lt;/li&gt;
&lt;li&gt;valid period,&lt;/li&gt;
&lt;li&gt;url,&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;state / country&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These information can be used to identify the certificate owner.&lt;/p&gt;
&lt;p&gt;The public key is used to &lt;strong&gt;encrypt&lt;/strong&gt;/&lt;del&gt;decrypt&lt;/del&gt; the communication between computers.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cryptography&#34;&gt;Cryptography&lt;/h2&gt;
&lt;h3 id=&#34;asymmetric-vs-symmetric&#34;&gt;Asymmetric VS. Symmetric&lt;/h3&gt;
&lt;p&gt;Asymmetric cryptography requies a pair of keys. The &lt;em&gt;Public key&lt;/em&gt; is used to encrypt messages while the &lt;em&gt;private key&lt;/em&gt; is for decryption.&lt;/p&gt;
&lt;p&gt;In symmetric cryptography, both ends use the same password to encrypt + decrypt messages.&lt;/p&gt;
&lt;h3 id=&#34;why-are-we-using-both-technologies-and-how&#34;&gt;Why are we using both technologies? And how?&lt;/h3&gt;
&lt;p&gt;In short: For the balance of security and speed, we use asymmetric cryptography to establish secure connection (&lt;em&gt;handshake&lt;/em&gt;) and use symmetric cryptography for the data transmission.&lt;/p&gt;
&lt;h4 id=&#34;the-handshake&#34;&gt;The Handshake&lt;/h4&gt;
&lt;p&gt;The end user and the server use the same password to encrypt + decrypt the messages. This password is sent from a server to a user by following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Validate the certificate&amp;hellip;
&lt;ol&gt;
&lt;li&gt;User makes a request to a web server.&lt;/li&gt;
&lt;li&gt;Web server responds with its &lt;em&gt;public key&lt;/em&gt; certificate.&lt;/li&gt;
&lt;li&gt;User checks if the &lt;em&gt;public key&lt;/em&gt; certificate is valid.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;If the certificate from web server is valid&amp;hellip;
&lt;ol&gt;
&lt;li&gt;User encrypts the password using server&amp;rsquo;s public key, and send to web server.&lt;/li&gt;
&lt;li&gt;Server decrypts with its private key.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After that, a secure connection is established and they shared the &lt;em&gt;same&lt;/em&gt; password &lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;types-of-certificate&#34;&gt;Types of certificate&lt;/h2&gt;
&lt;h3 id=&#34;self-signed&#34;&gt;Self-signed&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Intra-communications between systems under same organization.&lt;/li&gt;
&lt;li&gt;Local development&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ca&#34;&gt;CA&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Subdomain: tied to 1 domain (e.g. &lt;code&gt;www.mydoma.in&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Wildcard: tied to a groups of subdomains (e.g. &lt;code&gt;*.mydoma.in&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Multi-domain: (e.g. &lt;code&gt;mydoma.in&lt;/code&gt;, &lt;code&gt;myweb.site&lt;/code&gt;, &amp;hellip;)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;acme-automatic-certificate-management-environment&#34;&gt;ACME (Automatic Certificate Management Environment)&lt;/h2&gt;
&lt;p&gt;To configuring Let&amp;rsquo;s Encrypt&amp;rsquo;s ACME on server, we can make use of the &lt;a href=&#34;https://certbot.eff.org/&#34;&gt;CertBot&lt;/a&gt;. For IIS, use &lt;a href=&#34;https://certifytheweb.com/&#34;&gt;Certify&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;
&lt;hr&gt;
&lt;h2 id=&#34;hsts&#34;&gt;HSTS&lt;/h2&gt;
&lt;p&gt;This can instruct the browser to interact with the server with HTTPS only. Redirect from HTTP to HTTPS is not required. This is achieved by adding a response header (&lt;code&gt;Strict-Transport-Security&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Example response header:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Strict-Transport-Security: max-age&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;63072000; includeSubDomains; preload&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;what-hsts-is-protecting-us-from&#34;&gt;What HSTS is protecting us from?&lt;/h3&gt;
&lt;p&gt;The &lt;strong&gt;Man-in-the-Middle TLS Protocol Downgrade Attack.&lt;/strong&gt;&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt; In &lt;a href=&#34;https://www.praetorian.com/blog/man-in-the-middle-tls-ssl-protocol-downgrade-attack&#34;&gt;this example&lt;/a&gt;, the hacker C sends a ARP cache table request to both the client A and server B:
&lt;img src=&#34;https://assets.website-files.com/58866caeabc83d5e7c574c74/5cdc9328fcbd747340785c63_20140811-mitm-attack.png&#34; alt=&#34;Manipulating Device ARP Cache Tables&#34;&gt;&lt;/p&gt;
&lt;p&gt;Now the traffic from A to B is going through C, a typical &lt;strong&gt;Man-in-the-Middle attack&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The next step is C try to have a &lt;strong&gt;downgrade&lt;/strong&gt; on the TLS version. Since the browsers are backward-compatible on older TLS versions, C can therefore to make the version downgraded to the negotiated version in the handshake process. C can then intercept and decrypt the messages by making use of the security vulnerabilities of eariler TLS.&lt;/p&gt;
&lt;h3 id=&#34;hsts-preloading&#34;&gt;HSTS Preloading&lt;/h3&gt;
&lt;p&gt;Avoid redirection of the first request too: &lt;a href=&#34;https://hstspreload.org/&#34;&gt;https://hstspreload.org/&lt;/a&gt;&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;the certificate does not depends on the protocol we use&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;password is just for the same browsing session.&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;I am not an expert on this area and I tried by best to digest that article and &lt;a href=&#34;https://en.m.wikipedia.org/wiki/Downgrade_attack&#34;&gt;this wiki&lt;/a&gt; to write the summary.&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
      
    </item>
    
    <item>
      <title>â˜•ï¸ Brewing Coffee</title>
      <link>https://blog.lofibean.cc/posts/brewing-coffee/</link>
      <pubDate>Sun, 17 May 2020 21:10:25 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/brewing-coffee/</guid>
      
        <description>&lt;p&gt;A note on how to brew coffee.&lt;/p&gt;
&lt;h2 id=&#34;v60&#34;&gt;V60&lt;/h2&gt;
&lt;p&gt;â˜•ï¸ &lt;a href=&#34;https://www.youtube.com/watch?v=LmGKqzV7hQE&#34;&gt;How to Brew V60 with UK Brewers Cup Champion, Sang Ho Park | Comprehensive Guide&lt;/a&gt;&lt;/p&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/LmGKqzV7hQE&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;â˜•ï¸ &lt;a href=&#34;https://www.youtube.com/watch?v=wmCW8xSWGZY&#34;&gt;A Coffee Brewing Theory &amp;ldquo;4:6 method&amp;rdquo; Invented by Tetsu Kasuya_ World Brewers Cup 2016 Champion&lt;/a&gt;&lt;/p&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/wmCW8xSWGZY&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

</description>
      
    </item>
    
    <item>
      <title>Why You Should Manage Your Energy, Not Your Time</title>
      <link>https://blog.lofibean.cc/posts/why-you-should-manage-your-energy-not-your-time/</link>
      <pubDate>Sun, 17 May 2020 13:33:52 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/why-you-should-manage-your-energy-not-your-time/</guid>
      
        <description>&lt;h2 id=&#34;-summary&#34;&gt;ğŸ¯ Summary&lt;/h2&gt;
&lt;p&gt;As a human being, &lt;strong&gt;managing our energy is more important&lt;/strong&gt; because this is a limited resources.&lt;/p&gt;
&lt;p&gt;We may wrongly think that increasing working hours can do more. However, longer working hours leads more &lt;strong&gt;unfocus&lt;/strong&gt; time and brings negative effect to your work.&lt;/p&gt;
&lt;p&gt;Surprisingly, having a monthly plan is better then a detailed daily plan. The later one demotivated people because we face &lt;strong&gt;inevitable distractions&lt;/strong&gt; daily.&lt;/p&gt;
&lt;h2 id=&#34;-thoughts&#34;&gt;ğŸ’¡ Thoughts&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Stay focus on work by taking regular breaks. (e.g &lt;a href=&#34;https://en.m.wikipedia.org/wiki/Pomodoro_Technique&#34;&gt;Pomodoro Technique&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;In the article, top 10% productive employees &lt;strong&gt;work 52-mins work and take 17-mins break&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Regularly schedule some time for work individually without distraction.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;--highlights&#34;&gt;â­ï¸  Highlights&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;A workplace study found an average working professional experiences 87 interruptions per day, making it difficult to remain productive and focused for a full day.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Surprisingly, the top 10 percent of employees with the highest productivity didnâ€™t put in longer hours than anyone else â€“ often they didn&amp;rsquo;t even work eight-hour days. Instead, the key to their productivity was that for every 52 minutes of focused work, they took a 17-minute break.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œAt any given point, I should have deep work scheduled for roughly the next month. Once on the calendar, I protect this time like I would a doctorâ€™s appointment or important meeting,â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;While the researchers assumed that the well-structured daily plans would be most effective when it came to the execution of tasks, they were wrong: the detailed daily plans demotivated students. Harford argues that inevitable distractions often render the daily to-do list ineffective, while leaving room for improvisation in such a list can reap the best results.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h6 id=&#34;-reference&#34;&gt;ğŸ”— reference:&lt;/h6&gt;
&lt;p&gt;&lt;a href=&#34;https://getpocket.com/explore/item/why-you-should-manage-your-energy-not-your-time&#34;&gt;Why You Should Manage Your Energy, Not Your Time&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>ä½›é›·å¾·é‡‘æ‚–è«– Fredkinâ€™s paradox</title>
      <link>https://blog.lofibean.cc/posts/fredkins-paradox/</link>
      <pubDate>Sun, 17 May 2020 12:41:12 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/fredkins-paradox/</guid>
      
        <description>&lt;h2 id=&#34;-summary&#34;&gt;ğŸ¯ Summary&lt;/h2&gt;
&lt;p&gt;å¥½å¤šæ™‚å€™é›£ä»¥å–æ¨çš„é¸æ“‡æœ¬èº«å°è‡ªèº«æ‰€å¸¶ä¾†çš„å·®ç•°æ²’æœ‰æƒ³åƒä¸­çš„åš´é‡ã€‚å› ç‚ºæ±ºç­–å›°é›£è€Œä¸åšæ±ºç­–åè€Œæœƒä»¤è‡ªå·±æå¤±æ›´å¤§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-thoughts&#34;&gt;ğŸ’¡ Thoughts&lt;/h2&gt;
&lt;p&gt;æ–‡ç« çš„ç¸½çµæå‡ºäº†é¢å°é¸æ“‡å›°é›£çš„å…¶ä¸­ä¸€å€‹è§£æ±ºæ–¹å‘ï¼šä»¥å¾Œæ‚”/éºæ†¾å»åšæ±ºå®šçš„è€ƒæ…®ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨é¿å…å¾Œæ‚”çš„åŸºç¤ä¸Šå„ªåŒ–ä½ çš„æ±ºå®šï¼Œè€Œä¸æ˜¯åŸºæ–¼æˆåŠŸ/å¤±æ•—æˆ–å¿«æ¨‚/ç—›è‹¦åšå‡ºé‡å¤§æ±ºå®šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç•¶ä½ åŸºæ–¼ä¸€æ¢è®“ä½ æœ€ä¸æœƒå¾Œæ‚”çš„è·¯å¾‘ä¾†å„ªåŒ–ä½ çš„ç”Ÿæ´»æ™‚ï¼Œä½ å¯ä»¥è¨­æƒ³æœªä¾†çš„è‡ªå·±è™•æ–¼ä¸€å€‹æ¨¡æ“¬æœªä¾†ç‹€æ…‹ï¼Œä¸¦è©¦è‘—æ„Ÿå—ä½ å¯èƒ½å°‡ç¶“æ­·å“ªäº›éºæ†¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;-highlights&#34;&gt;â­ï¸ Highlights&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å…©å€‹é¸é …çš„å¸å¼•åŠ›è¶Šç›¸ä¼¼ï¼Œåœ¨äºŒè€…ä¹‹é–“åšå‡ºé¸æ“‡çš„é›£åº¦è¶Šå¤§â€”â€”å„˜ç®¡åœ¨åŒæ¨£ç¨‹åº¦ä¸Šï¼Œé€™å€‹é¸æ“‡æœ¬èº«ä¸¦ä¸æ˜¯å¤ªé‡è¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½›é›·å¾·é‡‘æ‚–è«–æŒ‡å‡º:ã€Œåœ¨å¿…é ˆåšå‡ºé¸æ“‡çš„æƒ…æ³ä¸‹ï¼Œéš¨è‘—å…©ç¨®é¸æ“‡çš„æ•ˆæœè¶Šä¾†è¶Šæ¥è¿‘ï¼Œæ±ºç­–å°±æœƒè®Šå¾—æ›´åŠ å›°é›£ï¼Œä½†çµæœå°±æ›´æ²’é‚£éº¼é‡è¦äº†ã€‚ã€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h6 id=&#34;-reference&#34;&gt;ğŸ”— Reference:&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.techbang.com/posts/78437-fredkin-paradox-why-do-we-always-waste-time-on-inconsequential-decisions&#34;&gt;ä½›é›·å¾·é‡‘æ‚–è«–ï¼šç‚ºä»€éº¼æˆ‘å€‘ç¸½æµªè²»æ™‚é–“åœ¨ç„¡é—œç·Šè¦çš„æ±ºå®šä¸Šï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>Creating a User With Limited Privileges in Postgres</title>
      <link>https://blog.lofibean.cc/posts/creating-a-user-with-limited-privileges-in-postgres/</link>
      <pubDate>Thu, 16 Apr 2020 20:01:15 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/creating-a-user-with-limited-privileges-in-postgres/</guid>
      
        <description>&lt;p&gt;This post showing how to create a user with limited privileges in PostgreSQL.&lt;/p&gt;
&lt;h2 id=&#34;situation&#34;&gt;Situation&lt;/h2&gt;
&lt;p&gt;I created a web app. It reads data from a PostgreSQL database. I want to create a user with read-only privilege and connect to the database.&lt;/p&gt;
&lt;h3 id=&#34;code&#34;&gt;Code&lt;/h3&gt;
&lt;p&gt;Let say the user you want to create is &lt;code&gt;webapp_user&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; webapp_user &lt;span style=&#34;color:#66d9ef&#34;&gt;WITH&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ENCRYPTED&lt;/span&gt; PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;secure_passw0rd&amp;#39;&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Grant the right to all public tables:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; TABLES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Connect the database using &lt;code&gt;webapp_user&lt;/code&gt; in the web app.&lt;/p&gt;
&lt;h2 id=&#34;i-want-more-power&#34;&gt;I want more power&amp;hellip;&lt;/h2&gt;
&lt;p&gt;Now my web app is not read-only anymore. Users can create/delete some entries in the tables too.&lt;/p&gt;
&lt;h3 id=&#34;code-1&#34;&gt;Code&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;UPDATE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;DELETE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; TABLES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Looks simple and cool! But why I got the &lt;strong&gt;&lt;code&gt;permission denied for sequence XXX_id_seq to YYY&lt;/code&gt;&lt;/strong&gt; error while inserting new records to the tables?&lt;/p&gt;
&lt;p&gt;If your table has an &lt;em&gt;auto-increment&lt;/em&gt; field then you need some extra privileges: the privileges to use the sequence-related functions (e.g. &lt;code&gt;currval&lt;/code&gt; and &lt;code&gt;nextval&lt;/code&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USAGE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; SEQUENCES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;to&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Example of an &lt;em&gt;auto-increment&lt;/em&gt; field: the id of the table&lt;/p&gt;
&lt;h3 id=&#34;extra&#34;&gt;Extra&lt;/h3&gt;
&lt;p&gt;What if I just want to apply the privilege(s) to a special table?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;UPDATE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;DELETE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; special_table &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Reference:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.techonthenet.com/postgresql/grant_revoke.php&#34;&gt;Grant Privileges on Table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/q/9325017&#34;&gt;ERROR: permission denied for sequence cities_id_seq using Postgres&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;(this blog post also available on &lt;a href=&#34;https://dev.to/bemnlam/creating-a-user-with-limited-privileges-in-postgres-5ee7/edit&#34;&gt;dev.to&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>How to add a new Hugo blog post</title>
      <link>https://blog.lofibean.cc/posts/welcome/</link>
      <pubDate>Thu, 16 Apr 2020 10:55:25 +0800</pubDate>
      
      <guid>https://blog.lofibean.cc/posts/welcome/</guid>
      
        <description>&lt;p&gt;Go to &lt;code&gt;blog&lt;/code&gt; folder&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo new posts/name-of-the-new-post.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Write your post. Back to &lt;code&gt;blog&lt;/code&gt; folder  and then&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo server -D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then you can preview your blog locally.&lt;/p&gt;
&lt;h3 id=&#34;deploy-production&#34;&gt;Deploy production&lt;/h3&gt;
&lt;p&gt;Change &lt;code&gt;draft=true&lt;/code&gt; in the blog post and then&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Push to remote &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Done.&lt;/p&gt;
</description>
      
    </item>
    
  </channel>
</rss>
