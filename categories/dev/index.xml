<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>Dev on log from home</title>
    <link>https://blog.eternalrecurrence.space/categories/dev/</link>
    <description>Recent content in Dev on log from home</description>
    <image>
      
      <url>https://blog.eternalrecurrence.space/android-chrome-512x512.png?v=20201231</url>
      
      <title>Favicon of Dev on log from home</title>
      <link>https://blog.eternalrecurrence.space/</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; bemnlam</copyright>
    <lastBuildDate>Thu, 31 Dec 2020 17:46:38 +0800</lastBuildDate>
    
	<atom:link href="https://blog.eternalrecurrence.space/categories/dev/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Set Up Cloudflare for AWS Route 53 Domains</title>
      <link>https://blog.eternalrecurrence.space/posts/set-up-cloudflare-for-route53-domains/</link>
      <pubDate>Thu, 31 Dec 2020 17:46:38 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/set-up-cloudflare-for-route53-domains/</guid>
      
        <description>&lt;img src=&#34;https://blog.eternalrecurrence.space/posts/set-up-cloudflare-for-route53-domains/thumbnail.jpg&#34; /&gt;&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;This article shows how to configure Cloudflare for an existing website using AWS Route53.&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#overview&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#domain-registrar&#34;&gt;Domain Registrar&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#what-about-aws-route53&#34;&gt;What about AWS Route53?&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#cloudflare-account&#34;&gt;Cloudflare Account&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#add-a-domain&#34;&gt;Add a domain&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#change-your-nameservers&#34;&gt;Change your nameservers&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#verify-nameservers&#34;&gt;Verify nameservers&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#updating-dns-records&#34;&gt;Updating DNS Records&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#application-load-balancers&#34;&gt;(Application) Load Balancers&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#amazon-ses&#34;&gt;Amazon SES&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#summary&#34;&gt;Summary&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;domain-registrar&#34;&gt;Domain Registrar&lt;/h2&gt;
&lt;p&gt;In my opinion, &lt;strong&gt;domain registrar is the most confusing part when you configure Cloudflare&lt;/strong&gt;. To check the details of your domain, use the &lt;a href=&#34;https://lookup.icann.org/lookup&#34;&gt;&lt;strong&gt;Domain Name Registration Data Lookup&lt;/strong&gt;&lt;/a&gt;. Here is the lookup result of &lt;code&gt;gitlab.com&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231180715529.png&#34; alt=&#34;image-20201231180715529&#34;&gt;&lt;/p&gt;
&lt;p&gt;The Registrar Information section contains the information where you should change the nameservers in the next step.&lt;/p&gt;
&lt;h3 id=&#34;what-about-aws-route53&#34;&gt;What about AWS Route53?&lt;/h3&gt;
&lt;p&gt;Route53 can be a domain registrar OR just managing the hosted zone. If you see AWS is the Registrar in this lookup, then you should update the config in AWS Route53.&lt;/p&gt;
&lt;h5 id=&#34;example-1-domain-purchased-from-godaddy&#34;&gt;Example 1: Domain purchased from GoDaddy&lt;/h5&gt;
&lt;p&gt;For example, if you purchased your domain in &lt;strong&gt;GoDaddy&lt;/strong&gt; and having a &lt;strong&gt;hosted zone&lt;/strong&gt; in &lt;strong&gt;AWS Route 53&lt;/strong&gt; (That&amp;rsquo;s my case), &lt;strong&gt;GoDaddy is therefore your domain registrar and you should login GoDaddy&amp;rsquo;s account to change the nameserver, NOT AWS Route 53&lt;/strong&gt;&lt;/p&gt;
&lt;h5 id=&#34;example-2-domain-purchased-from-aws-route-53&#34;&gt;Example 2: Domain purchased from AWS Route 53&lt;/h5&gt;
&lt;p&gt;Unfortunately, You can purchased a domain in AWS Route 53 too. In this case, &lt;strong&gt;AWS Route 53 is your domain registrar&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;You should change the nameservers in &lt;a href=&#34;https://console.aws.amazon.com/route53/&#34;&gt;the Route 53 console&lt;/a&gt; &amp;gt; &lt;strong&gt;Registered Domains&lt;/strong&gt;.&lt;/p&gt;
&lt;h4 id=&#34;what-about-ns-record&#34;&gt;What about NS Record?&lt;/h4&gt;
&lt;p&gt;Changing a &lt;code&gt;NS Record&lt;/code&gt; is not the same as changing a &lt;code&gt;nameserver&lt;/code&gt;. From the article &lt;a href=&#34;https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/&#34;&gt;DNS NS record&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The NS record indicates which DNS server is authoritative.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, a &lt;code&gt;NS Record&lt;/code&gt; is similar to &lt;code&gt;MX Record&lt;/code&gt;, &lt;code&gt;CNAME Record&lt;/code&gt;, &lt;code&gt;A Record&lt;/code&gt;, etc. They are all the items under the domain.&lt;/p&gt;
&lt;p&gt;Nameserver of the domain is at a higher level and it&amp;rsquo;s controled by the domain registrar.&lt;/p&gt;
&lt;h2 id=&#34;cloudflare-account&#34;&gt;Cloudflare Account&lt;/h2&gt;
&lt;h3 id=&#34;add-a-domain&#34;&gt;Add a domain&lt;/h3&gt;
&lt;p&gt;It&amp;rsquo;s free to create a Cloudflare account: &lt;a href=&#34;https://dash.cloudflare.com/sign-up&#34;&gt;https://dash.cloudflare.com/sign-up&lt;/a&gt;. Cloudflare also offer paid plans and I won&amp;rsquo;t discuss them in this article.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231175523687.png&#34; alt=&#34;image-20201231175523687&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231175540349.png&#34; alt=&#34;image-20201231175540349&#34;&gt;&lt;/p&gt;
&lt;p&gt;Choose the free plan and then click &lt;strong&gt;Continue&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;After that, Cloudflare will do a DNS scan for the domain you&amp;rsquo;ve entered. Click &lt;strong&gt;Continue&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Not all the recoreds captured are correct. You will need to add/delete/update some of them later.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;change-your-nameservers&#34;&gt;Change your nameservers&lt;/h3&gt;
&lt;p&gt;The last step of setup is changing the nameservers. You will see the following instruction:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20201231182416379.png&#34; alt=&#34;image-20201231182416379&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;1-log-in-to-your-registrar-account&#34;&gt;1. Log in to your registrar account&lt;/h4&gt;
&lt;p&gt;In the previous section, you should know which service provider is your domain registrar. Login to your domain registrar and find out the nameserver config. Then, remove the existing nameservers (the entries shown in step 1). For example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ns1.mydomain.com
ns2.mydomain.com
ns3.mydomain.com
ns4.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;2-replace-with-cloudflares-nameservers&#34;&gt;2. Replace with Cloudflare&amp;rsquo;s nameservers:&lt;/h4&gt;
&lt;p&gt;When all the existing nameservers are removed, you have to add the Cloudflare nameservers in the domain registrar. For example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;autumn.ns.cloudflare.com
hans.ns.cloudflare.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note: you have to enter the 2 nameservers shown in step 2. Other (Cloudflare) nameservers won&amp;rsquo;t work.&lt;/p&gt;
&lt;h3 id=&#34;verify-nameservers&#34;&gt;Verify nameservers&lt;/h3&gt;
&lt;p&gt;Again, lookup the domain details using  &lt;a href=&#34;https://lookup.icann.org/lookup&#34;&gt;&lt;strong&gt;Domain Name Registration Data Lookup&lt;/strong&gt;&lt;/a&gt;. This time you should check the details in the &lt;strong&gt;Domain Information&lt;/strong&gt; section.&lt;/p&gt;
&lt;p&gt;You should see the nameservers are replaced with the Cloudflare&amp;rsquo;s nameservers.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;strong&gt;Changing nameservers is quick&lt;/strong&gt; and you should be able to see the updated records within 5 minutes.&lt;/p&gt;
&lt;p&gt;On the other hand, changing the &lt;strong&gt;records&lt;/strong&gt; under this domain may take a longer time (e.g. 24-48 hours).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do not mix them up&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You may click the &lt;strong&gt;Done, check nameservers&lt;/strong&gt; button once you finished changing the nameservers in your domain registrar.&lt;/p&gt;
&lt;h2 id=&#34;updating-dns-records&#34;&gt;Updating DNS Records&lt;/h2&gt;
&lt;p&gt;As mentioned in the above, we have to change some of the records in Cloudflare.&lt;/p&gt;
&lt;h3 id=&#34;application-load-balancers&#34;&gt;(Application) Load Balancers&lt;/h3&gt;
&lt;p&gt;You need to replace those A Records into CNAME Records.&lt;/p&gt;
&lt;p&gt;In AWS Route 53 the load balancer records are in the forms of alias. Cloudflare will fetch the A Records of the load balancers.&lt;/p&gt;
&lt;p&gt;Get the CNAME of your load balancer under &lt;strong&gt;AWS EC2 Console&lt;/strong&gt; &amp;gt; &lt;strong&gt;Load balancers&lt;/strong&gt; &amp;gt; Select your load balancer and see the details. After that, delete the A Record in Cloudflare and add a new CNAME record for your load balancer.&lt;/p&gt;
&lt;p&gt;I used to keep the A Record in Cloudflare and it does work for few days. After that, the IP of that load balancer changed and the website cannot be connected.&lt;/p&gt;
&lt;h3 id=&#34;amazon-ses&#34;&gt;Amazon SES&lt;/h3&gt;
&lt;p&gt;I also found that the SPF and DKIM records for Amazon SES does not created in Cloudflare too. In this case you need to create those records manually in Cloudflare. Just follow the instruction provided by Amazon then you will know how to do:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-spf.html&#34;&gt;Authenticating Email with SPF in Amazon SES&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-dkim.html&#34;&gt;Authenticating Email with DKIM in Amazon SES&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary&lt;/h2&gt;
&lt;p&gt;To use &lt;strong&gt;Cloudflare&lt;/strong&gt;, you need to understand what a &lt;strong&gt;domain registrar&lt;/strong&gt; is. By changing &lt;strong&gt;nameservers&lt;/strong&gt; in a domain registrar and updating some records related to AWS&amp;rsquo;s infrastructure, we can set up the Cloudflare domain for an existing website using &lt;strong&gt;AWS Route 53&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This is the end of this article (as well as the year 2020).&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Set Up an AWS EC2 with Ubuntu GUI, RDP and more</title>
      <link>https://blog.eternalrecurrence.space/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/</link>
      <pubDate>Sat, 03 Oct 2020 13:40:48 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/</guid>
      
        <description>&lt;img src=&#34;https://blog.eternalrecurrence.space/posts/set-up-an-aws-ec2-with-ubuntu-gui-rdp-and-more/thumbnail.jpg&#34; /&gt;&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;This is an guide on how to set up a AWS EC2 free tier with GUI. The EC2 instance will be able to connect via Remote Desktop Protocol (RDP) or SSH.&lt;/p&gt;
&lt;p&gt;You need to create a AWS account: &lt;a href=&#34;https://portal.aws.amazon.com/billing/signup&#34;&gt;https://portal.aws.amazon.com/billing/signup&lt;/a&gt;. You may need to provide your credit card information during the signup process.&lt;/p&gt;
&lt;p&gt;Sign in to your AWS Account and go to the AWS EC2 Console: &lt;a href=&#34;https://aws.amazon.com/console/&#34;&gt;https://aws.amazon.com/console/&lt;/a&gt;&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#overview&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#create-an-aws-ec2&#34;&gt;Create an AWS EC2&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#set-up-the-security-groups&#34;&gt;Set up the security groups&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#choose-the-os-instance-type-and-storage&#34;&gt;Choose the OS, instance type and storage&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#create-and-download-a-pem-key-file&#34;&gt;Create and download a &lt;code&gt;.pem&lt;/code&gt; key file&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#connect-to-ec2-via-ssh&#34;&gt;Connect to EC2 via SSH&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#install-a-gui-and-rdp&#34;&gt;Install a GUI and RDP&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#gui-lxde&#34;&gt;GUI: &lt;code&gt;LXDE&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#rdp-xrdp&#34;&gt;RDP: &lt;code&gt;XRDP&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#connect-to-ec2-via-remote-desktop&#34;&gt;Connect to EC2 via remote desktop&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#bonus-materials&#34;&gt;Bonus Materials&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#1-install-additional-ibus-input-method&#34;&gt;1. Install additional IBus input method&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#2-install-midori-browser-from-deb-package&#34;&gt;2. Install Midori browser from &lt;code&gt;.deb&lt;/code&gt; package&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#3-set-up-a-swapfile-for-better-performance&#34;&gt;3. Set up a &lt;code&gt;swapfile&lt;/code&gt; for better performance&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#4-use-ec2-as-a-vpn-server&#34;&gt;4. Use EC2 as a VPN server&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;create-an-aws-ec2&#34;&gt;Create an AWS EC2&lt;/h2&gt;
&lt;h3 id=&#34;set-up-the-security-groups&#34;&gt;Set up the security groups&lt;/h3&gt;
&lt;p&gt;I suggest you define the security groups before setting up the instance. Setting up the security groups will give you a better understanding on what inbound/outbound traffic is allowed in the instances you are going to create.&lt;/p&gt;
&lt;p&gt;Choose &lt;strong&gt;Security Groups&lt;/strong&gt; at the left menu of your &lt;strong&gt;EC2 Dashboard&lt;/strong&gt;. Create 2 security groups:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;rdp&lt;/code&gt;: Allow inbound traffic via port &lt;code&gt;3389&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssh&lt;/code&gt;: Allow inbound traffic via port &lt;code&gt;22&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Allow all outbound traffic&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;choose-the-os-instance-type-and-storage&#34;&gt;Choose the OS, instance type and storage&lt;/h3&gt;
&lt;p&gt;Choose &lt;strong&gt;Services&lt;/strong&gt; &amp;gt; &lt;strong&gt;EC2&lt;/strong&gt; from the menu. At the &lt;strong&gt;EC2 Dashboard&lt;/strong&gt;, choose &lt;strong&gt;Instances&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Click the &lt;strong&gt;Launch Instance&lt;/strong&gt; and choose the suitable AMI (Amazon Machine Image). Here I choose a &lt;code&gt;t2.micro&lt;/code&gt; instance with &lt;code&gt;Ubuntu Server 18.04 LTS&lt;/code&gt; image. &lt;strong&gt;Remember also choose the suitable Storage&lt;/strong&gt; as not all kinds of storage are free. In this example I set up a &lt;code&gt;30GB General Purpose&lt;/code&gt; storage.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183719536.png&#34; alt=&#34;Image: Ubuntu Server 18.04 LTS&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183754512.png&#34; alt=&#34;Instance Type: t2.micro&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183909326.png&#34; alt=&#34;Click Review and Launch&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702183922739.png&#34; alt=&#34;Storage: 30GB General Purpose&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;allow-ssh-and-rdp-connections&#34;&gt;Allow SSH and RDP connections&lt;/h4&gt;
&lt;p&gt;Choose the security groups created in the previous step:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184007198.png&#34; alt=&#34;Security Group: allow SSH and RDP&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184046233.png&#34; alt=&#34;image-20200702184046233&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;create-and-download-a-pem-key-file&#34;&gt;Create and download a &lt;code&gt;.pem&lt;/code&gt; key file&lt;/h3&gt;
&lt;p&gt;You should create this key file. If you don&amp;rsquo;t create this and link it to the instance, you will not be able to connect to the instance via SSH or RDP. Here we create a new key file named &lt;code&gt;ssh_private_key&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;After that, click &lt;strong&gt;Download Key Pair&lt;/strong&gt; and keep the key file save.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702184135610.png&#34; alt=&#34;image-20200702184135610&#34;&gt;&lt;/p&gt;
&lt;h5 id=&#34;do-a-chmod-on-the-key-file&#34;&gt;Do a &lt;code&gt;chmod&lt;/code&gt; on the key file&lt;/h5&gt;
&lt;p&gt;You need to make sure that the &lt;code&gt;ssh_private_key.pem&lt;/code&gt; downloaded is able to execute. Run &lt;code&gt;chmod&lt;/code&gt; to change the permission:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;❯ ll ~/Downloads/ | grep &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ssh_private_key.pem&amp;#34;&lt;/span&gt;
-rw-r--r--@ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; BEN  staff   1.7K Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 18:41 ssh_private_key.pem

❯ chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt; ~/Downloads/ssh_private_key.pem

❯ ll ~/Downloads/ | grep &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ssh_private_key.pem&amp;#34;&lt;/span&gt;
-r--------@ &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; BEN  staff   1.7K Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 18:41 ssh_private_key.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;connect-to-ec2-via-ssh&#34;&gt;Connect to EC2 via SSH&lt;/h2&gt;
&lt;p&gt;Once you click the &lt;strong&gt;Launch instance&lt;/strong&gt; , you should be able to see your instance in &lt;strong&gt;running&lt;/strong&gt; state in the web console. Then, you can connect to the EC2 via ssh using the &lt;code&gt;pem&lt;/code&gt; key file. Assuming that your DNS name of your EC2 is &lt;code&gt;ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com&lt;/code&gt; and it is running at &lt;code&gt;ap-northeast-1&lt;/code&gt; region, you can connect to it using user &lt;code&gt;ubuntu&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;❯ ssh -i ~/Downloads/ssh_private_key.pem ubuntu@ec2-0-1-2-3.region-name.compute.amazonaws.com
The authenticity of host &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ec2-0-1-2-3.region-name.compute.amazonaws.com (0.1.2.3)&amp;#39;&lt;/span&gt; can&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;t be established.
ECDSA key fingerprint is SHA256:8t8ey5IqoiGOKGc9WuDc5SXaYqFHPnKph1mRtzbQNTc.
Are you sure you want to &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt; connecting &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;yes/no/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;fingerprint&lt;span style=&#34;color:#f92672&#34;&gt;])&lt;/span&gt;?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You need to confirm your fingerprint at the first connection attempt.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Welcome to Ubuntu 18.04.4 LTS &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;GNU/Linux 5.3.0-1023-aws x86_64&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;


 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Thu Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 10:54:37 UTC &lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt;

  System load:  0.0               Processes:           &lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;
  Usage of /:   3.7% of 29.02GB   Users logged in:     &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  Memory usage: 16%               IP address &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; eth0: 172.31.4.8
  Swap usage:   0%

&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; packages can be updated.
&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; updates are security updates.

The programs included with the Ubuntu system are free software;
the exact distribution terms &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;user &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;root&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;, use &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sudo &amp;lt;command&amp;gt;&amp;#34;&lt;/span&gt;.
See &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;man sudo_root&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; details.

ubuntu@ip-172-31-4-8:~$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;install-a-gui-and-rdp&#34;&gt;Install a GUI and RDP&lt;/h2&gt;
&lt;h3 id=&#34;gui-lxde&#34;&gt;GUI: &lt;code&gt;LXDE&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I choose &lt;strong&gt;LXDE&lt;/strong&gt; as the GUI of the ubuntu server: &lt;a href=&#34;https://lxde.sourceforge.net/about.html&#34;&gt;https://lxde.sourceforge.net/about.html&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LXDE is a new project aimed to provide a new desktop environment which is lightweight and fast&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;rdp-xrdp&#34;&gt;RDP: &lt;code&gt;XRDP&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;xrdp is an open-source Remote Desktop Protocol server: &lt;a href=&#34;http://xrdp.org&#34;&gt;http://xrdp.org&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;xrdp provides a graphical login to remote machines using RDP (Microsoft Remote Desktop Protocol)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Install the packages:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt-get update -y
sudo apt-get install lxde -y
sudo apt-get install xrdp -y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;set-a-password-for-your-accout&#34;&gt;Set a password for your accout&lt;/h4&gt;
&lt;p&gt;You need to also set up a password for the &lt;em&gt;ubuntu&lt;/em&gt;. This is for your later use in RDP as RDP only allows you to login an password-protected account.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo passwd ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;connect-to-ec2-via-remote-desktop&#34;&gt;Connect to EC2 via remote desktop&lt;/h3&gt;
&lt;p&gt;For mac user, you need to download the &lt;a href=&#34;https://apps.apple.com/us/app/microsoft-remote-desktop/id1295203466?mt=12&#34;&gt;Microsoft Remote Desktop&lt;/a&gt;. If you are using Windows, you should already have the Remote Desktop application preinstalled.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://apps.apple.com/us/app/microsoft-remote-desktop/id1295203466?mt=12&#34;&gt;&lt;img src=&#34;./img/image-20201003143752732.png&#34; alt=&#34;Download Microsoft Remote Desktop&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Launch the app and click &lt;strong&gt;Add PC&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702192027044.png&#34; alt=&#34;Add PC in Microsoft Remote Desktop&#34;&gt;&lt;/p&gt;
&lt;p&gt;Set the PC name (i.e. the DNS name of your machine):&lt;img src=&#34;./img/image-20200702192128973.png&#34; alt=&#34;Set PC name&#34;&gt;&lt;/p&gt;
&lt;p&gt;Login with user &lt;code&gt;ubuntu&lt;/code&gt; and the password you set in the previous step.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702192239827.png&#34; alt=&#34;Connect&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;bonus-materials&#34;&gt;Bonus Materials&lt;/h2&gt;
&lt;h3 id=&#34;1-install-additional-ibus-input-method&#34;&gt;1. Install additional IBus input method&lt;/h3&gt;
&lt;p&gt;If you want to type Japanese, Chinese, etc. you may need to install an input method. For cangjie, you can install &lt;a href=&#34;http://cangjians.github.io/projects/ibus-cangjie/install.html&#34;&gt;&lt;strong&gt;Cangjians&lt;/strong&gt;&lt;/a&gt; via the terminal:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt-get install ibus-cangjie
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-install-midori-browser-from-deb-package&#34;&gt;2. Install Midori browser from &lt;code&gt;.deb&lt;/code&gt; package&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Midori Browser&lt;/strong&gt; is a browser web light, fast, secure, free software &amp;amp; open source&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Download .deb file: &lt;a href=&#34;https://astian.org/en/midori-browser/download/&#34;&gt;https://astian.org/en/midori-browser/download/&lt;/a&gt; or using &lt;code&gt;wget&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;cd ~/Downloads
sudo wget -qnc https://packages.astian.org/pool/main/m/midori/midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/Downloads$ ll
total &lt;span style=&#34;color:#ae81ff&#34;&gt;1492&lt;/span&gt;
drwxr-xr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; ubuntu ubuntu    &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 11:29 ./
drwxr-xr-x &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt; ubuntu ubuntu    &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 11:22 ../
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; root   root   &lt;span style=&#34;color:#ae81ff&#34;&gt;1517328&lt;/span&gt; Jan &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt; 23:26 midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, install the &lt;code&gt;deb&lt;/code&gt; package using &lt;code&gt;dpkg&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo dpkg -i midori_9.0.0-1_amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You may see the &lt;code&gt;dependency problems&lt;/code&gt; like the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/Downloads$ sudo dpkg --configure -a
dpkg: dependency problems prevent configuration of midori:
 midori depends on libpeas-1.0-0 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 1.15&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;; however:
  Package libpeas-1.0-0 is not installed.
 midori depends on libxml2-utils; however:
  Package libxml2-utils is not installed.
 midori depends on gstreamer1.0-plugins-bad; however:
  Package gstreamer1.0-plugins-bad is not installed.
 midori depends on gstreamer1.0-libav; however:
  Package gstreamer1.0-libav is not installed.

dpkg: error processing package midori &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;--configure&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;:
 dependency problems - leaving unconfigured
Errors were encountered &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; processing:
 midori
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this case, update the packages and reinstall midori:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo dpkg --configure -a
sudo apt-get -f install
sudo apt-get update
sudo apt-get install midori
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-set-up-a-swapfile-for-better-performance&#34;&gt;3. Set up a &lt;code&gt;swapfile&lt;/code&gt; for better performance&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~$ sudo fallocate -l 1G /swapfile
ubuntu@ip-172-31-4-8:~$ sudo chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;600&lt;/span&gt; /swapfile
ubuntu@ip-172-31-4-8:~$ sudo mkswap /swapfile
Setting up swapspace version 1, size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt; MiB &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1073737728&lt;/span&gt; bytes&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
no label, UUID&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;9a121c2c-cd6f-48bf-b928-e550095a3efd
ubuntu@ip-172-31-4-8:~$ sudo swapon /swapfile
ubuntu@ip-172-31-4-8:~$ sudo swapon --show
NAME      TYPE  SIZE USED PRIO
/swapfile file 1024M   0B   -2
ubuntu@ip-172-31-4-8:~$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo nano /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;/swapfile swap swap defaults &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, reboot the machine.&lt;/p&gt;
&lt;h3 id=&#34;4-use-ec2-as-a-vpn-server&#34;&gt;4. Use EC2 as a VPN server&lt;/h3&gt;
&lt;p&gt;Create a new security group allows all TCP and UDP inbound connections and add this security group to the EC2 instance:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702200459525.png&#34; alt=&#34;EC2 instance inbound rules&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200702200555846.png&#34; alt=&#34;Assign a security group&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;install-openvpn-scripts&#34;&gt;Install openvpn scripts&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Nyr/openvpn-install&#34;&gt;This repo&lt;/a&gt; contains scripts for VPN server set up and profile management. Install it into your EC2:&lt;/p&gt;
&lt;p&gt;Download the script:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt update
sudo apt upgrade -y
mkdir ~/vpn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd ~/vpn
wget https://git.io/vpn -O openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ubuntu@ip-172-31-4-8:~/vpn$ ll
total &lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;
drwxrwxr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; ubuntu ubuntu  &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 ./
drwxr-xr-x &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt; ubuntu ubuntu  &lt;span style=&#34;color:#ae81ff&#34;&gt;4096&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 ../
-rw-rw-r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ubuntu ubuntu &lt;span style=&#34;color:#ae81ff&#34;&gt;23085&lt;/span&gt; Jul  &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; 12:11 openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Make the &lt;code&gt;openvpn-install.sh&lt;/code&gt; exectable in your EC2:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;chmod +x openvpn-install.sh
sudo ./openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Add a new profile by running &lt;code&gt;openvpn-install.sh&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Welcome to this OpenVPN road warrior installer!

This server is behind NAT. What is the public IPv4 address or hostname?
Public IPv4 address / hostname &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;18.183.12.213&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:

Which protocol should OpenVPN use?
   1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; UDP &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
   2&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; TCP
Protocol &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

What port should OpenVPN listen to?
Port &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1194&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;:

Select a DNS server &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; the clients:
   1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Current system resolvers
   2&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Google
   3&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; 1.1.1.1
   4&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; OpenDNS
   5&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; Quad9
   6&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; AdGuard
DNS server &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

Enter a name &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; the first client:
Name &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;client&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;: demo-ec2-client

OpenVPN installation is ready to begin.
Press any key to &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Finished!

The client configuration is available in: /home/ubuntu/demo-ec2-client.ovpn
New clients can be added by running this script again.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Use another Terminal to download the &lt;code&gt;.ovpn&lt;/code&gt; file. Assuming that the machine name is &lt;code&gt;ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com&lt;/code&gt; and the generated &lt;code&gt;.ovpn&lt;/code&gt; file is place under &lt;code&gt;~/&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;scp -i sparkle.pem ubuntu@ec2-0-1-2-3.ap-northeast-1.compute.amazonaws.com:~/demo-ec2-client.ovpn ~/Downloads/demo-ec2-client.ovpn
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;connect-to-the-vpn&#34;&gt;Connect to the VPN&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://client.pritunl.com/&#34;&gt;Pritunl Client&lt;/a&gt; is a easy-to-use OpenVPN client. Downlaod and install it.&lt;/p&gt;
&lt;p&gt;Launch the client and click &lt;strong&gt;Import Profile&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/screenshot.png&#34; alt=&#34;Import ovpn profile&#34;&gt;&lt;/p&gt;
&lt;p&gt;After that, click the burger menu of the profile and &lt;strong&gt;Connect&lt;/strong&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Reference:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://comtechies.com/how-to-set-up-gui-on-amazon-ec2-ubuntu-server.html&#34;&gt;https://comtechies.com/how-to-set-up-gui-on-amazon-ec2-ubuntu-server.html&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Atlassian Bamboo: an Opinionated Approach</title>
      <link>https://blog.eternalrecurrence.space/posts/notes-on-atlassian-bamboo/</link>
      <pubDate>Sun, 20 Sep 2020 14:45:18 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/notes-on-atlassian-bamboo/</guid>
      
        <description>&lt;img src=&#34;https://images.unsplash.com/photo-1510707421852-103d8d97c090?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1280&amp;h=630&amp;q=80&#34; /&gt;&lt;blockquote&gt;
&lt;p&gt;This is the introduction related to my experience on using Atlassian Bamboo / MSBuild / MSDeploy / IIS, I will cover the build process / setup in the coming articles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;preface&#34;&gt;Preface&lt;/h1&gt;
&lt;p&gt;This is an article talking about &lt;strong&gt;my experience (≠ 100% solution. ≠ golden rule on CI/CD)&lt;/strong&gt; on using &lt;a href=&#34;https://www.atlassian.com/software/bamboo&#34;&gt;Atlassian Bamboo&lt;/a&gt;. It is &lt;strong&gt;a tool for &lt;a href=&#34;https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment&#34;&gt;continuous integration, deployment, and delivery&lt;/a&gt;&lt;/strong&gt;. I use this tool for all the &lt;strong&gt;.NET-based web applications running on the Windows ecosystem&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note on 2020: &lt;a href=&#34;https://bitbucket.org/product/features/pipelines&#34;&gt;Bitbucket Pipelines&lt;/a&gt; is a newer service created by Atlassian. If you are building applications other then &lt;a href=&#34;https://bitbucket.org/site/master/issues/13452/support-for-native-windows-net-builds-on&#34;&gt;Windows&lt;/a&gt;, &lt;a href=&#34;https://bitbucket.org/site/master/issues/13719/support-for-macos-ios-in-pipelines&#34;&gt;macOS, or iOS&lt;/a&gt; applications then I strongly recommend you to use this instead of Bamboo.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#deployment-cd&#34;&gt;Deployment (CD)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#glossary&#34;&gt;Glossary&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#build-ci&#34;&gt;Build (CI)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#glossary-1&#34;&gt;Glossary&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#git&#34;&gt;Git&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#deployment-cd-1&#34;&gt;Deployment (CD)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#nuget-packages&#34;&gt;Nuget Packages&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#websites&#34;&gt;Websites&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#build-ci-1&#34;&gt;Build (CI)&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#nuget-packages-1&#34;&gt;Nuget Packages&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#websites-1&#34;&gt;Websites&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h1 id=&#34;cicd-principles&#34;&gt;CI/CD principles&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;In my opinion&lt;/strong&gt;, when you start designing your CI/CD workflows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make things &lt;strong&gt;predictable&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Think of the &lt;strong&gt;deployment (CD) first&lt;/strong&gt;, then work backward to the &lt;strong&gt;integration (CI)&lt;/strong&gt; part.&lt;/li&gt;
&lt;li&gt;Use &lt;em&gt;&lt;strong&gt;Gitflow&lt;/strong&gt;&lt;/em&gt; in your source code.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;fundamentals-of-bamboo&#34;&gt;Fundamentals of Bamboo&lt;/h1&gt;
&lt;p&gt;The menu in Bamboo (version 6.5.0) contains 3 parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Projects&lt;/em&gt;,&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Build&lt;/em&gt; and&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Deploy&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913141147305.png&#34; alt=&#34;Build dropdown menu&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913141246490.png&#34; alt=&#34;Deploy dropdown menu&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;deployment-cd&#34;&gt;Deployment (CD)&lt;/h2&gt;
&lt;p&gt;Here is a typical &lt;strong&gt;deployment project summary&lt;/strong&gt; looks like:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913132645203.png&#34; alt=&#34;A typical deployment project&#34;&gt;&lt;/p&gt;
&lt;p&gt;You can check this out by clicking &lt;strong&gt;Deploy&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Deployment Projects&lt;/strong&gt;. After that, choose one of the item on the list.&lt;/p&gt;
&lt;h3 id=&#34;glossary&#34;&gt;Glossary&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Artifact&lt;/em&gt;: The content built in the CI part.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Deployment Environment&lt;/em&gt;: The place the &lt;em&gt;artifacts&lt;/em&gt; should go to.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Release&lt;/em&gt;: A unique (and usually auto-increment) identifier of this deployment.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Deployment Project&lt;/em&gt;: A collection of build plans.&lt;/p&gt;
&lt;h2 id=&#34;build-ci&#34;&gt;Build (CI)&lt;/h2&gt;
&lt;p&gt;Here is a typical build dashboard:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913130048805.png&#34; alt=&#34;A typical build dashboard&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is the default front page of Bamboo. You can also check this out by clicking &lt;strong&gt;Build&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Build Plans&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;glossary-1&#34;&gt;Glossary&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Build&lt;/em&gt;: The build result of the default plan.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Build Plan&lt;/em&gt;: Usually it refers to the definitions of all build-related configuratoins. However, sometimes it &lt;em&gt;also&lt;/em&gt; refers to the &lt;strong&gt;default build barnch&lt;/strong&gt; or the &lt;strong&gt;default branch configurations&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I will try to avoid using the term &lt;em&gt;build plan&lt;/em&gt; in this article as it is a bit confusing. I will use :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;default branch configuratoins&lt;/em&gt; to indicate the default settings of a &lt;em&gt;build plan&lt;/em&gt;;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;default build branch&lt;/em&gt; to indicate the branch associated to the &lt;em&gt;default branch configuratoins&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;When I use the word &lt;em&gt;build plan&lt;/em&gt;, it refers to the item listed under &lt;strong&gt;Plan&lt;/strong&gt; column in the build dashboard.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Build Project&lt;/em&gt;: Similar to &lt;em&gt;Deployment Project&lt;/em&gt;, it&amp;rsquo;s a collection of &lt;em&gt;build plans&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;git&#34;&gt;Git&lt;/h2&gt;
&lt;p&gt;From the basic assumption in the &lt;a href=&#34;#cicd-principles&#34;&gt;CI/CD principles, pt. 3&lt;/a&gt; all the repositories are using &lt;a href=&#34;https://nvie.com/posts/a-successful-git-branching-model/&#34;&gt;Gitflow&lt;/a&gt;. I will use the following conventions when talking about the CI settings.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Default build branch&lt;/em&gt;: git&amp;rsquo;s &lt;code&gt;develop&lt;/code&gt; branch.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Build branch&lt;/em&gt;: All the other git&amp;rsquo;s branches, including &lt;code&gt;feature/*&lt;/code&gt;, &lt;code&gt;release/*&lt;/code&gt;, &lt;code&gt;hotfix/*&lt;/code&gt;, &lt;code&gt;master&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Master branch&lt;/em&gt;: git&amp;rsquo;s &lt;code&gt;master&lt;/code&gt; branch&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Linked Repository&lt;/em&gt;: Store all the git repository connection setups for later user in CI/CD steps. It&amp;rsquo;s under &lt;strong&gt;⚙️ (Bamboo Administration)&lt;/strong&gt; &amp;gt; &lt;strong&gt;Linked repositories&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919094705047.png&#34; alt=&#34;Bamboo Administration &gt; Linked repositories&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is an example for a class library:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919093103200.png&#34; alt=&#34;Plan branches in a class library build plan&#34;&gt;&lt;/p&gt;
&lt;p&gt;And this is an example for website:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200919093317277.png&#34; alt=&#34;Plan branches in a website build plan&#34;&gt;&lt;/p&gt;
&lt;p&gt;Next, I will talk about how to &lt;strong&gt;design&lt;/strong&gt; a CD flow, then a CI flow.&lt;/p&gt;
&lt;h1 id=&#34;designing-a-cicd-workflow&#34;&gt;Designing a CI/CD workflow&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Assumption: you are using &lt;a href=&#34;https://datasift.github.io/gitflow/IntroducingGitFlow.html&#34;&gt;&lt;em&gt;gitflow&lt;/em&gt;&lt;/a&gt; to manage your git repository.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In short:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Deployment&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 &lt;em&gt;deoloyment project&lt;/em&gt;, many &lt;em&gt;deployment plans&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;1 destination, 1 &lt;em&gt;deployment plan&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Integration&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 Bitbucket git repository, (usually) 1 Bamboo &lt;em&gt;build plan&lt;/em&gt;
&lt;ul&gt;
&lt;li&gt;build the &lt;code&gt;develop&lt;/code&gt; branch using &lt;strong&gt;default plan configuration&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;git branch &amp;lt;&amp;ndash;&amp;gt; &lt;em&gt;Branch config&lt;/em&gt; of a build plan&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1 Bitbucket project,  1Bamboo &lt;em&gt;build project&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;deployment-cd-1&#34;&gt;Deployment (CD)&lt;/h2&gt;
&lt;p&gt;All the deployments in my team can be categorized in to 2 types: either a &lt;strong&gt;library&lt;/strong&gt; (i.e. a nuget package) or a &lt;strong&gt;website&lt;/strong&gt; (i.e. an IIS website).&lt;/p&gt;
&lt;h3 id=&#34;nuget-packages&#34;&gt;Nuget Packages&lt;/h3&gt;
&lt;p&gt;My team is using &lt;a href=&#34;https://myget.org/&#34;&gt;MyGet&lt;/a&gt; to host private packages. So, there is only 1 destination for my &lt;em&gt;artifact&lt;/em&gt; goes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913153116958.png&#34; alt=&#34;Bamboo class library CD flow&#34;&gt;&lt;/p&gt;
&lt;p&gt;This is how I organize the &lt;em&gt;deployment project&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913154357682.png&#34; alt=&#34;Class library deployment project setup&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Deployment Project
├── Production environment: for builds from master
└── Pre-release environment: all other branches
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;websites&#34;&gt;Websites&lt;/h3&gt;
&lt;p&gt;We have 2 web servers for production and other environments has a corresponding web server. All running IIS. On the other hand, some of the websites are hosting under a sub-directory (as a sub-site).&lt;/p&gt;
&lt;p&gt;Therefore, an &lt;em&gt;artifact&lt;/em&gt; may goes to multiple destinations.&lt;/p&gt;
&lt;p&gt;In my design, 1 &lt;em&gt;deployment environment&lt;/em&gt; responsibles for 1 destination (i.e. 1 IIS web server).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913190536806.png&#34; alt=&#34;Bamboo website CD flow&#34;&gt;&lt;/p&gt;
&lt;p&gt;So you may ask: why not 1 deployment environment for 1 environment? Here&amp;rsquo;s why:&lt;/p&gt;
&lt;h4 id=&#34;1-to-1-mapping-of-deployment-environment-and-iis-website&#34;&gt;1-to-1 mapping of &lt;em&gt;deployment environment&lt;/em&gt; and &lt;em&gt;IIS website&lt;/em&gt;&lt;/h4&gt;
&lt;h5 id=&#34;the-bad&#34;&gt;The bad&lt;/h5&gt;
&lt;p&gt;One of the downside is: It takes longer time to deploy all websites. Consider the case of deploying 2 &lt;em&gt;deployment projects&lt;/em&gt; at the same time, and each project has multiple &lt;em&gt;deployment environments&lt;/em&gt;. The sequence of deployment activities can be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;deploy site A to environment A&lt;/li&gt;
&lt;li&gt;deploy site B to environment A&lt;/li&gt;
&lt;li&gt;deploy site A to environment B (triggered by activity 1.)&lt;/li&gt;
&lt;li&gt;deploy site B to environment B (triggered by activity 2.)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Which means I have to wait for the deployment of another website.&lt;/p&gt;
&lt;h5 id=&#34;the-good&#34;&gt;The good&lt;/h5&gt;
&lt;p&gt;The biggest advantage of doing so is that modefying one &lt;em&gt;deployment environment&lt;/em&gt; does not affect any settings of the other &lt;em&gt;deployment environments&lt;/em&gt;. Then, I can do the following things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A/B testing&lt;/li&gt;
&lt;li&gt;Rollback the version of a specific web server&lt;/li&gt;
&lt;li&gt;Check out the audit log / deployment history for a particular web server&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Moreover, you can see the status of all environments in the &lt;strong&gt;All Deployment Projects&lt;/strong&gt; page (&lt;strong&gt;Deploy&lt;/strong&gt; &amp;gt; &lt;strong&gt;All Deployment Projects&lt;/strong&gt;).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If deployment of a particular web server is failed, I am able to find out which server is it easily&lt;/li&gt;
&lt;li&gt;Plus, I can just re-deploy to that particuler web server&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can create a new &lt;em&gt;deployment environment&lt;/em&gt; by cloning an existing one (from the same &lt;em&gt;deployment project&lt;/em&gt; or from another one). Thus, this is not a tedious task.&lt;/p&gt;
&lt;p&gt;(I am not sure about the above observation and please do let me know if I got something wrong or there are any better solutions.)&lt;/p&gt;
&lt;h5 id=&#34;my-decision&#34;&gt;My decision&lt;/h5&gt;
&lt;p&gt;This is how I organize the &lt;em&gt;deployment project&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200913154337848.png&#34; alt=&#34;Website deployment project setup&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Deployment Project
├── Production (A) environment: for builds from master / release
├── Production (B) environment: for builds from master / release
├── Staging environment: all other branches
└── UAT environment: all other branches
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;build-ci-1&#34;&gt;Build (CI)&lt;/h2&gt;
&lt;p&gt;Similarly, my team has to build nuget packages, .NET Framework and .NET Core web applications.&lt;/p&gt;
&lt;p&gt;In my case, the CI part has a close relationship with the &lt;strong&gt;gitflow&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;nuget-packages-1&#34;&gt;Nuget Packages&lt;/h3&gt;
&lt;p&gt;I need to build 2 kinds of &lt;em&gt;artifacts&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Testing package: &lt;strong&gt;Prerelease&lt;/strong&gt;;&lt;/li&gt;
&lt;li&gt;Production package; &lt;strong&gt;Release&lt;/strong&gt; (used by other solutions/projects in production) deployment.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;planbranch-configurations&#34;&gt;Plan/Branch configurations&lt;/h4&gt;
&lt;p&gt;(See the &lt;a href=&#34;#default-configurations-develop&#34;&gt;Websites&lt;/a&gt; section.)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/ci-cd-CI-Nuget.png&#34; alt=&#34;Bamboo class library CI flow&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;websites-1&#34;&gt;Websites&lt;/h3&gt;
&lt;p&gt;I need to build 2-3 kinds of &lt;em&gt;artifacts&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For &lt;strong&gt;UAT&lt;/strong&gt; environment;&lt;/li&gt;
&lt;li&gt;For &lt;strong&gt;Staging&lt;/strong&gt; environment (this environment is not 24/7 and will be set up when necessary);&lt;/li&gt;
&lt;li&gt;For &lt;strong&gt;Production&lt;/strong&gt; environment.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./img/ci-cd-CI-IIS.png&#34; alt=&#34;Bamboo website CI flow&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;default-configurations-develop&#34;&gt;Default configurations: &lt;code&gt;develop&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;For the default settings in a &lt;em&gt;build plan&lt;/em&gt;, always choose the &lt;code&gt;develop&lt;/code&gt; as the main branch and allow Bamboo to create/remove all the &lt;code&gt;feature/*&lt;/code&gt;, &lt;code&gt;hotfix/*&lt;/code&gt; branches.&lt;/p&gt;
&lt;h4 id=&#34;production-configurations-master&#34;&gt;Production configurations: &lt;code&gt;master&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Define a build plan for &lt;code&gt;master&lt;/code&gt; branch. Uncheck &lt;strong&gt;Clean up plan branch automatically&lt;/strong&gt; under &lt;strong&gt;Branch details&lt;/strong&gt; tab to  prevent this branch being deleted by Bamboo.&lt;/p&gt;
&lt;h5 id=&#34;note-on-release-branches&#34;&gt;Note on &lt;code&gt;release&lt;/code&gt; branches&lt;/h5&gt;
&lt;p&gt;I ususlly not using &lt;code&gt;release&lt;/code&gt; branch. When I use that, I will set up a build branch &lt;strong&gt;manually&lt;/strong&gt;, just like the &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;staging-configurations-staging&#34;&gt;Staging configurations: &lt;code&gt;staging&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Just like the set up of &lt;strong&gt;production configurations&lt;/strong&gt;. However, change the variables for the staging environment.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200920110535916.png&#34; alt=&#34;Build branch configuration - Branch details&#34;&gt;&lt;/p&gt;
&lt;p&gt;You may also need to override the &lt;em&gt;default branch configurations&lt;/em&gt; under the &lt;strong&gt;Variables&lt;/strong&gt; tab.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/image-20200920110548520.png&#34; alt=&#34;Build branch configuration - Variables&#34;&gt;&lt;/p&gt;
&lt;p&gt;You can find these tabs under form the top menu: &lt;strong&gt;Build&lt;/strong&gt; &amp;gt; &lt;strong&gt;All build plans&lt;/strong&gt; &amp;gt; &lt;strong&gt;🖋&lt;/strong&gt; (right end of the plan) &amp;gt; (Choose the plan branch name).&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Ruby Cheatsheet</title>
      <link>https://blog.eternalrecurrence.space/posts/ruby-cheatsheet/</link>
      <pubDate>Tue, 15 Sep 2020 08:40:48 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/ruby-cheatsheet/</guid>
      
        <description>&lt;img src=&#34;https://static.dribbble.com/users/79571/screenshots/2232375/ruby.png&#34; /&gt;&lt;p&gt;This post contains many useful snippets for me when writing &lt;strong&gt;Ruby&lt;/strong&gt; scripts. I will keep updating this note in the future.&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-file&#34;&gt;🏷 About File&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#absolute-path&#34;&gt;Absolute Path&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#read--write-a-file&#34;&gt;Read / Write a file&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-string&#34;&gt;🏷 About String&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#string-template&#34;&gt;String template&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#string-interpolation&#34;&gt;String Interpolation&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#trim-a-string&#34;&gt;Trim a String&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#null-or-empty&#34;&gt;Null Or Empty&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#titlecase--uppercase--lowercase--capitalize&#34;&gt;Titlecase / UPPERCASE / lowercase / Capitalize&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-input&#34;&gt;🏷 About Input&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#console-input&#34;&gt;Console Input&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-regex&#34;&gt;🏷 About Regex&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#named-regex-capturing-group&#34;&gt;Named regex capturing group&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#-about-bundler-and-gemfile&#34;&gt;🏷 About Bundler and Gemfile&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#install-bundler&#34;&gt;Install bundler&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#setup-and-restore-dependencies&#34;&gt;Setup and restore dependencies&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#check-the-info-of-a-installed-gem&#34;&gt;Check the info of a installed gem&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;-about-file&#34;&gt;🏷 About File&lt;/h2&gt;
&lt;h3 id=&#34;absolute-path&#34;&gt;Absolute Path&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;__dir__&lt;/code&gt; returns the current path.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(__dir__, file_name_no_path )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;read--write-a-file&#34;&gt;Read / Write a file&lt;/h3&gt;
&lt;p&gt;Read the content of &lt;code&gt;file_name&lt;/code&gt; to &lt;code&gt;buffer&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;buffer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read( file_name )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Write &lt;code&gt;content&lt;/code&gt; to &lt;code&gt;file_name&lt;/code&gt;. File will be created when it does not exist.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;open( file_name , &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;w&amp;#34;&lt;/span&gt;) { &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;f&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; f&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;write( content ) }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-about-string&#34;&gt;🏷 About String&lt;/h2&gt;
&lt;h3 id=&#34;string-template&#34;&gt;String template&lt;/h3&gt;
&lt;p&gt;To create a multiline string template:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;template &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;-EOCONTENT
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Your
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Multiline
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Text
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Content
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOCONTENT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;string-interpolation&#34;&gt;String Interpolation&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;str &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;This is a string with &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#{&lt;/span&gt;variable_name&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;.&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;trim-a-string&#34;&gt;Trim a String&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;    Hello James &amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;strip  &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello James&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;null-or-empty&#34;&gt;Null Or Empty&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nil? ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;not_null&amp;#34;&lt;/span&gt;
str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;empty? ? &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;empty&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;not_empty&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;titlecase--uppercase--lowercase--capitalize&#34;&gt;Titlecase / UPPERCASE / lowercase / Capitalize&lt;/h3&gt;
&lt;p&gt;All returns a new copy. Examples from &lt;a href=&#34;https://stackoverflow.com/a/1020571/13742790&#34;&gt;this answer in StackOverflow&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;titleize    &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello James&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;upcase      &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;HELLO JAMES&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;downcase    &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;hello james&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;capitalize  &lt;span style=&#34;color:#75715e&#34;&gt;#=&amp;gt; &amp;#34;Hello james&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note: &lt;strong&gt;Alter the original string&lt;/strong&gt; by adding &lt;code&gt;!&lt;/code&gt; right after the method.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello James&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;downcase!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-about-input&#34;&gt;🏷 About Input&lt;/h2&gt;
&lt;h3 id=&#34;console-input&#34;&gt;Console Input&lt;/h3&gt;
&lt;p&gt;Ask a question and wait for user input:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Your question: &amp;#34;&lt;/span&gt;
user_input &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; gets
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(you may need to &lt;code&gt;strip&lt;/code&gt; the &lt;code&gt;user_input&lt;/code&gt; to ger rid of a tailing newline.)&lt;/p&gt;
&lt;h2 id=&#34;-about-regex&#34;&gt;🏷 About Regex&lt;/h2&gt;
&lt;p&gt;Test a ruby regex: &lt;a href=&#34;https://rubular.com/&#34;&gt;https://rubular.com/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;named-regex-capturing-group&#34;&gt;Named regex capturing group&lt;/h3&gt;
&lt;p&gt;Steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Prepare the regex: &lt;code&gt;^(\w+)(Query|Command)$&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;?&amp;lt;named_group&amp;gt;&lt;/code&gt; at the beginning &lt;strong&gt;inside&lt;/strong&gt; that capturing group.&lt;/li&gt;
&lt;li&gt;Do the regex &lt;code&gt;match()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Retrieve the named group: &lt;code&gt;[:named_group]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## name: SomeStuffQuery ; result: SomeStuff&lt;/span&gt;
result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;/^(?&amp;lt;named_group&amp;gt;\w+)(Query|Command)$/&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;match(name)&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:named_group&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If your regex is valid, you should be able to see the captured group and related content:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.eternalrecurrence.space/img/image-20200915091031591.png&#34; alt=&#34;image-20200915091031591&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;-about-bundler-and-gemfile&#34;&gt;🏷 About Bundler and Gemfile&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://bundler.io/&#34;&gt;Bundler&lt;/a&gt; helps you to manage gem denendencies in your project.&lt;/p&gt;
&lt;h3 id=&#34;install-bundler&#34;&gt;Install bundler&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-zsh&#34; data-lang=&#34;zsh&#34;&gt;gem install bundler
bundler -v
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;setup-and-restore-dependencies&#34;&gt;Setup and restore dependencies&lt;/h3&gt;
&lt;p&gt;Create a &lt;code&gt;Gemfile&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-gemfile&#34; data-lang=&#34;gemfile&#34;&gt;source &#39;https://rubygems.org&#39;
gem &#39;dotenv&#39;, &#39;~&amp;gt; 2.7&#39;, &#39;&amp;gt;= 2.7.5&#39;
gem &amp;quot;mustache&amp;quot;, &amp;quot;~&amp;gt; 1.0&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;globally&#34;&gt;Globally&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;bundle &lt;span style=&#34;color:#75715e&#34;&gt;# may requires sudo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;locally&#34;&gt;Locally&lt;/h4&gt;
&lt;p&gt;To install gems at a relative path e.g. at the &lt;code&gt;lib&lt;/code&gt; folder:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;bundle install --path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;./lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;a &lt;code&gt;.bundle&lt;/code&gt; folder will be generated, together with your &lt;code&gt;Gemfile.lock&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;check-the-info-of-a-installed-gem&#34;&gt;Check the info of a installed gem&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;❯ bundle info ruby_http_client
  * ruby_http_client &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;3.5.1&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
        Summary: A simple REST client
        Homepage: http://github.com/sendgrid/ruby-http-client
        Path: ~/git/my-folder/lib/ruby/2.6.0/gems/ruby_http_client-3.5.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;&lt;em&gt;(cover image from &lt;a href=&#34;https://dribbble.com/shots/2232375-Ruby&#34;&gt;this dribble&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Use Gravatar Everywhere</title>
      <link>https://blog.eternalrecurrence.space/posts/use-gravatar-everywhere/</link>
      <pubDate>Sat, 18 Jul 2020 12:01:56 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/use-gravatar-everywhere/</guid>
      
        <description>&lt;h3 id=&#34;what-is-gravatar&#34;&gt;What is Gravatar&lt;/h3&gt;
&lt;p&gt;Your public profile on the internet, provided by Wordpress. See &lt;a href=&#34;https://en.gravatar.com/&#34;&gt;https://en.gravatar.com/&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;1-upload-an-image-to-your-gravatar-account&#34;&gt;1. Upload an image to your gravatar account&lt;/h3&gt;
&lt;p&gt;If you don&amp;rsquo;t have the gravatar account, create one. Make sure that the email you used to create the account will be the email account you want to link your profile picture.&lt;/p&gt;
&lt;p&gt;After that, upload your profile picture to gravatar.&lt;/p&gt;
&lt;h3 id=&#34;2-use-the-image-everywhere&#34;&gt;2. Use the image everywhere&lt;/h3&gt;
&lt;h4 id=&#34;get-your-md5-hash-of-email-address&#34;&gt;Get your md5 hash of email address&lt;/h4&gt;
&lt;p&gt;For MacOS user, you should have the md5 utility installed, go to the terminal and check:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;❯ which md5
/sbin/md5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, generate the md5 has of your email address:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;❯ md5 -s &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;myemall@address.com&amp;#34;&lt;/span&gt;
MD5 &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;myemall@address.com&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ca49930cff2f87bd37bfe71ce21467f
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The gravatar image url is in this format:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gravatar.com/avatar/{your md5 hash}?s={size}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If you want to have a 200px avatar, use &lt;code&gt;https://gravatar.com/avatar/ca49930cff2f87bd37bfe71ce21467f?s=200&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;use this image url in &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://gravatar.com/avatar/ca49930cff2f87bd37bfe71ce21467f?s=200&amp;#34;&lt;/span&gt; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And you are good to go!&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Displaying the Full Content in Hugo&#39;s RSS feed</title>
      <link>https://blog.eternalrecurrence.space/posts/displaying-the-full-content-in-hugo-rss-feed/</link>
      <pubDate>Fri, 03 Jul 2020 09:53:38 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/displaying-the-full-content-in-hugo-rss-feed/</guid>
      
        <description>&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;
&lt;p&gt;Recently I created a hugo blog and started writing articles (yes, that&amp;rsquo;s the blog you are reading). Later, I found that dev.to can &lt;a href=&#34;https://dev.to/settings/publishing-from-rss&#34;&gt;publish articles (as draft) from a RSS feed&lt;/a&gt;. In that way I don&amp;rsquo;t have to copy-and-paste my articles manually in order to publish the same item on dev.to!&lt;/p&gt;
&lt;aside class=&#34;c-toc&#34;&gt;
  &lt;details open&gt;
    &lt;summary title=&#34;click to toggle table of contents.&#34;&gt;Table of Contents&lt;/summary&gt;
    &lt;nav id=&#34;TableOfContents&#34;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&#34;#background&#34;&gt;Background&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#problem&#34;&gt;😨 Problem&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#solution&#34;&gt;😀 Solution&lt;/a&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;a href=&#34;#locating-rssxml&#34;&gt;Locating &lt;code&gt;rss.xml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#rendering-the-full-content&#34;&gt;Rendering the full content&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&#34;#regenerating-the-site&#34;&gt;Regenerating the site&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#bonus-the-difference-between--and---in-hugo&#34;&gt;Bonus: The difference between &lt;code&gt;{{&lt;/code&gt; and &lt;code&gt;{{-&lt;/code&gt; in Hugo&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&#34;#conclusion&#34;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
  &lt;/details&gt;
&lt;/aside&gt;

&lt;h2 id=&#34;problem&#34;&gt;😨 Problem&lt;/h2&gt;
&lt;p&gt;Although dev.to&amp;rsquo;s puslishing from RSS feed service is great, my Hugo site is not that great (with the basic settings). &lt;strong&gt;When I was trying to sync my RSS feed items to dev.to, all items can be imported but only the beginning part of the content was fetched.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I know that should be something wrong with the RSS feeds generated by Hugo. The &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/master/tpl/tplimpl/embedded/templates/_default/rss.xml&#34;&gt;default Hugo RSS template&lt;/a&gt; only renders &lt;code&gt;Summary&lt;/code&gt; of an article and my Hugo theme is using that:&lt;/p&gt;
&lt;script type=&#34;application/javascript&#34; src=&#34;https://gist.github.com/bemnlam/83b253aef5526c30ca5535c72bd861cc.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;As you can see in &lt;strong&gt;line 73&lt;/strong&gt;, the &lt;a href=&#34;https://validator.w3.org/feed/docs/rss2.html&#34;&gt;&lt;code&gt;&amp;lt;description&amp;gt;&lt;/code&gt;&lt;/a&gt;  in my RSS feeds contain article summary only but not the full content. Is there any ways to change the &lt;code&gt;Summary&lt;/code&gt; here into something else? Something else that represents the &lt;strong&gt;full content&lt;/strong&gt;?&lt;/p&gt;
&lt;h2 id=&#34;solution&#34;&gt;😀 Solution&lt;/h2&gt;
&lt;h3 id=&#34;locating-rssxml&#34;&gt;Locating &lt;code&gt;rss.xml&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Usually, Hugo templates are placed under &lt;code&gt;{your hugo theme}/layouts/_defualt/&lt;/code&gt;. If such file does not exist, it&amp;rsquo;s time to create one. You can copy-and-paste the code from &lt;a href=&#34;https://github.com/gohugoio/hugo/blob/master/tpl/tplimpl/embedded/templates/_default/rss.xml&#34;&gt;Hugo&amp;rsquo;s github&lt;/a&gt; or run the following &lt;code&gt;curl&lt;/code&gt; command under &lt;code&gt;/layouts/_default&lt;/code&gt; to download it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;curl &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://raw.githubusercontent.com/gohugoio/hugo/master/tpl/tplimpl/embedded/templates/_default/rss.xml&amp;#34;&lt;/span&gt; &amp;gt; rss.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;rendering-the-full-content&#34;&gt;Rendering the full content&lt;/h3&gt;
&lt;p&gt;Rendering the full content of is really simple and straight-forward. What you need to do is just replacing this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#75715e&#34;&gt;{{&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Summary&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;}}&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#75715e&#34;&gt;{{-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Content&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;-}}&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Caution: use &lt;code&gt;{{-&lt;/code&gt; instead of &lt;code&gt;{{&lt;/code&gt;. Read &lt;a href=&#34;#bonus-the-difference-between--and---in-hugo&#34;&gt;the bonus part&lt;/a&gt; if you want to know what is the difference.&lt;/p&gt;
&lt;h3 id=&#34;regenerating-the-site&#34;&gt;Regenerating the site&lt;/h3&gt;
&lt;p&gt;Updating the RSS template &lt;strong&gt;will not&lt;/strong&gt; update your &lt;strong&gt;generated content&lt;/strong&gt; automatically. Therefore, you need to re-generate your Hugo site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You should see the changes in all RSS xml files (from git). After that, push all the code changes, remove all the fetched posts in dev.to and re-fetch them. That&amp;rsquo;s it.&lt;/p&gt;
&lt;h2 id=&#34;bonus-the-difference-between--and---in-hugo&#34;&gt;Bonus: The difference between &lt;code&gt;{{&lt;/code&gt; and &lt;code&gt;{{-&lt;/code&gt; in Hugo&lt;/h2&gt;
&lt;p&gt;You may notice that the template code is changed into &lt;code&gt;{{-&lt;/code&gt; from &lt;code&gt;{{&lt;/code&gt;. As a newbie in Hugo I checked &lt;a href=&#34;https://gohugo.io/templates/introduction/#whitespace&#34;&gt;the Hugo&amp;rsquo;s official documentation about &lt;em&gt;whitespace&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;hellip; the ability to trim the whitespace from either side of a Go tag &amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This &lt;code&gt;-&lt;/code&gt; notation is introduced in Go 1.6.&lt;/p&gt;
&lt;p&gt;The following example (from the documentation):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go-html-template&#34; data-lang=&#34;go-html-template&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;{{&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Title&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;}}&lt;/span&gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;{{-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;.Title&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;-}}&lt;/span&gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Which will output:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
  Hello, World!
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;Hello, World!&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In other words, that&amp;rsquo;s the &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim&#34;&gt;&lt;code&gt;trim()&lt;/code&gt;&lt;/a&gt; in JavaScript. That&amp;rsquo;s the &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/system.string.trim&#34;&gt;&lt;code&gt;String.Trim()&lt;/code&gt;&lt;/a&gt; in C#.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The default RSS feed in Hugo site shows &lt;em&gt;article abstract&lt;/em&gt; only. By defining a custom &lt;code&gt;rss.xml&lt;/code&gt; template and replacing &lt;code&gt;{{ .Summary | html }}&lt;/code&gt; with &lt;code&gt;{{- .Content | html -}}&lt;/code&gt; in the &lt;code&gt;&amp;lt;description&amp;gt;&lt;/code&gt; tag you will get the article&amp;rsquo;s full content in the re-generated RSS xml files.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>🐞 Battling With Gulp and Node</title>
      <link>https://blog.eternalrecurrence.space/posts/battling-with-gulp-and-node/</link>
      <pubDate>Sat, 27 Jun 2020 16:03:12 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/battling-with-gulp-and-node/</guid>
      
        <description>&lt;h2 id=&#34;-problem&#34;&gt;😨 Problem&lt;/h2&gt;
&lt;p&gt;When I was building a website using &lt;code&gt;gulp@^3.9.0&lt;/code&gt; to compile sass on the build server with Node.js v12 installed, it failed.&lt;/p&gt;
&lt;p&gt;Here are (part of) the errors shown in the console:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-systemverilog&#34; data-lang=&#34;systemverilog&#34;&gt;error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;v v12&lt;span style=&#34;color:#ae81ff&#34;&gt;.18.0&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gyp &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;v v3&lt;span style=&#34;color:#ae81ff&#34;&gt;.8.0&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	gyp ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; ok 
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;02&lt;/span&gt;	Build failed &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; error code: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; code ELIFECYCLE
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; errno &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sass@&lt;span style=&#34;color:#ae81ff&#34;&gt;4.9.3&lt;/span&gt; postinstall: &lt;span style=&#34;color:#66d9ef&#34;&gt;`node&lt;/span&gt; scripts&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;build.js&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;`&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; Exit status &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; 
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; Failed at the node&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sass@&lt;span style=&#34;color:#ae81ff&#34;&gt;4.9.3&lt;/span&gt; postinstall script.
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;05&lt;/span&gt;	npm ERR&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt; This is probably &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; a problem &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; npm. There is likely additional logging &lt;span style=&#34;color:#66d9ef&#34;&gt;output&lt;/span&gt; above.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(OK I know that&amp;rsquo;s not your fault, &lt;code&gt;npm&lt;/code&gt;.) Here is my &lt;code&gt;package.json&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;devDependencies&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^3.9.0&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-concat&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^2.6.0&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-minify-css&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^1.2.4&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-rename&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^1.2.2&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-sass&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^4.0.2&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;gulp-sourcemaps&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;-node-sass&#34;&gt;😐 &lt;code&gt;node-sass&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I noticed that should be something wrong with &lt;code&gt;node-sass&lt;/code&gt;, which being used in &lt;code&gt;gulp-sass&lt;/code&gt;. I met this issues before and from my experience, &lt;a href=&#34;https://stackoverflow.com/a/45807410/13742790&#34;&gt;&lt;code&gt;node-sass&lt;/code&gt; will try to download the corresponding prebuilt binary&lt;/a&gt; base on your OS or build it locally using &lt;code&gt;python&lt;/code&gt;, &lt;code&gt;MSBuild&lt;/code&gt;, etc&amp;hellip; (That&amp;rsquo;s why you will met lots of questions in Stack Overflow asking &lt;strong&gt;&lt;code&gt;python2&lt;/code&gt; not found when installing &lt;code&gt;node-sass&lt;/code&gt;&lt;/strong&gt; ,  &lt;strong&gt;what&amp;rsquo;s wrong with my &lt;code&gt;node-sass&lt;/code&gt;&lt;/strong&gt; or &lt;strong&gt;I got a panic attack when dealing with &lt;code&gt;node-sass&lt;/code&gt; should I consult a developer or a doctor first?&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;For this &lt;code&gt;node-sass&lt;/code&gt; issue, &lt;a href=&#34;https://hisk.io/how-to-fix-node-js-gyp-err-cant-find-python-executable-python-on-windows/&#34;&gt;you can try to run this on Windows&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;npm install --global --production windows-build-tools
npm install node-gyp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Or try to delete &lt;code&gt;package-lock.json&lt;/code&gt; and &lt;code&gt;node_modules&lt;/code&gt; first and do a &lt;code&gt;npm install&lt;/code&gt; if you can install all packages successfully on let say Mac OS but failed on Windows.&lt;/p&gt;
&lt;p&gt;👆Those tricks saved me most of the time.&lt;/p&gt;
&lt;h4 id=&#34;i-just-want-to-get-my-css-files-back-and-you-told-me-i-have-to-install-this-and-that-and-download-node-npm-python-ms-build-tools-some-prebuilt-binaries-are-you-serious-node-sass&#34;&gt;&lt;del&gt;I just want to get my css files back and you told me I have to install this and that and download node npm python ms build tools some prebuilt binaries? Are you serious, node-sass?&lt;/del&gt;&lt;/h4&gt;
&lt;h3 id=&#34;-referenceerror-primordials-is-not-defined&#34;&gt;😑 ReferenceError: primordials is not defined&lt;/h3&gt;
&lt;p&gt;After the &lt;code&gt;node-sass&lt;/code&gt; issue was solved, the build server ran the build jobs again and got these errors:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-systemverilog&#34; data-lang=&#34;systemverilog&#34;&gt;error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	fs.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	} &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; primordials;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    &lt;span style=&#34;color:#f92672&#34;&gt;^&lt;/span&gt;
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	ReferenceError: primordials is &lt;span style=&#34;color:#66d9ef&#34;&gt;not&lt;/span&gt; defined
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at fs.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;35&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
## ( blah blah blah ) ##
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module._compile (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1138&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Object.Module._extensions..js (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1158&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module.load (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;986&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Function.Module._load (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;879&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at Module.require (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;loader.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;1026&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;)
error	&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Jun&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2020&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;53&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;06&lt;/span&gt;	    at require (internal&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;modules&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;cjs&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;helpers.js:&lt;span style=&#34;color:#ae81ff&#34;&gt;72&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/a/55926692/13742790&#34;&gt;This answer from Stack Overflow&lt;/a&gt; states that it is due to Node.js v12 does not compatible with Gulp v3 &lt;strong&gt;and you need to upgrade Gulp to v4&lt;/strong&gt;. I know &lt;strong&gt;I should&lt;/strong&gt; do that but I also know that I will meet the &lt;a href=&#34;https://github.com/sindresorhus/del/issues/45&#34;&gt;Did you forget to signal async completion?&lt;/a&gt; issue which also will cause an epic fail of the build &lt;strong&gt;unless I re-write the gulp tasks&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t want to change my &lt;code&gt;gulpfile.js&lt;/code&gt; and I don&amp;rsquo;t want to upgrade &lt;code&gt;gulp&lt;/code&gt;. Not now.  That&amp;rsquo;s why I started searching for a solution without changing any configurations of the build server as well as the gulp setup in the project.&lt;/p&gt;
&lt;h2 id=&#34;-solution-adding-a-npm-shrinkwrapjson&#34;&gt;😀 Solution: adding a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Eventually I &lt;a href=&#34;https://stackoverflow.com/questions/55921442/how-to-fix-referenceerror-primordials-is-not-defined-in-node/58394828#58394828&#34;&gt;found a solution&lt;/a&gt; on how to handle this &amp;ldquo;Gulp VS Node&amp;rdquo; situation. What we need is create a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; file under the same directory with &lt;code&gt;package.json&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The content of the json file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;dependencies&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;graceful-fs&amp;#34;&lt;/span&gt;: {
      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4.2.3&amp;#34;&lt;/span&gt;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that I can build the project and finish all the gulp tasks without errors 🎉.&lt;/p&gt;
&lt;h3 id=&#34;-so-whats-going-on&#34;&gt;🤔 So, what&amp;rsquo;s going on?&lt;/h3&gt;
&lt;p&gt;From the npm&amp;rsquo;s official documentation on the &lt;a href=&#34;https://docs.npmjs.com/cli/shrinkwrap&#34;&gt;&lt;code&gt;npm-shrinkwrap&lt;/code&gt; command&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This command repurposes package-lock.json into a publishable npm-shrinkwrap.json or simply creates a new one. The file created and updated by this command will then take precedence over any other existing or future package-lock.json files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And from the documentation on the &lt;a href=&#34;https://docs.npmjs.com/files/shrinkwrap.json&#34;&gt;&lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;hellip; Additionally, if both &lt;code&gt;package-lock.json&lt;/code&gt; and &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; are present in a package root, &lt;code&gt;package-lock.json&lt;/code&gt; will be ignored in favor of this file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In other words, this file has a &lt;em&gt;higher priority&lt;/em&gt; then &lt;code&gt;package-lock.json&lt;/code&gt;. However, why this file can solve the build error?&lt;/p&gt;
&lt;h4 id=&#34;thefs-module&#34;&gt;The&lt;code&gt;fs&lt;/code&gt; module&lt;/h4&gt;
&lt;p&gt;Node&amp;rsquo;s &lt;code&gt;fs&lt;/code&gt; module got some changes since &lt;strong&gt;v11.15&lt;/strong&gt; which cause the &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt; package does not work anymore. Unfortunately, &lt;code&gt;gulp@3.9.1&lt;/code&gt; depends on  &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt;. As a result, running the gulp tasks on Node.js v12 will cause the &lt;code&gt;primordials is not defined&lt;/code&gt; error.&lt;/p&gt;
&lt;h4 id=&#34;the-fix&#34;&gt;The fix&lt;/h4&gt;
&lt;p&gt;After we added the &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt;, from my understanding it locked down the version of package(s) used by the execution environment to the version stated in that file (and ignore the setup in &lt;code&gt;package-lock.json&lt;/code&gt;.In the above case, the &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; tells Node.js 12 use &lt;code&gt;graceful-fs@4.2.3&lt;/code&gt; instead of &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt;. This combination works. Meanwhile, the &lt;code&gt;gulp&lt;/code&gt; package will still reference to the &lt;code&gt;package.json&lt;/code&gt; and &lt;code&gt;package-lock.json&lt;/code&gt; file and use the &lt;code&gt;graceful-fs@^3.0.0&lt;/code&gt; package. This combination also works.&lt;/p&gt;
&lt;h2 id=&#34;-conclusion&#34;&gt;🎯 Conclusion&lt;/h2&gt;
&lt;p&gt;I got some build errors when using &lt;code&gt;gulp@^3.9.0&lt;/code&gt; and &lt;code&gt;gulp-sass&lt;/code&gt; under Node.js 12. After I delete the &lt;code&gt;package-lock.json&lt;/code&gt; and  re-run &lt;code&gt;npm install&lt;/code&gt;, the sass problem solved. Next, I added a &lt;code&gt;npm-shrinkwrap.json&lt;/code&gt; to (temporarily) solve the incompatable issue with old gulp running on new Node.js.&lt;/p&gt;
&lt;h4 id=&#34;can-i-call-this-the-node-version-of-dependency-hell1&#34;&gt;&lt;del&gt;Can I call this the Node version of &lt;strong&gt;dependency hell&lt;/strong&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;?&lt;/del&gt;&lt;/h4&gt;
&lt;h6 id=&#34;-references&#34;&gt;🔗 references:&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://mejiblog.com/gulp-error/&#34;&gt;ReferenceError: primordials is not defined の解決方法【備忘録】&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mejiblog.com/gulpfile-change/&#34;&gt;Task function must be specified 解決方法【備忘録】&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mafintosh/prebuildify-ci/issues/5#issuecomment-550867124&#34;&gt;Node 12: Errors with &amp;lsquo;primordials is not defined&amp;rsquo; #5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.icetutor.com/how-to-fix-referenceerror-primordials-is-not-defined-error/&#34;&gt;How to fix “ReferenceError: primordials is not defined” error&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;&lt;a href=&#34;https://en.m.wikipedia.org/wiki/Dependency_hell&#34;&gt;https://en.m.wikipedia.org/wiki/Dependency_hell&lt;/a&gt; &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
      
    </item>
    
    <item>
      <title>🐞 GitVersioning: &#39;ThisAssembly&#39; Is Inaccessible Due to Its Protection Level</title>
      <link>https://blog.eternalrecurrence.space/posts/git-versioning-this-assembly-is-inaccessible-due-to-its-protection-level/</link>
      <pubDate>Thu, 25 Jun 2020 17:10:24 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/git-versioning-this-assembly-is-inaccessible-due-to-its-protection-level/</guid>
      
        <description>&lt;h2 id=&#34;-problem&#34;&gt;😨 Problem&lt;/h2&gt;
&lt;p&gt;After I installed the &lt;strong&gt;&lt;a href=&#34;https://www.nuget.org/packages/Nerdbank.GitVersioning&#34;&gt;Nerdbank.GitVersioning&lt;/a&gt;&lt;/strong&gt; Nuget package in my .NET MVC app, the following error came out when I want to get the version using &lt;code&gt;ThisAssembly.AssemblyInformationalVersion&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;error CS0122: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ThisAssembly&amp;#39;&lt;/span&gt; is inaccessible due to its protection level
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I tried to install the package across all the projects in the same solution. It didn&amp;rsquo;t work.&lt;/p&gt;
&lt;p&gt;I tried to uninstall and re-ininstall the package. It didn&amp;rsquo;t work.&lt;/p&gt;
&lt;h2 id=&#34;-solution&#34;&gt;😀 Solution&lt;/h2&gt;
&lt;h3 id=&#34;csproj&#34;&gt;.csproj&lt;/h3&gt;
&lt;p&gt;Turns out there is something missing in my &lt;code&gt;.csproj&lt;/code&gt; file. I missed an &lt;code&gt;&amp;lt;Import&amp;gt;&lt;/code&gt; tag at the end of the file, just before the &lt;code&gt;&amp;lt;/Target&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Project=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Condition=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Exists(&amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And in the &lt;code&gt;EnsureNuGetPackageBuildImports&lt;/code&gt; target, add the following line:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Error&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Condition=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;!Exists(&amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Text=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$([System.String]::Format(&amp;#39;$(ErrorText)&amp;#39;, &amp;#39;..\packages\Nerdbank.GitVersioning.3.1.91\build\Nerdbank.GitVersioning.targets&amp;#39;))&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In addition, the 1st &lt;code&gt;&amp;lt;PropertyGroup&amp;gt;&lt;/code&gt; should contain a pair of  &lt;code&gt;NuGetPackageImportStamp&lt;/code&gt; tag:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;NuGetPackageImportStamp&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/NuGetPackageImportStamp&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;assemblyinfocs&#34;&gt;&lt;code&gt;AssemblyInfo.cs&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;I also removed the following lines in &lt;code&gt;Properties/AssemblyInfo.cs&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c#&#34; data-lang=&#34;c#&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[assembly: AssemblyVersion(&amp;#34;1.0.0.0&amp;#34;)]&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;[assembly: AssemblyFileVersion(&amp;#34;1.0.0.0&amp;#34;)]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;versionjson&#34;&gt;&lt;code&gt;version.json&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;At the root directory of the &lt;strong&gt;project&lt;/strong&gt;, I added a &lt;code&gt;version.json&lt;/code&gt; file with the following content:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://raw.githubusercontent.com/dotnet/Nerdbank.GitVersioning/master/src/NerdBank.GitVersioning/version.schema.json&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1.0.0&amp;#34;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, &lt;code&gt;ThisAssembly&lt;/code&gt; is back and I can read the git version info successfully.&lt;/p&gt;
&lt;h6 id=&#34;-references&#34;&gt;🔗 references:&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/blob/master/doc/dotnet.md&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/blob/master/doc/dotnet.md&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/issues/449&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/issues/449&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dotnet/Nerdbank.GitVersioning/issues/404&#34;&gt;https://github.com/dotnet/Nerdbank.GitVersioning/issues/404&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h6 id=&#34;-cover-image-grace-hoppers-operational-logbook-for-the-harvard-mark-ii-computerhttpswwwbusinessinsidercomauharvard-mark-i-grace-hopper-bug-2015-7&#34;&gt;🖼 cover image: &lt;a href=&#34;https://www.businessinsider.com.au/harvard-mark-i-grace-hopper-bug-2015-7&#34;&gt;Grace Hopper’s operational logbook for the Harvard Mark II computer&lt;/a&gt;&lt;/h6&gt;
</description>
      
    </item>
    
    <item>
      <title>Documentation Makes Easy With MkDocs and GitLab Pages</title>
      <link>https://blog.eternalrecurrence.space/posts/documentation-makes-easy-with-mkdocs-and-gitlab-pages/</link>
      <pubDate>Fri, 12 Jun 2020 19:37:00 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/documentation-makes-easy-with-mkdocs-and-gitlab-pages/</guid>
      
        <description>&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;I created a static website using &lt;strong&gt;MkDocs&lt;/strong&gt; and deployed to &lt;a href=&#34;https://docs.gitlab.com/ee/user/project/pages/&#34;&gt;&lt;strong&gt;GitLab Pages&lt;/strong&gt;&lt;/a&gt;. This is what I did: &lt;a href=&#34;https://bemn-proof-of-concept.gitlab.io/mkdoc/&#34;&gt;https://bemn-proof-of-concept.gitlab.io/mkdoc/&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#intro&#34;&gt;MkDocs&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#preparation&#34;&gt;Preparation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#up-and-run&#34;&gt;Up and Run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#add-a-new-page&#34;&gt;Add a new page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#theming&#34;&gt;Theming&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#custom-resources&#34;&gt;Custom Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#gitlab-pages&#34;&gt;GitLab Pages&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#gitlab-ci-yml&#34;&gt;.gitlab-ci.yml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#build-and-deploy&#34;&gt;Build and Deploy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#conclusion&#34;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;intro&#34;&gt;MkDocs&lt;/h2&gt;
&lt;p&gt;From &lt;a href=&#34;https://www.mkdocs.org/&#34;&gt;MkDocs&#39; official website&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;MkDocs is a &lt;strong&gt;fast&lt;/strong&gt;, &lt;strong&gt;simple&lt;/strong&gt; and &lt;strong&gt;downright gorgeous&lt;/strong&gt; static site generator that&amp;rsquo;s geared towards building project documentation. Documentation source files are written in Markdown, and configured with a single YAML configuration file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In my opinion, setting up a static site using MkDocs is really straightforward. It&amp;rsquo;s easy to change the theme and insert custom styles/scripts. &lt;a href=&#34;https://en.m.wikipedia.org/wiki/KISS_principle&#34;&gt;Keep it simple, stupid&lt;/a&gt;. That&amp;rsquo;s what I need.&lt;/p&gt;
&lt;h3 id=&#34;preparation&#34;&gt;Preparation&lt;/h3&gt;
&lt;p&gt;Make sure that you have the following tools:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;python 3.x&lt;/strong&gt; and &lt;strong&gt;pip&lt;/strong&gt;. Install it via &lt;a href=&#34;https://www.python.org/downloads/&#34;&gt;executable&lt;/a&gt; from the official website, or using tools like &lt;a href=&#34;https://brew.sh/&#34;&gt;Homebrew&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ python --version
Python 3.8.2
$ pip --version
pip 20.0.2 from /usr/local/lib/python3.8/site-packages/pip &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;python 3.8&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;a &lt;strong&gt;GitLab&lt;/strong&gt; account. You can use other service like &lt;a href=&#34;https://pages.github.com/&#34;&gt;Github Pages&lt;/a&gt;, Amazon S3, etc.&lt;/li&gt;
&lt;li&gt;(optional) &lt;a href=&#34;https://www.markdownguide.org/cheat-sheet/&#34;&gt;a markdown cheatsheet&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(For me, the most difficult part is how to get the python and pip versions right. In Mac the built-in python version is 2.7 but we need python 3 to install &lt;code&gt;pip&lt;/code&gt;.)&lt;/p&gt;
&lt;h3 id=&#34;up-and-run&#34;&gt;Up and Run&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ pip install mkdocs
$ mkdocs --version
mkdocs, version 1.1.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Assuming that your project folder is &lt;code&gt;doc-project&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs new doc-project
$ cd doc-project
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A MkDocs project is then created with the following folder structure:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;doc-project
├── docs
│   └── index.md
├── img
│   └── favicon.ico
└── mkdocs.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Let&amp;rsquo;s run the site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs serve
INFO    -  Building documentation...
INFO    -  Cleaning site directory
INFO    -  Documentation built in 1.65 seconds
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;I &lt;span style=&#34;color:#ae81ff&#34;&gt;200612&lt;/span&gt; 23:30:19 server:334&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; Serving on http://127.0.0.1:8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And check it out at &lt;a href=&#34;http://127.0.0.1:8000&#34;&gt;http://127.0.0.1:8000&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/01_welcome.png&#34; alt=&#34;Running MkDocs&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;add-a-new-page&#34;&gt;Add a new page&lt;/h3&gt;
&lt;h4 id=&#34;the-content&#34;&gt;The content&lt;/h4&gt;
&lt;p&gt;Remember, all the documents should place under &lt;code&gt;docs&lt;/code&gt;. Let&amp;rsquo;s create an Overview page:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cd docs
$ touch overview.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After that, add some content to &lt;code&gt;overview.md&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;the-menu&#34;&gt;The menu&lt;/h4&gt;
&lt;p&gt;If you want the visitors to reach the overview page, you need to add an url in the menu. Let&amp;rsquo;s edit &lt;code&gt;mkdocs.yml&lt;/code&gt;, the site config file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project ## change your site name here.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Overview&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;overview.md ## add this line.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You will see a new link called &lt;em&gt;Overview&lt;/em&gt; in the menu. If you want to set your site name now, change the value of &lt;code&gt;site_name&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So that&amp;rsquo;s it. That&amp;rsquo;s how to add a new page.&lt;/p&gt;
&lt;h3 id=&#34;theming&#34;&gt;Theming&lt;/h3&gt;
&lt;p&gt;You can apply a custom theme to MkDocs. &lt;a href=&#34;https://github.com/mkdocs/mkdocs/wiki/MkDocs-Themes&#34;&gt;This page&lt;/a&gt; contains many themes contributed by the community.&lt;/p&gt;
&lt;p&gt;In this section, I will apply the &lt;a href=&#34;https://github.com/squidfunk/mkdocs-material&#34;&gt;Material Design theme&lt;/a&gt; to my MkDocs site.&lt;/p&gt;
&lt;p&gt;Stop running your site and install the theme by:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ pip install mkdocs-material
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Update the &lt;code&gt;mkdocs.yml&lt;/code&gt; again:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Overview&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;overview.md&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Add this section&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;theme&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;material&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;palette&lt;/span&gt;: &lt;span style=&#34;color:#75715e&#34;&gt;## Add this sub-section if you want to change the theme color&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;scheme&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;primary&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;accent&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;orange&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Start the site:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You will see MkDocs is dressing the amber Material Design theme.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/02_theming.png&#34; alt=&#34;Material Design theme with amber scheme&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;custom-resources&#34;&gt;Custom Resources&lt;/h3&gt;
&lt;p&gt;Sometimes you may want to add custom CSS or JS. In MkDocs, you can do it by adding &lt;code&gt;extra_css&lt;/code&gt; and &lt;code&gt;extra_javascript&lt;/code&gt; sections in &lt;code&gt;mkdocs.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I created a &lt;code&gt;catalog&lt;/code&gt; page which contains a table written in markdown. Also, I want to apply &lt;a href=&#34;https://www.datatables.net/&#34;&gt;jQuery DataTables&lt;/a&gt; to make the table more interactive. Therefore, I added the related js libraries and related css file to MkDocs. You can see the result &lt;a href=&#34;https://bemn-proof-of-concept.gitlab.io/mkdoc/catalog/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Exercice:&lt;/strong&gt; create a &lt;code&gt;catalog.md&lt;/code&gt; file and add a markdown table in it.&lt;/p&gt;
&lt;p&gt;Next, add the custom resource sections to the config file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In mkdocs.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;site_name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Doc Project&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;nav&lt;/span&gt;:
  - &lt;span style=&#34;color:#f92672&#34;&gt;Home&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;index.md&lt;/span&gt;
  - &lt;span style=&#34;color:#f92672&#34;&gt;Catalog&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;catalog.md ## The catalog page you created in the exercise.&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;theme&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;material&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;palette&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;scheme&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;primary&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;amber&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;accent&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;orange&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Custom js files.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;extra_javascript&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://code.jquery.com/jquery-3.5.1.min.js&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js&lt;/span&gt;
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;scripts/site.js&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## Custom css files.&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;extra_css&lt;/span&gt;:
  - &lt;span style=&#34;color:#ae81ff&#34;&gt;https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Create a custom js file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cd docs
$ mkdir scripts
$ cd scripts
$ touch site.js
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now in your &lt;code&gt;site.js&lt;/code&gt; file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;$&lt;/span&gt;(document).&lt;span style=&#34;color:#a6e22e&#34;&gt;ready&lt;/span&gt;( &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; () {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;$&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;table&amp;#39;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;DataTable&lt;/span&gt;();
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Afer that, you should be able to see an interactive table in the catalog page.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./img/03_with-custom-resources.png&#34; alt=&#34;With jQuery Datatables&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;gitlab-pages&#34;&gt;GitLab Pages&lt;/h2&gt;
&lt;p&gt;Create a GitLab repository under your personal space or a project group. The url will be something like &lt;code&gt;https://gitlab.com/{username or project group name}/{repo name}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Clone the repo you created and create the following items:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdir src
$ touch .gitlab-ci.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Place your MkDoc items (i.e. the &lt;code&gt;doc-project&lt;/code&gt; folder) under &lt;code&gt;src&lt;/code&gt;. See the following folder structure:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(root of the repo)
├── .gitlab-ci.yml
└── src
    └── doc-project
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;gitlab-ci-yml&#34;&gt;.gitlab-ci.yml&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; is a GitLab-specific file. GitLab will read and run the steps in the file. We need to tell GitLab how to generate and deploy our static MkDocs website. In this file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# In .gitlab-ci.yml...&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;image&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;python:3.8-buster ## MkDocs requies python.&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;pages&lt;/span&gt;:
  &lt;span style=&#34;color:#f92672&#34;&gt;stage&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;deploy ## tell GitLab to deploy the website in this step.&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;before_script&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;pip install mkdocs ## install MkDocs.&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;pip install mkdocs-material ## install the theme.&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;cd ./src/doc-project&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;mkdocs build ## built the site.&lt;/span&gt;
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;mv site ../../public&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;artifacts&lt;/span&gt;:
    &lt;span style=&#34;color:#f92672&#34;&gt;paths&lt;/span&gt;:
    - &lt;span style=&#34;color:#ae81ff&#34;&gt;public&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;## Uncomment the following section if you want to run this step under master branch only.&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# only:&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# - master &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So basically it tells GitLab to install the tools required under python 3.8 environment and deploy the website after the site is generated.&lt;/p&gt;
&lt;p&gt;Try to run the following command if you want to generate the site locally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ mkdocs build
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The generated site is located under  &lt;code&gt;doc-project/site/&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;In order to display the website properly, you need to place the generated site under the &lt;code&gt;public&lt;/code&gt; folder and let GitLab knows the &lt;strong&gt;artifact&lt;/strong&gt; inside is the website you want to deploy.&lt;/p&gt;
&lt;h3 id=&#34;build-and-deploy&#34;&gt;Build and Deploy&lt;/h3&gt;
&lt;p&gt;Push the code to GitLab and the site should build automatically. Check out the status of the build under &lt;strong&gt;CI/CD&lt;/strong&gt; &amp;ndash;&amp;gt;  &lt;strong&gt;Pipelines&lt;/strong&gt;.&lt;/p&gt;
&lt;figure&gt;
    &lt;img src=&#34;./img/04_gitlab-ci-cd-panel.png&#34;
         alt=&#34;CI/CD panel in GitLab&#34;/&gt; &lt;figcaption&gt;
            &lt;h4&gt;A green tag showing passed for each successfully build.&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Check out your website now. The url is &lt;code&gt;https://{username or project group name}.gitlab.io/{repo name}/&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;In this tutorial, we created a static site with custom theme, styles and js library by using MkDocs. After that, we set up a CI/CD pipeline on GitLab for building and deploying this static site to GitLab Pages.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>A Tale of Two Caches: Redis and the cache helper</title>
      <link>https://blog.eternalrecurrence.space/posts/a-tale-of-two-caches-redis-and-cache-helper/</link>
      <pubDate>Thu, 11 Jun 2020 21:06:59 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/a-tale-of-two-caches-redis-and-cache-helper/</guid>
      
        <description>&lt;h2 id=&#34;background&#34;&gt;Background&lt;/h2&gt;
&lt;p&gt;Recently our team started a new project: a showcase page under our main website. The website is read-only and the content won&amp;rsquo;t change frequently so we can have an aggressive caching policy.&lt;/p&gt;
&lt;p&gt;I built this &lt;strong&gt;MVC&lt;/strong&gt; web app using &lt;strong&gt;.NET Core 3.1&lt;/strong&gt; and deploy it as an IIS sub-site under the main website (which is a &lt;strong&gt;.NET Framework&lt;/strong&gt; web app running on the IIS).&lt;/p&gt;
&lt;h3 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#redis&#34;&gt;Redis&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#redis-nuget&#34;&gt;NuGet package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-appsettings&#34;&gt;appsettings.json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-startup&#34;&gt;Startup.cs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-cache-service&#34;&gt;CacheService&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#redis-controller&#34;&gt;Controller&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper&#34;&gt;Cache Tag Helper&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper-example&#34;&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#cache-tag-helper-exaplain&#34;&gt;Explaination&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#bonus&#34;&gt;Bonus: A note on @helper and other HTML helpers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;redis&#34;&gt;Redis&lt;/h2&gt;
&lt;h3 id=&#34;why&#34;&gt;Why?&lt;/h3&gt;
&lt;p&gt;We are using &lt;a href=&#34;https://redis.io/&#34;&gt;Redis&lt;/a&gt; because it is simple, fast and we are already using it across all the main websites.&lt;/p&gt;
&lt;h3 id=&#34;how&#34;&gt;How?&lt;/h3&gt;
&lt;p&gt;Here are some highlights:&lt;/p&gt;
&lt;h4 id=&#34;redis-nuget&#34;&gt;1. NuGet packages&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2.1.30&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.Core&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.Newtonsoft&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;PackageReference&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Include=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;StackExchange.Redis.Extensions.AspNetCore&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Version=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.1.7&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;StackExchange.Redis.Extensions.Newtonsoft&lt;/code&gt; is optional. &lt;a href=&#34;https://devblogs.microsoft.com/dotnet/try-the-new-system-text-json-apis/&#34;&gt;Start from .NET Core 3.0&lt;/a&gt; the default Json serializer will be &lt;code&gt;System.Text.Json&lt;/code&gt;. If you want to use &lt;code&gt;Newtonsoft.Json&lt;/code&gt; then you will need this package in your project.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;StackExchange.Redis.Extensions.Core&lt;/code&gt; and &lt;code&gt;StackExchange.Redis.Extensions.AspNetCore&lt;/code&gt; are the useful package to connect/read/write Redis easier. Read &lt;a href=&#34;https://stackexchange-redis-extensinos.gitbook.io/stackexchange-redis-extensions/&#34;&gt;this documentation&lt;/a&gt; for more details.&lt;/p&gt;
&lt;h4 id=&#34;redis-appsettings&#34;&gt;2. appsettings.json&lt;/h4&gt;
&lt;p&gt;A typical .NET Core project should have an &lt;code&gt;appsettings.json&lt;/code&gt;. Add the following section:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Redis&amp;#34;&lt;/span&gt;: {
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;AllowAdmin&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Ssl&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConnectTimeout&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;6000&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;ConnectRetry&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Database&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Hosts&amp;#34;&lt;/span&gt;: [
      {
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;my-secret-redis-host.com&amp;#34;&lt;/span&gt;,
        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;Port&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6379&amp;#34;&lt;/span&gt;
      }
    ]
  } 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here, &lt;code&gt;my-secret-redis-host.com&lt;/code&gt; is the Redis host and We are using the database no. &lt;code&gt;0&lt;/code&gt;. You can set multiple hosts. You can see a detailed configuration &lt;a href=&#34;https://stackexchange-redis-extensinos.gitbook.io/stackexchange-redis-extensions/configuration/json-configuration&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id=&#34;redis-startup&#34;&gt;3. Startup.cs&lt;/h4&gt;
&lt;p&gt;Add the following code in &lt;code&gt;ConfigureServices()&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; redisConfiguration = Configuration.GetSection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Redis&amp;#34;&lt;/span&gt;).Get&amp;lt;RedisConfiguration&amp;gt;();
services.AddStackExchangeRedisExtensions&amp;lt;NewtonsoftSerializer&amp;gt;(redisConfiguration);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;redis-cache-service&#34;&gt;5. CacheService&lt;/h4&gt;
&lt;p&gt;I created a &lt;code&gt;CacheService.cs&lt;/code&gt; to help me reading/writing data in Redis. In this service:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CacheService(RedisConfiguration redisConfiguration, ILogger&amp;lt;RedisCacheConnectionPoolManager&amp;gt; poolLogger)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; connectionPoolManager = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RedisCacheConnectionPoolManager(redisConfiguration, poolLogger);
        _redisClient = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; RedisCacheClient(connectionPoolManager, serializer, redisConfiguration);
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;(Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when connection to Redis servers. */&lt;/span&gt;
    }
    _cacheDuration = &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// cache period in seconds
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We need a method to write data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;&amp;gt; AddAsync(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; key, &lt;span style=&#34;color:#66d9ef&#34;&gt;object&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; added = &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; _redisClient.GetDbFromConfiguration().AddAsync(key, &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;, DateTimeOffset.Now.AddSeconds(_cacheDuration));
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; added;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when writing data to Redis */&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And we need a method to get cached data:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;T&amp;gt; TryGetAsync&amp;lt;T&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; key)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; _redisClient.GetDbFromConfiguration().ExistsAsync(key))
        {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; _redisClient.GetDbFromConfiguration().GetAsync&amp;lt;T&amp;gt;(key);
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;
        {
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;
        }
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;(Exception ex)
    {
        &lt;span style=&#34;color:#75715e&#34;&gt;/* something wrong when writing data to Redis */&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I intentionally name this method &lt;code&gt;TryGetAsync()&lt;/code&gt; because the cache may not exist or already expired when you try to get it from Redis.&lt;/p&gt;
&lt;p&gt;After that, let&amp;rsquo;s go back to &lt;code&gt;Startup.cs&lt;/code&gt; and register this service in &lt;code&gt;ConfigureService()&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cs&#34; data-lang=&#34;cs&#34;&gt;services.AddTransient&amp;lt;CacheService&amp;gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Remember to register this service &lt;strong&gt;after&lt;/strong&gt; &lt;code&gt;services.AddStackExchangeRedisExtensions()&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;redis-controller&#34;&gt;5. Controller&lt;/h4&gt;
&lt;p&gt;Inject the &lt;code&gt;CacheService&lt;/code&gt; to the controller:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; DemoController(CacheService cacheService)
{
    _cacheService = cacheService;
}


&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; Task&amp;lt;IActionResult&amp;gt; Demo(&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name)
{
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; cacheKey = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;DemoApp:{name}&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#75715e&#34;&gt;// Try to get cached value from Redis.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; cachedResult = &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; _cacheService.TryGetAsync&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&amp;gt;(cacheKey);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; != cachedResult)
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; View(cachedResult);
    }

    &lt;span style=&#34;color:#75715e&#34;&gt;// Add a new entry to Redis before returning the message.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; message = &lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#34;Hello, {name}&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; != sections &amp;amp;&amp;amp; sections.Any())
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; _cacheService.AddAsync(cacheKey, message);
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; View(message);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Explain Like I&amp;rsquo;m Five&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;You ask the shopkeeper in &lt;code&gt;Demo&lt;/code&gt; bookstore do they have a specific book &lt;code&gt;name&lt;/code&gt;. First, the shopkeeper looks for the book on the bookshelf named &lt;code&gt;Redis&lt;/code&gt;. If he finds that book, he takes it out and gives it to you.&lt;/p&gt;
&lt;p&gt;If your book does not exist in the &lt;code&gt;Redis&lt;/code&gt; bookstore, he has to go out and buy that book for you(!). However, he buys 2 identical copies. He gives you one and puts the other one on the &lt;code&gt;Redis&lt;/code&gt; bookshelf, just in case another customer want that book later.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cache-tag-helper&#34;&gt;Cache Tag Helper&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/built-in/cache-tag-helper?view=aspnetcore-3.1&#34;&gt;Cache Tag Helper&lt;/a&gt; is a tag that you can use in a &lt;strong&gt;.NET Core MVC&lt;/strong&gt; app. Content encolsed by this &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; tag will be cached in the internal cache provider.&lt;/p&gt;
&lt;h3 id=&#34;cache-tag-helper-example&#34;&gt;Example&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;expires-after&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;@TimeSpan.FromSeconds(60)&amp;#34;&lt;/span&gt; 
       &lt;span style=&#34;color:#a6e22e&#34;&gt;vary-by-route&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; 
       &lt;span style=&#34;color:#a6e22e&#34;&gt;vary-by-user&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt;&amp;gt;
	@System.DateTime.Now
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;cache&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;cache-tag-helper-exaplain&#34;&gt;Explaination&lt;/h3&gt;
&lt;p&gt;In the above example, some attributes is set in the &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;expires-after&lt;/code&gt;: how long (in seconds) will this cache last for.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vary-by-route&lt;/code&gt;: different copy will be cached when the route has a different value in the &lt;code&gt;name&lt;/code&gt;param.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vary-by-user&lt;/code&gt;: different user will see different cached copies.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;how-can-i-know-if-it-is-working&#34;&gt;How can I know if it is working?&lt;/h3&gt;
&lt;p&gt;You will see the value rendered in the above example won&amp;rsquo;t change for 60 seconds even &lt;code&gt;System.DateTime.Now&lt;/code&gt; should show the current time.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;bonus&#34;&gt;Bonus: A note on &lt;code&gt;@helper&lt;/code&gt; and other HTML helpers&lt;/h2&gt;
&lt;p&gt;In the old days we can define some &lt;code&gt;@helper&lt;/code&gt; functions in the razor view and (re)use it in the view. It&amp;rsquo;s being removed since .NET Core 3.0 because the design of &lt;code&gt;@helper&lt;/code&gt; function does not compatible with async Razor content anymore.&lt;/p&gt;
&lt;h3 id=&#34;successor-of-the-html-helpers&#34;&gt;Successor of the HTML helpers?&lt;/h3&gt;
&lt;p&gt;You can use the &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1&#34;&gt;&lt;strong&gt;Tag Helpers in ASP.NET Core&lt;/strong&gt;&lt;/a&gt;. Yes, the &lt;code&gt;&amp;lt;cache&amp;gt;&lt;/code&gt; Tag Helper is one of the &lt;a href=&#34;https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1#built-in-aspnet-core-tag-helpers&#34;&gt;built-in Tag Helpers in .NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In addition, you can use the &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.rendering.htmlhelperpartialextensions.partialasync?view=aspnetcore-3.1&#34;&gt;&lt;code&gt;PartialAsync()&lt;/code&gt; method&lt;/a&gt;  to render the partial HTML markup &lt;strong&gt;asynchronously&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;@await Html.PartialAsync(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;_PartialName&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;More references on the HTML helpers and Tag Helpers:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/aspnet/Mvc/issues/4127&#34;&gt;What happened to the @helper directive in Razor ?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/aspnet/Razor/issues/281&#34;&gt;Remove the @helper directive from Razor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://dannyvanderkraan.wordpress.com/2016/04/19/asp-net-core-1-0-goodbye-html-helpers-and-hello-taghelpers/&#34;&gt;ASP.NET Core 1.0: Goodbye HTML helpers and hello TagHelpers!&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>A Note on SSL Certificate</title>
      <link>https://blog.eternalrecurrence.space/posts/a-note-on-ssl/</link>
      <pubDate>Sat, 23 May 2020 17:10:25 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/a-note-on-ssl/</guid>
      
        <description>&lt;p&gt;This is a note about the Linkedin learning course &lt;a href=&#34;https://www.linkedin.com/learning/ssl-certificates-for-web-developers&#34;&gt;SSL Certificates for Web Developers&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;certificate-and-protocol&#34;&gt;Certificate and protocol&lt;/h2&gt;
&lt;h3 id=&#34;what-are-ssltls-stands-for&#34;&gt;What are SSL/TLS stands for?&lt;/h3&gt;
&lt;p&gt;They stands for &lt;em&gt;Secure Socket Layer&lt;/em&gt; and &lt;em&gt;Transport Layer Security&lt;/em&gt;. They are the protocol names.&lt;/p&gt;
&lt;h3 id=&#34;what-is-https-and-why-we-are-using-it&#34;&gt;What is HTTPS, and why we are using it?&lt;/h3&gt;
&lt;p&gt;Https[ecure], a protocol on top of HTTP to secure the integrity of the data sending form the user to server.&lt;/p&gt;
&lt;h3 id=&#34;what-is-a-certificate-and-what-is-it-for&#34;&gt;What is a certificate, and what is it for?&lt;/h3&gt;
&lt;p&gt;A certificate &lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; (&lt;code&gt;.crt&lt;/code&gt;, &lt;code&gt;.cer&lt;/code&gt;) certifies &lt;strong&gt;the ownership of a public key&lt;/strong&gt;. A certificate contains:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;organization,&lt;/li&gt;
&lt;li&gt;issuer (e.g. the Certificate Authority / Self-signed),&lt;/li&gt;
&lt;li&gt;valid period,&lt;/li&gt;
&lt;li&gt;url,&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;state / country&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These information can be used to identify the certificate owner.&lt;/p&gt;
&lt;p&gt;The public key is used to &lt;strong&gt;encrypt&lt;/strong&gt;/&lt;del&gt;decrypt&lt;/del&gt; the communication between computers.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cryptography&#34;&gt;Cryptography&lt;/h2&gt;
&lt;h3 id=&#34;asymmetric-vs-symmetric&#34;&gt;Asymmetric VS. Symmetric&lt;/h3&gt;
&lt;p&gt;Asymmetric cryptography requies a pair of keys. The &lt;em&gt;Public key&lt;/em&gt; is used to encrypt messages while the &lt;em&gt;private key&lt;/em&gt; is for decryption.&lt;/p&gt;
&lt;p&gt;In symmetric cryptography, both ends use the same password to encrypt + decrypt messages.&lt;/p&gt;
&lt;h3 id=&#34;why-are-we-using-both-technologies-and-how&#34;&gt;Why are we using both technologies? And how?&lt;/h3&gt;
&lt;p&gt;In short: For the balance of security and speed, we use asymmetric cryptography to establish secure connection (&lt;em&gt;handshake&lt;/em&gt;) and use symmetric cryptography for the data transmission.&lt;/p&gt;
&lt;h4 id=&#34;the-handshake&#34;&gt;The Handshake&lt;/h4&gt;
&lt;p&gt;The end user and the server use the same password to encrypt + decrypt the messages. This password is sent from a server to a user by following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Validate the certificate&amp;hellip;
&lt;ol&gt;
&lt;li&gt;User makes a request to a web server.&lt;/li&gt;
&lt;li&gt;Web server responds with its &lt;em&gt;public key&lt;/em&gt; certificate.&lt;/li&gt;
&lt;li&gt;User checks if the &lt;em&gt;public key&lt;/em&gt; certificate is valid.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;If the certificate from web server is valid&amp;hellip;
&lt;ol&gt;
&lt;li&gt;User encrypts the password using server&amp;rsquo;s public key, and send to web server.&lt;/li&gt;
&lt;li&gt;Server decrypts with its private key.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After that, a secure connection is established and they shared the &lt;em&gt;same&lt;/em&gt; password &lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;types-of-certificate&#34;&gt;Types of certificate&lt;/h2&gt;
&lt;h3 id=&#34;self-signed&#34;&gt;Self-signed&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Intra-communications between systems under same organization.&lt;/li&gt;
&lt;li&gt;Local development&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ca&#34;&gt;CA&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Subdomain: tied to 1 domain (e.g. &lt;code&gt;www.mydoma.in&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Wildcard: tied to a groups of subdomains (e.g. &lt;code&gt;*.mydoma.in&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Multi-domain: (e.g. &lt;code&gt;mydoma.in&lt;/code&gt;, &lt;code&gt;myweb.site&lt;/code&gt;, &amp;hellip;)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;acme-automatic-certificate-management-environment&#34;&gt;ACME (Automatic Certificate Management Environment)&lt;/h2&gt;
&lt;p&gt;To configuring Let&amp;rsquo;s Encrypt&amp;rsquo;s ACME on server, we can make use of the &lt;a href=&#34;https://certbot.eff.org/&#34;&gt;CertBot&lt;/a&gt;. For IIS, use &lt;a href=&#34;https://certifytheweb.com/&#34;&gt;Certify&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;
&lt;hr&gt;
&lt;h2 id=&#34;hsts&#34;&gt;HSTS&lt;/h2&gt;
&lt;p&gt;This can instruct the browser to interact with the server with HTTPS only. Redirect from HTTP to HTTPS is not required. This is achieved by adding a response header (&lt;code&gt;Strict-Transport-Security&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Example response header:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Strict-Transport-Security: max-age&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;63072000; includeSubDomains; preload&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;what-hsts-is-protecting-us-from&#34;&gt;What HSTS is protecting us from?&lt;/h3&gt;
&lt;p&gt;The &lt;strong&gt;Man-in-the-Middle TLS Protocol Downgrade Attack.&lt;/strong&gt;&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt; In &lt;a href=&#34;https://www.praetorian.com/blog/man-in-the-middle-tls-ssl-protocol-downgrade-attack&#34;&gt;this example&lt;/a&gt;, the hacker C sends a ARP cache table request to both the client A and server B:
&lt;img src=&#34;https://assets.website-files.com/58866caeabc83d5e7c574c74/5cdc9328fcbd747340785c63_20140811-mitm-attack.png&#34; alt=&#34;Manipulating Device ARP Cache Tables&#34;&gt;&lt;/p&gt;
&lt;p&gt;Now the traffic from A to B is going through C, a typical &lt;strong&gt;Man-in-the-Middle attack&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The next step is C try to have a &lt;strong&gt;downgrade&lt;/strong&gt; on the TLS version. Since the browsers are backward-compatible on older TLS versions, C can therefore to make the version downgraded to the negotiated version in the handshake process. C can then intercept and decrypt the messages by making use of the security vulnerabilities of eariler TLS.&lt;/p&gt;
&lt;h3 id=&#34;hsts-preloading&#34;&gt;HSTS Preloading&lt;/h3&gt;
&lt;p&gt;Avoid redirection of the first request too: &lt;a href=&#34;https://hstspreload.org/&#34;&gt;https://hstspreload.org/&lt;/a&gt;&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;the certificate does not depends on the protocol we use &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;password is just for the same browsing session. &lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;I am not an expert on this area and I tried by best to digest that article and &lt;a href=&#34;https://en.m.wikipedia.org/wiki/Downgrade_attack&#34;&gt;this wiki&lt;/a&gt; to write the summary. &lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
      
    </item>
    
    <item>
      <title>Creating a User With Limited Privileges in Postgres</title>
      <link>https://blog.eternalrecurrence.space/posts/creating-a-user-with-limited-privileges-in-postgres/</link>
      <pubDate>Thu, 16 Apr 2020 20:01:15 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/creating-a-user-with-limited-privileges-in-postgres/</guid>
      
        <description>&lt;p&gt;This post showing how to create a user with limited privileges in PostgreSQL.&lt;/p&gt;
&lt;h2 id=&#34;situation&#34;&gt;Situation&lt;/h2&gt;
&lt;p&gt;I created a web app. It reads data from a PostgreSQL database. I want to create a user with read-only privilege and connect to the database.&lt;/p&gt;
&lt;h3 id=&#34;code&#34;&gt;Code&lt;/h3&gt;
&lt;p&gt;Let say the user you want to create is &lt;code&gt;webapp_user&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;CREATE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USER&lt;/span&gt; webapp_user &lt;span style=&#34;color:#66d9ef&#34;&gt;WITH&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ENCRYPTED&lt;/span&gt; PASSWORD &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;secure_passw0rd&amp;#39;&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Grant the right to all public tables:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; TABLES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Connect the database using &lt;code&gt;webapp_user&lt;/code&gt; in the web app.&lt;/p&gt;
&lt;h2 id=&#34;i-want-more-power&#34;&gt;I want more power&amp;hellip;&lt;/h2&gt;
&lt;p&gt;Now my web app is not read-only anymore. Users can create/delete some entries in the tables too.&lt;/p&gt;
&lt;h3 id=&#34;code-1&#34;&gt;Code&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;UPDATE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;DELETE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; TABLES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Looks simple and cool! But why I got the &lt;strong&gt;&lt;code&gt;permission denied for sequence XXX_id_seq to YYY&lt;/code&gt;&lt;/strong&gt; error while inserting new records to the tables?&lt;/p&gt;
&lt;p&gt;If your table has an &lt;em&gt;auto-increment&lt;/em&gt; field then you need some extra privileges: the privileges to use the sequence-related functions (e.g. &lt;code&gt;currval&lt;/code&gt; and &lt;code&gt;nextval&lt;/code&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;USAGE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ALL&lt;/span&gt; SEQUENCES &lt;span style=&#34;color:#66d9ef&#34;&gt;IN&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SCHEMA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;to&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Example of an &lt;em&gt;auto-increment&lt;/em&gt; field: the id of the table&lt;/p&gt;
&lt;h3 id=&#34;extra&#34;&gt;Extra&lt;/h3&gt;
&lt;p&gt;What if I just want to apply the privilege(s) to a special table?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;GRANT&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;SELECT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;INSERT&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;UPDATE&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;DELETE&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;ON&lt;/span&gt; special_table &lt;span style=&#34;color:#66d9ef&#34;&gt;TO&lt;/span&gt; webapp_user;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Reference:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.techonthenet.com/postgresql/grant_revoke.php&#34;&gt;Grant Privileges on Table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/q/9325017&#34;&gt;ERROR: permission denied for sequence cities_id_seq using Postgres&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;(this blog post also available on &lt;a href=&#34;https://dev.to/bemnlam/creating-a-user-with-limited-privileges-in-postgres-5ee7/edit&#34;&gt;dev.to&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>How to add a new Hugo blog post</title>
      <link>https://blog.eternalrecurrence.space/posts/welcome/</link>
      <pubDate>Thu, 16 Apr 2020 10:55:25 +0800</pubDate>
      
      <guid>https://blog.eternalrecurrence.space/posts/welcome/</guid>
      
        <description>&lt;p&gt;Go to &lt;code&gt;blog&lt;/code&gt; folder&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo new posts/name-of-the-new-post.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Write your post. Back to &lt;code&gt;blog&lt;/code&gt; folder  and then&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo server -D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then you can preview your blog locally.&lt;/p&gt;
&lt;h3 id=&#34;deploy-production&#34;&gt;Deploy production&lt;/h3&gt;
&lt;p&gt;Change &lt;code&gt;draft=true&lt;/code&gt; in the blog post and then&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hugo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Push to remote &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Done.&lt;/p&gt;
</description>
      
    </item>
    
  </channel>
</rss>
